import{D as g,z as l,R as o,j as A,S as m,T as w,U as y,V as z,W as b,X as p,Y as C}from"./DzMhsBOq.js";const P=()=>{const c=g(),r=l(()=>{var e;return(e=c.$firebase)==null?void 0:e.auth}),a=o("user",()=>null),n=o("auth-initialized",()=>!1);let s=null;const i=()=>{r.value&&!s&&(s=y(r.value,e=>{a.value=e,n.value=!0}))};A(()=>{i(),m(r,e=>{e&&!s&&i()})}),w(()=>{s&&(s(),s=null)});const d=async(e,t)=>{if(!r.value)return{user:null,error:"Firebase Auth not initialized"};try{return{user:(await C(r.value,e,t)).user,error:null}}catch(u){return{user:null,error:u.message}}},h=async(e,t)=>{if(!r.value)return{user:null,error:"Firebase Auth not initialized"};try{return{user:(await p(r.value,e,t)).user,error:null}}catch(u){return{user:null,error:u.message}}},f=async()=>{if(!r.value)return{success:!1,error:"Firebase Auth not initialized"};try{return await b(r.value),{success:!0,error:null}}catch(e){return{success:!1,error:e.message}}},v=async e=>{if(!r.value)return{success:!1,error:"Firebase Auth not initialized"};try{return await z(r.value,e),{success:!0,error:null}}catch(t){return{success:!1,error:t.message}}};return{user:a,authInitialized:n,isLoggedIn:l(()=>!!a.value),register:d,login:h,logout:f,resetPassword:v}};export{P as u};
