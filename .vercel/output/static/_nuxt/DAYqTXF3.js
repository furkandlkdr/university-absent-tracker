import{S as M,a3 as C,a4 as W,z as j,a5 as d,x as L}from"./DzMhsBOq.js";function $(t){return C()?(W(t),!0):!1}const T=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const x=Object.prototype.toString,R=t=>x.call(t)==="[object Object]",p=()=>{},D=F();function F(){var t,i;return T&&((t=window==null?void 0:window.navigator)==null?void 0:t.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((i=window==null?void 0:window.navigator)==null?void 0:i.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}function S(t){return Array.isArray(t)?t:[t]}function G(t,i,s){return M(t,i,{...s,immediate:!0})}const I=T?window:void 0;function v(t){var i;const s=d(t);return(i=s==null?void 0:s.$el)!=null?i:s}function h(...t){const i=[],s=()=>{i.forEach(r=>r()),i.length=0},c=(r,o,l,a)=>(r.addEventListener(o,l,a),()=>r.removeEventListener(o,l,a)),f=j(()=>{const r=S(d(t[0])).filter(o=>o!=null);return r.every(o=>typeof o!="string")?r:void 0}),w=G(()=>{var r,o;return[(o=(r=f.value)==null?void 0:r.map(l=>v(l)))!=null?o:[I].filter(l=>l!=null),S(d(f.value?t[1]:t[0])),S(L(f.value?t[2]:t[1])),d(f.value?t[3]:t[2])]},([r,o,l,a])=>{if(s(),!(r!=null&&r.length)||!(o!=null&&o.length)||!(l!=null&&l.length))return;const b=R(a)?{...a}:a;i.push(...r.flatMap(g=>o.flatMap(m=>l.map(A=>c(g,m,A,b)))))},{flush:"post"}),y=()=>{w(),s()};return $(s),y}let O=!1;function z(t,i,s={}){const{window:c=I,ignore:f=[],capture:w=!0,detectIframe:y=!1,controls:r=!1}=s;if(!c)return r?{stop:p,cancel:p,trigger:p}:p;if(D&&!O){O=!0;const e={passive:!0};Array.from(c.document.body.children).forEach(n=>h(n,"click",p,e)),h(c.document.documentElement,"click",p,e)}let o=!0;const l=e=>d(f).some(n=>{if(typeof n=="string")return Array.from(c.document.querySelectorAll(n)).some(u=>u===e.target||e.composedPath().includes(u));{const u=v(n);return u&&(e.target===u||e.composedPath().includes(u))}});function a(e){const n=d(e);return n&&n.$.subTree.shapeFlag===16}function b(e,n){const u=d(e),E=u.$.subTree&&u.$.subTree.children;return E==null||!Array.isArray(E)?!1:E.some(k=>k.el===n.target||n.composedPath().includes(k.el))}const g=e=>{const n=v(t);if(e.target!=null&&!(!(n instanceof Element)&&a(t)&&b(t,e))&&!(!n||n===e.target||e.composedPath().includes(n))){if("detail"in e&&e.detail===0&&(o=!l(e)),!o){o=!0;return}i(e)}};let m=!1;const A=[h(c,"click",e=>{m||(m=!0,setTimeout(()=>{m=!1},0),g(e))},{passive:!0,capture:w}),h(c,"pointerdown",e=>{const n=v(t);o=!l(e)&&!!(n&&!e.composedPath().includes(n))},{passive:!0}),y&&h(c,"blur",e=>{setTimeout(()=>{var n;const u=v(t);((n=c.document.activeElement)==null?void 0:n.tagName)==="IFRAME"&&!(u!=null&&u.contains(c.document.activeElement))&&i(e)},0)},{passive:!0})].filter(Boolean),P=()=>A.forEach(e=>e());return r?{stop:P,cancel:()=>{o=!1},trigger:e=>{o=!0,g(e),o=!1}}:P}export{z as o};
