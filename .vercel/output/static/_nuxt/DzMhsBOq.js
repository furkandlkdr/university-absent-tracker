const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./hZk-Juaz.js","./DslZ-RwP.js","./DBcKAFuA.js","./CED3FtRe.js","./BnnO2Fv5.js","./cUgYPMJs.js","./D-snf7s6.js","./DnCs4Hod.js","./DAYqTXF3.js","./XfjbnB_g.js","./CFbww66L.js","./D8NmufPH.js","./DlAUqK2U.js","./default.LP8S9Cvo.css","./CEhKBCQW.js","./C0ObDDsh.js","./error-404.aNCZ2L4y.css","./2hZ6-4pJ.js","./error-500.JESWioAZ.css"])))=>i.map(i=>d[i]);
var yb=Object.defineProperty;var vb=(n,e,t)=>e in n?yb(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var fr=(n,e,t)=>vb(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Pf(n){const e=Object.create(null);for(const t of n.split(","))e[t]=1;return t=>t in e}const Me={},ui=[],An=()=>{},Eb=()=>!1,da=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),Cf=n=>n.startsWith("onUpdate:"),ht=Object.assign,kf=(n,e)=>{const t=n.indexOf(e);t>-1&&n.splice(t,1)},Ib=Object.prototype.hasOwnProperty,ke=(n,e)=>Ib.call(n,e),fe=Array.isArray,hi=n=>pa(n)==="[object Map]",gy=n=>pa(n)==="[object Set]",Tb=n=>pa(n)==="[object RegExp]",me=n=>typeof n=="function",He=n=>typeof n=="string",Xn=n=>typeof n=="symbol",Fe=n=>n!==null&&typeof n=="object",_y=n=>(Fe(n)||me(n))&&me(n.then)&&me(n.catch),yy=Object.prototype.toString,pa=n=>yy.call(n),wb=n=>pa(n).slice(8,-1),vy=n=>pa(n)==="[object Object]",xf=n=>He(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,fi=Pf(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Rl=n=>{const e=Object.create(null);return t=>e[t]||(e[t]=n(t))},bb=/-(\w)/g,sn=Rl(n=>n.replace(bb,(e,t)=>t?t.toUpperCase():"")),Ab=/\B([A-Z])/g,Os=Rl(n=>n.replace(Ab,"-$1").toLowerCase()),Sl=Rl(n=>n.charAt(0).toUpperCase()+n.slice(1)),xu=Rl(n=>n?`on${Sl(n)}`:""),xr=(n,e)=>!Object.is(n,e),di=(n,...e)=>{for(let t=0;t<n.length;t++)n[t](...e)},Ey=(n,e,t,r=!1)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,writable:r,value:t})},ph=n=>{const e=parseFloat(n);return isNaN(e)?n:e},Iy=n=>{const e=He(n)?Number(n):NaN;return isNaN(e)?n:e};let Yp;const Pl=()=>Yp||(Yp=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Cl(n){if(fe(n)){const e={};for(let t=0;t<n.length;t++){const r=n[t],s=He(r)?Cb(r):Cl(r);if(s)for(const i in s)e[i]=s[i]}return e}else if(He(n)||Fe(n))return n}const Rb=/;(?![^(]*\))/g,Sb=/:([^]+)/,Pb=/\/\*[^]*?\*\//g;function Cb(n){const e={};return n.replace(Pb,"").split(Rb).forEach(t=>{if(t){const r=t.split(Sb);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function kl(n){let e="";if(He(n))e=n;else if(fe(n))for(let t=0;t<n.length;t++){const r=kl(n[t]);r&&(e+=r+" ")}else if(Fe(n))for(const t in n)n[t]&&(e+=t+" ");return e.trim()}function kb(n){if(!n)return null;let{class:e,style:t}=n;return e&&!He(e)&&(n.class=kl(e)),t&&(n.style=Cl(t)),n}const xb="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Db=Pf(xb);function Ty(n){return!!n||n===""}const wy=n=>!!(n&&n.__v_isRef===!0),Vb=n=>He(n)?n:n==null?"":fe(n)||Fe(n)&&(n.toString===yy||!me(n.toString))?wy(n)?Vb(n.value):JSON.stringify(n,by,2):String(n),by=(n,e)=>wy(e)?by(n,e.value):hi(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[r,s],i)=>(t[Du(r,i)+" =>"]=s,t),{})}:gy(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>Du(t))}:Xn(e)?Du(e):Fe(e)&&!fe(e)&&!vy(e)?String(e):e,Du=(n,e="")=>{var t;return Xn(n)?`Symbol(${(t=n.description)!=null?t:e})`:n};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Vt;class Ay{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Vt,!e&&Vt&&(this.index=(Vt.scopes||(Vt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=Vt;try{return Vt=this,e()}finally{Vt=t}}}on(){Vt=this}off(){Vt=this.parent}stop(e){if(this._active){this._active=!1;let t,r;for(t=0,r=this.effects.length;t<r;t++)this.effects[t].stop();for(this.effects.length=0,t=0,r=this.cleanups.length;t<r;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function Nb(n){return new Ay(n)}function Ry(){return Vt}function UM(n,e=!1){Vt&&Vt.cleanups.push(n)}let Le;const Vu=new WeakSet;class Sy{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Vt&&Vt.active&&Vt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Vu.has(this)&&(Vu.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Cy(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Jp(this),ky(this);const e=Le,t=dn;Le=this,dn=!0;try{return this.fn()}finally{xy(this),Le=e,dn=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Nf(e);this.deps=this.depsTail=void 0,Jp(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Vu.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){mh(this)&&this.run()}get dirty(){return mh(this)}}let Py=0,Ao,Ro;function Cy(n,e=!1){if(n.flags|=8,e){n.next=Ro,Ro=n;return}n.next=Ao,Ao=n}function Df(){Py++}function Vf(){if(--Py>0)return;if(Ro){let e=Ro;for(Ro=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let n;for(;Ao;){let e=Ao;for(Ao=void 0;e;){const t=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){n||(n=r)}e=t}}if(n)throw n}function ky(n){for(let e=n.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function xy(n){let e,t=n.depsTail,r=t;for(;r;){const s=r.prevDep;r.version===-1?(r===t&&(t=s),Nf(r),Ob(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}n.deps=e,n.depsTail=t}function mh(n){for(let e=n.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Dy(e.dep.computed)||e.dep.version!==e.version))return!0;return!!n._dirty}function Dy(n){if(n.flags&4&&!(n.flags&16)||(n.flags&=-17,n.globalVersion===jo))return;n.globalVersion=jo;const e=n.dep;if(n.flags|=2,e.version>0&&!n.isSSR&&n.deps&&!mh(n)){n.flags&=-3;return}const t=Le,r=dn;Le=n,dn=!0;try{ky(n);const s=n.fn(n._value);(e.version===0||xr(s,n._value))&&(n._value=s,e.version++)}catch(s){throw e.version++,s}finally{Le=t,dn=r,xy(n),n.flags&=-3}}function Nf(n,e=!1){const{dep:t,prevSub:r,nextSub:s}=n;if(r&&(r.nextSub=s,n.prevSub=void 0),s&&(s.prevSub=r,n.nextSub=void 0),t.subs===n&&(t.subs=r,!r&&t.computed)){t.computed.flags&=-5;for(let i=t.computed.deps;i;i=i.nextDep)Nf(i,!0)}!e&&!--t.sc&&t.map&&t.map.delete(t.key)}function Ob(n){const{prevDep:e,nextDep:t}=n;e&&(e.nextDep=t,n.prevDep=void 0),t&&(t.prevDep=e,n.nextDep=void 0)}let dn=!0;const Vy=[];function Kr(){Vy.push(dn),dn=!1}function zr(){const n=Vy.pop();dn=n===void 0?!0:n}function Jp(n){const{cleanup:e}=n;if(n.cleanup=void 0,e){const t=Le;Le=void 0;try{e()}finally{Le=t}}}let jo=0;class Mb{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Of{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!Le||!dn||Le===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==Le)t=this.activeLink=new Mb(Le,this),Le.deps?(t.prevDep=Le.depsTail,Le.depsTail.nextDep=t,Le.depsTail=t):Le.deps=Le.depsTail=t,Ny(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const r=t.nextDep;r.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=r),t.prevDep=Le.depsTail,t.nextDep=void 0,Le.depsTail.nextDep=t,Le.depsTail=t,Le.deps===t&&(Le.deps=r)}return t}trigger(e){this.version++,jo++,this.notify(e)}notify(e){Df();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{Vf()}}}function Ny(n){if(n.dep.sc++,n.sub.flags&4){const e=n.dep.computed;if(e&&!n.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)Ny(r)}const t=n.dep.subs;t!==n&&(n.prevSub=t,t&&(t.nextSub=n)),n.dep.subs=n}}const Lc=new WeakMap,ms=Symbol(""),gh=Symbol(""),$o=Symbol("");function wt(n,e,t){if(dn&&Le){let r=Lc.get(n);r||Lc.set(n,r=new Map);let s=r.get(t);s||(r.set(t,s=new Of),s.map=r,s.key=t),s.track()}}function Un(n,e,t,r,s,i){const o=Lc.get(n);if(!o){jo++;return}const a=c=>{c&&c.trigger()};if(Df(),e==="clear")o.forEach(a);else{const c=fe(n),u=c&&xf(t);if(c&&t==="length"){const h=Number(r);o.forEach((f,m)=>{(m==="length"||m===$o||!Xn(m)&&m>=h)&&a(f)})}else switch((t!==void 0||o.has(void 0))&&a(o.get(t)),u&&a(o.get($o)),e){case"add":c?u&&a(o.get("length")):(a(o.get(ms)),hi(n)&&a(o.get(gh)));break;case"delete":c||(a(o.get(ms)),hi(n)&&a(o.get(gh)));break;case"set":hi(n)&&a(o.get(ms));break}}Vf()}function Lb(n,e){const t=Lc.get(n);return t&&t.get(e)}function zs(n){const e=Se(n);return e===n?e:(wt(e,"iterate",$o),nn(n)?e:e.map(bt))}function xl(n){return wt(n=Se(n),"iterate",$o),n}const Fb={__proto__:null,[Symbol.iterator](){return Nu(this,Symbol.iterator,bt)},concat(...n){return zs(this).concat(...n.map(e=>fe(e)?zs(e):e))},entries(){return Nu(this,"entries",n=>(n[1]=bt(n[1]),n))},every(n,e){return Nn(this,"every",n,e,void 0,arguments)},filter(n,e){return Nn(this,"filter",n,e,t=>t.map(bt),arguments)},find(n,e){return Nn(this,"find",n,e,bt,arguments)},findIndex(n,e){return Nn(this,"findIndex",n,e,void 0,arguments)},findLast(n,e){return Nn(this,"findLast",n,e,bt,arguments)},findLastIndex(n,e){return Nn(this,"findLastIndex",n,e,void 0,arguments)},forEach(n,e){return Nn(this,"forEach",n,e,void 0,arguments)},includes(...n){return Ou(this,"includes",n)},indexOf(...n){return Ou(this,"indexOf",n)},join(n){return zs(this).join(n)},lastIndexOf(...n){return Ou(this,"lastIndexOf",n)},map(n,e){return Nn(this,"map",n,e,void 0,arguments)},pop(){return oo(this,"pop")},push(...n){return oo(this,"push",n)},reduce(n,...e){return Xp(this,"reduce",n,e)},reduceRight(n,...e){return Xp(this,"reduceRight",n,e)},shift(){return oo(this,"shift")},some(n,e){return Nn(this,"some",n,e,void 0,arguments)},splice(...n){return oo(this,"splice",n)},toReversed(){return zs(this).toReversed()},toSorted(n){return zs(this).toSorted(n)},toSpliced(...n){return zs(this).toSpliced(...n)},unshift(...n){return oo(this,"unshift",n)},values(){return Nu(this,"values",bt)}};function Nu(n,e,t){const r=xl(n),s=r[e]();return r!==n&&!nn(n)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.value&&(i.value=t(i.value)),i}),s}const Ub=Array.prototype;function Nn(n,e,t,r,s,i){const o=xl(n),a=o!==n&&!nn(n),c=o[e];if(c!==Ub[e]){const f=c.apply(n,i);return a?bt(f):f}let u=t;o!==n&&(a?u=function(f,m){return t.call(this,bt(f),m,n)}:t.length>2&&(u=function(f,m){return t.call(this,f,m,n)}));const h=c.call(o,u,r);return a&&s?s(h):h}function Xp(n,e,t,r){const s=xl(n);let i=t;return s!==n&&(nn(n)?t.length>3&&(i=function(o,a,c){return t.call(this,o,a,c,n)}):i=function(o,a,c){return t.call(this,o,bt(a),c,n)}),s[e](i,...r)}function Ou(n,e,t){const r=Se(n);wt(r,"iterate",$o);const s=r[e](...t);return(s===-1||s===!1)&&Ff(t[0])?(t[0]=Se(t[0]),r[e](...t)):s}function oo(n,e,t=[]){Kr(),Df();const r=Se(n)[e].apply(n,t);return Vf(),zr(),r}const Bb=Pf("__proto__,__v_isRef,__isVue"),Oy=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(Xn));function jb(n){Xn(n)||(n=String(n));const e=Se(this);return wt(e,"has",n),e.hasOwnProperty(n)}class My{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,r){if(t==="__v_skip")return e.__v_skip;const s=this._isReadonly,i=this._isShallow;if(t==="__v_isReactive")return!s;if(t==="__v_isReadonly")return s;if(t==="__v_isShallow")return i;if(t==="__v_raw")return r===(s?i?Jb:By:i?Uy:Fy).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=fe(e);if(!s){let c;if(o&&(c=Fb[t]))return c;if(t==="hasOwnProperty")return jb}const a=Reflect.get(e,t,et(e)?e:r);return(Xn(t)?Oy.has(t):Bb(t))||(s||wt(e,"get",t),i)?a:et(a)?o&&xf(t)?a:a.value:Fe(a)?s?jy(a):Zn(a):a}}class Ly extends My{constructor(e=!1){super(!1,e)}set(e,t,r,s){let i=e[t];if(!this._isShallow){const c=Br(i);if(!nn(r)&&!Br(r)&&(i=Se(i),r=Se(r)),!fe(e)&&et(i)&&!et(r))return c?!1:(i.value=r,!0)}const o=fe(e)&&xf(t)?Number(t)<e.length:ke(e,t),a=Reflect.set(e,t,r,et(e)?e:s);return e===Se(s)&&(o?xr(r,i)&&Un(e,"set",t,r):Un(e,"add",t,r)),a}deleteProperty(e,t){const r=ke(e,t);e[t];const s=Reflect.deleteProperty(e,t);return s&&r&&Un(e,"delete",t,void 0),s}has(e,t){const r=Reflect.has(e,t);return(!Xn(t)||!Oy.has(t))&&wt(e,"has",t),r}ownKeys(e){return wt(e,"iterate",fe(e)?"length":ms),Reflect.ownKeys(e)}}class $b extends My{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const Hb=new Ly,qb=new $b,Kb=new Ly(!0);const _h=n=>n,Za=n=>Reflect.getPrototypeOf(n);function zb(n,e,t){return function(...r){const s=this.__v_raw,i=Se(s),o=hi(i),a=n==="entries"||n===Symbol.iterator&&o,c=n==="keys"&&o,u=s[n](...r),h=t?_h:e?yh:bt;return!e&&wt(i,"iterate",c?gh:ms),{next(){const{value:f,done:m}=u.next();return m?{value:f,done:m}:{value:a?[h(f[0]),h(f[1])]:h(f),done:m}},[Symbol.iterator](){return this}}}}function ec(n){return function(...e){return n==="delete"?!1:n==="clear"?void 0:this}}function Gb(n,e){const t={get(s){const i=this.__v_raw,o=Se(i),a=Se(s);n||(xr(s,a)&&wt(o,"get",s),wt(o,"get",a));const{has:c}=Za(o),u=e?_h:n?yh:bt;if(c.call(o,s))return u(i.get(s));if(c.call(o,a))return u(i.get(a));i!==o&&i.get(s)},get size(){const s=this.__v_raw;return!n&&wt(Se(s),"iterate",ms),Reflect.get(s,"size",s)},has(s){const i=this.__v_raw,o=Se(i),a=Se(s);return n||(xr(s,a)&&wt(o,"has",s),wt(o,"has",a)),s===a?i.has(s):i.has(s)||i.has(a)},forEach(s,i){const o=this,a=o.__v_raw,c=Se(a),u=e?_h:n?yh:bt;return!n&&wt(c,"iterate",ms),a.forEach((h,f)=>s.call(i,u(h),u(f),o))}};return ht(t,n?{add:ec("add"),set:ec("set"),delete:ec("delete"),clear:ec("clear")}:{add(s){!e&&!nn(s)&&!Br(s)&&(s=Se(s));const i=Se(this);return Za(i).has.call(i,s)||(i.add(s),Un(i,"add",s,s)),this},set(s,i){!e&&!nn(i)&&!Br(i)&&(i=Se(i));const o=Se(this),{has:a,get:c}=Za(o);let u=a.call(o,s);u||(s=Se(s),u=a.call(o,s));const h=c.call(o,s);return o.set(s,i),u?xr(i,h)&&Un(o,"set",s,i):Un(o,"add",s,i),this},delete(s){const i=Se(this),{has:o,get:a}=Za(i);let c=o.call(i,s);c||(s=Se(s),c=o.call(i,s)),a&&a.call(i,s);const u=i.delete(s);return c&&Un(i,"delete",s,void 0),u},clear(){const s=Se(this),i=s.size!==0,o=s.clear();return i&&Un(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{t[s]=zb(s,n,e)}),t}function Mf(n,e){const t=Gb(n,e);return(r,s,i)=>s==="__v_isReactive"?!n:s==="__v_isReadonly"?n:s==="__v_raw"?r:Reflect.get(ke(t,s)&&s in r?t:r,s,i)}const Wb={get:Mf(!1,!1)},Qb={get:Mf(!1,!0)},Yb={get:Mf(!0,!1)};const Fy=new WeakMap,Uy=new WeakMap,By=new WeakMap,Jb=new WeakMap;function Xb(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Zb(n){return n.__v_skip||!Object.isExtensible(n)?0:Xb(wb(n))}function Zn(n){return Br(n)?n:Lf(n,!1,Hb,Wb,Fy)}function $n(n){return Lf(n,!1,Kb,Qb,Uy)}function jy(n){return Lf(n,!0,qb,Yb,By)}function Lf(n,e,t,r,s){if(!Fe(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const i=s.get(n);if(i)return i;const o=Zb(n);if(o===0)return n;const a=new Proxy(n,o===2?r:t);return s.set(n,a),a}function gs(n){return Br(n)?gs(n.__v_raw):!!(n&&n.__v_isReactive)}function Br(n){return!!(n&&n.__v_isReadonly)}function nn(n){return!!(n&&n.__v_isShallow)}function Ff(n){return n?!!n.__v_raw:!1}function Se(n){const e=n&&n.__v_raw;return e?Se(e):n}function eA(n){return!ke(n,"__v_skip")&&Object.isExtensible(n)&&Ey(n,"__v_skip",!0),n}const bt=n=>Fe(n)?Zn(n):n,yh=n=>Fe(n)?jy(n):n;function et(n){return n?n.__v_isRef===!0:!1}function Rn(n){return $y(n,!1)}function Ho(n){return $y(n,!0)}function $y(n,e){return et(n)?n:new tA(n,e)}class tA{constructor(e,t){this.dep=new Of,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:Se(e),this._value=t?e:bt(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,r=this.__v_isShallow||nn(e)||Br(e);e=r?e:Se(e),xr(e,t)&&(this._rawValue=e,this._value=r?e:bt(e),this.dep.trigger())}}function Be(n){return et(n)?n.value:n}function nA(n){return me(n)?n():Be(n)}const rA={get:(n,e,t)=>e==="__v_raw"?n:Be(Reflect.get(n,e,t)),set:(n,e,t,r)=>{const s=n[e];return et(s)&&!et(t)?(s.value=t,!0):Reflect.set(n,e,t,r)}};function Hy(n){return gs(n)?n:new Proxy(n,rA)}class sA{constructor(e,t,r){this._object=e,this._key=t,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return Lb(Se(this._object),this._key)}}class iA{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function qy(n,e,t){return et(n)?n:me(n)?new iA(n):Fe(n)&&arguments.length>1?oA(n,e,t):Rn(n)}function oA(n,e,t){const r=n[e];return et(r)?r:new sA(n,e,t)}class aA{constructor(e,t,r){this.fn=e,this.setter=t,this._value=void 0,this.dep=new Of(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=jo-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Le!==this)return Cy(this,!0),!0}get value(){const e=this.dep.track();return Dy(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function cA(n,e,t=!1){let r,s;return me(n)?r=n:(r=n.get,s=n.set),new aA(r,s,t)}const tc={},Fc=new WeakMap;let os;function lA(n,e=!1,t=os){if(t){let r=Fc.get(t);r||Fc.set(t,r=[]),r.push(n)}}function uA(n,e,t=Me){const{immediate:r,deep:s,once:i,scheduler:o,augmentJob:a,call:c}=t,u=C=>s?C:nn(C)||s===!1||s===0?Bn(C,1):Bn(C);let h,f,m,g,E=!1,T=!1;if(et(n)?(f=()=>n.value,E=nn(n)):gs(n)?(f=()=>u(n),E=!0):fe(n)?(T=!0,E=n.some(C=>gs(C)||nn(C)),f=()=>n.map(C=>{if(et(C))return C.value;if(gs(C))return u(C);if(me(C))return c?c(C,2):C()})):me(n)?e?f=c?()=>c(n,2):n:f=()=>{if(m){Kr();try{m()}finally{zr()}}const C=os;os=h;try{return c?c(n,3,[g]):n(g)}finally{os=C}}:f=An,e&&s){const C=f,N=s===!0?1/0:s;f=()=>Bn(C(),N)}const x=Ry(),V=()=>{h.stop(),x&&x.active&&kf(x.effects,h)};if(i&&e){const C=e;e=(...N)=>{C(...N),V()}}let D=T?new Array(n.length).fill(tc):tc;const I=C=>{if(!(!(h.flags&1)||!h.dirty&&!C))if(e){const N=h.run();if(s||E||(T?N.some((F,w)=>xr(F,D[w])):xr(N,D))){m&&m();const F=os;os=h;try{const w=[N,D===tc?void 0:T&&D[0]===tc?[]:D,g];c?c(e,3,w):e(...w),D=N}finally{os=F}}}else h.run()};return a&&a(I),h=new Sy(f),h.scheduler=o?()=>o(I,!1):I,g=C=>lA(C,!1,h),m=h.onStop=()=>{const C=Fc.get(h);if(C){if(c)c(C,4);else for(const N of C)N();Fc.delete(h)}},e?r?I(!0):D=h.run():o?o(I.bind(null,!0),!0):h.run(),V.pause=h.pause.bind(h),V.resume=h.resume.bind(h),V.stop=V,V}function Bn(n,e=1/0,t){if(e<=0||!Fe(n)||n.__v_skip||(t=t||new Set,t.has(n)))return n;if(t.add(n),e--,et(n))Bn(n.value,e,t);else if(fe(n))for(let r=0;r<n.length;r++)Bn(n[r],e,t);else if(gy(n)||hi(n))n.forEach(r=>{Bn(r,e,t)});else if(vy(n)){for(const r in n)Bn(n[r],e,t);for(const r of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,r)&&Bn(n[r],e,t)}return n}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ma(n,e,t,r){try{return r?n(...r):n()}catch(s){ji(s,e,t)}}function pn(n,e,t,r){if(me(n)){const s=ma(n,e,t,r);return s&&_y(s)&&s.catch(i=>{ji(i,e,t)}),s}if(fe(n)){const s=[];for(let i=0;i<n.length;i++)s.push(pn(n[i],e,t,r));return s}}function ji(n,e,t,r=!0){const s=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Me;if(e){let a=e.parent;const c=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${t}`;for(;a;){const h=a.ec;if(h){for(let f=0;f<h.length;f++)if(h[f](n,c,u)===!1)return}a=a.parent}if(i){Kr(),ma(i,null,10,[n,c,u]),zr();return}}hA(n,t,s,r,o)}function hA(n,e,t,r=!0,s=!1){if(s)throw n;console.error(n)}const Nt=[];let vn=-1;const pi=[];let yr=null,ei=0;const Ky=Promise.resolve();let Uc=null;function ga(n){const e=Uc||Ky;return n?e.then(this?n.bind(this):n):e}function fA(n){let e=vn+1,t=Nt.length;for(;e<t;){const r=e+t>>>1,s=Nt[r],i=qo(s);i<n||i===n&&s.flags&2?e=r+1:t=r}return e}function Uf(n){if(!(n.flags&1)){const e=qo(n),t=Nt[Nt.length-1];!t||!(n.flags&2)&&e>=qo(t)?Nt.push(n):Nt.splice(fA(e),0,n),n.flags|=1,zy()}}function zy(){Uc||(Uc=Ky.then(Gy))}function vh(n){fe(n)?pi.push(...n):yr&&n.id===-1?yr.splice(ei+1,0,n):n.flags&1||(pi.push(n),n.flags|=1),zy()}function Zp(n,e,t=vn+1){for(;t<Nt.length;t++){const r=Nt[t];if(r&&r.flags&2){if(n&&r.id!==n.uid)continue;Nt.splice(t,1),t--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Bc(n){if(pi.length){const e=[...new Set(pi)].sort((t,r)=>qo(t)-qo(r));if(pi.length=0,yr){yr.push(...e);return}for(yr=e,ei=0;ei<yr.length;ei++){const t=yr[ei];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}yr=null,ei=0}}const qo=n=>n.id==null?n.flags&2?-1:1/0:n.id;function Gy(n){try{for(vn=0;vn<Nt.length;vn++){const e=Nt[vn];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),ma(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;vn<Nt.length;vn++){const e=Nt[vn];e&&(e.flags&=-2)}vn=-1,Nt.length=0,Bc(),Uc=null,(Nt.length||pi.length)&&Gy()}}let it=null,Wy=null;function jc(n){const e=it;return it=n,Wy=n&&n.type.__scopeId||null,e}function Bf(n,e=it,t){if(!e||n._n)return n;const r=(...s)=>{r._d&&hm(-1);const i=jc(e);let o;try{o=n(...s)}finally{jc(i),r._d&&hm(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function BM(n,e){if(it===null)return n;const t=Ml(it),r=n.dirs||(n.dirs=[]);for(let s=0;s<e.length;s++){let[i,o,a,c=Me]=e[s];i&&(me(i)&&(i={mounted:i,updated:i}),i.deep&&Bn(o),r.push({dir:i,instance:t,value:o,oldValue:void 0,arg:a,modifiers:c}))}return n}function En(n,e,t,r){const s=n.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let c=a.dir[r];c&&(Kr(),pn(c,t,8,[n.el,a,n,e]),zr())}}const dA=Symbol("_vte"),Qy=n=>n.__isTeleport,vr=Symbol("_leaveCb"),nc=Symbol("_enterCb");function pA(){const n={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return $f(()=>{n.isMounted=!0}),ya(()=>{n.isUnmounting=!0}),n}const Jt=[Function,Array],Yy={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Jt,onEnter:Jt,onAfterEnter:Jt,onEnterCancelled:Jt,onBeforeLeave:Jt,onLeave:Jt,onAfterLeave:Jt,onLeaveCancelled:Jt,onBeforeAppear:Jt,onAppear:Jt,onAfterAppear:Jt,onAppearCancelled:Jt},Jy=n=>{const e=n.subTree;return e.component?Jy(e.component):e},mA={name:"BaseTransition",props:Yy,setup(n,{slots:e}){const t=Ol(),r=pA();return()=>{const s=e.default&&ev(e.default(),!0);if(!s||!s.length)return;const i=Xy(s),o=Se(n),{mode:a}=o;if(r.isLeaving)return Mu(i);const c=em(i);if(!c)return Mu(i);let u=Eh(c,o,r,t,f=>u=f);c.type!==rt&&Ii(c,u);let h=t.subTree&&em(t.subTree);if(h&&h.type!==rt&&!hn(c,h)&&Jy(t).type!==rt){let f=Eh(h,o,r,t);if(Ii(h,f),a==="out-in"&&c.type!==rt)return r.isLeaving=!0,f.afterLeave=()=>{r.isLeaving=!1,t.job.flags&8||t.update(),delete f.afterLeave,h=void 0},Mu(i);a==="in-out"&&c.type!==rt?f.delayLeave=(m,g,E)=>{const T=Zy(r,h);T[String(h.key)]=h,m[vr]=()=>{g(),m[vr]=void 0,delete u.delayedLeave,h=void 0},u.delayedLeave=()=>{E(),delete u.delayedLeave,h=void 0}}:h=void 0}else h&&(h=void 0);return i}}};function Xy(n){let e=n[0];if(n.length>1){for(const t of n)if(t.type!==rt){e=t;break}}return e}const gA=mA;function Zy(n,e){const{leavingVNodes:t}=n;let r=t.get(e.type);return r||(r=Object.create(null),t.set(e.type,r)),r}function Eh(n,e,t,r,s){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:c,onEnter:u,onAfterEnter:h,onEnterCancelled:f,onBeforeLeave:m,onLeave:g,onAfterLeave:E,onLeaveCancelled:T,onBeforeAppear:x,onAppear:V,onAfterAppear:D,onAppearCancelled:I}=e,C=String(n.key),N=Zy(t,n),F=(v,b)=>{v&&pn(v,r,9,b)},w=(v,b)=>{const k=b[1];F(v,b),fe(v)?v.every(S=>S.length<=1)&&k():v.length<=1&&k()},y={mode:o,persisted:a,beforeEnter(v){let b=c;if(!t.isMounted)if(i)b=x||c;else return;v[vr]&&v[vr](!0);const k=N[C];k&&hn(n,k)&&k.el[vr]&&k.el[vr](),F(b,[v])},enter(v){let b=u,k=h,S=f;if(!t.isMounted)if(i)b=V||u,k=D||h,S=I||f;else return;let A=!1;const ye=v[nc]=Ee=>{A||(A=!0,Ee?F(S,[v]):F(k,[v]),y.delayedLeave&&y.delayedLeave(),v[nc]=void 0)};b?w(b,[v,ye]):ye()},leave(v,b){const k=String(n.key);if(v[nc]&&v[nc](!0),t.isUnmounting)return b();F(m,[v]);let S=!1;const A=v[vr]=ye=>{S||(S=!0,b(),ye?F(T,[v]):F(E,[v]),v[vr]=void 0,N[k]===n&&delete N[k])};N[k]=n,g?w(g,[v,A]):A()},clone(v){const b=Eh(v,e,t,r,s);return s&&s(b),b}};return y}function Mu(n){if(_a(n))return n=Gn(n),n.children=null,n}function em(n){if(!_a(n))return Qy(n.type)&&n.children?Xy(n.children):n;const{shapeFlag:e,children:t}=n;if(t){if(e&16)return t[0];if(e&32&&me(t.default))return t.default()}}function Ii(n,e){n.shapeFlag&6&&n.component?(n.transition=e,Ii(n.component.subTree,e)):n.shapeFlag&128?(n.ssContent.transition=e.clone(n.ssContent),n.ssFallback.transition=e.clone(n.ssFallback)):n.transition=e}function ev(n,e=!1,t){let r=[],s=0;for(let i=0;i<n.length;i++){let o=n[i];const a=t==null?o.key:String(t)+String(o.key!=null?o.key:i);o.type===At?(o.patchFlag&128&&s++,r=r.concat(ev(o.children,e,a))):(e||o.type!==rt)&&r.push(a!=null?Gn(o,{key:a}):o)}if(s>1)for(let i=0;i<r.length;i++)r[i].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function er(n,e){return me(n)?ht({name:n.name},e,{setup:n}):n}function jf(n){n.ids=[n.ids[0]+n.ids[2]+++"-",0,0]}function Ko(n,e,t,r,s=!1){if(fe(n)){n.forEach((E,T)=>Ko(E,e&&(fe(e)?e[T]:e),t,r,s));return}if(Dr(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Ko(n,e,t,r.component.subTree);return}const i=r.shapeFlag&4?Ml(r.component):r.el,o=s?null:i,{i:a,r:c}=n,u=e&&e.r,h=a.refs===Me?a.refs={}:a.refs,f=a.setupState,m=Se(f),g=f===Me?()=>!1:E=>ke(m,E);if(u!=null&&u!==c&&(He(u)?(h[u]=null,g(u)&&(f[u]=null)):et(u)&&(u.value=null)),me(c))ma(c,a,12,[o,h]);else{const E=He(c),T=et(c);if(E||T){const x=()=>{if(n.f){const V=E?g(c)?f[c]:h[c]:c.value;s?fe(V)&&kf(V,i):fe(V)?V.includes(i)||V.push(i):E?(h[c]=[i],g(c)&&(f[c]=h[c])):(c.value=[i],n.k&&(h[n.k]=c.value))}else E?(h[c]=o,g(c)&&(f[c]=o)):T&&(c.value=o,n.k&&(h[n.k]=o))};o?(x.id=-1,pt(x,t)):x()}}}let tm=!1;const Gs=()=>{tm||(console.error("Hydration completed but contains mismatches."),tm=!0)},_A=n=>n.namespaceURI.includes("svg")&&n.tagName!=="foreignObject",yA=n=>n.namespaceURI.includes("MathML"),rc=n=>{if(n.nodeType===1){if(_A(n))return"svg";if(yA(n))return"mathml"}},ci=n=>n.nodeType===8;function vA(n){const{mt:e,p:t,o:{patchProp:r,createText:s,nextSibling:i,parentNode:o,remove:a,insert:c,createComment:u}}=n,h=(I,C)=>{if(!C.hasChildNodes()){t(null,I,C),Bc(),C._vnode=I;return}f(C.firstChild,I,null,null,null),Bc(),C._vnode=I},f=(I,C,N,F,w,y=!1)=>{y=y||!!C.dynamicChildren;const v=ci(I)&&I.data==="[",b=()=>T(I,C,N,F,w,v),{type:k,ref:S,shapeFlag:A,patchFlag:ye}=C;let Ee=I.nodeType;C.el=I,ye===-2&&(y=!1,C.dynamicChildren=null);let se=null;switch(k){case ys:Ee!==3?C.children===""?(c(C.el=s(""),o(I),I),se=I):se=b():(I.data!==C.children&&(Gs(),I.data=C.children),se=i(I));break;case rt:D(I)?(se=i(I),V(C.el=I.content.firstChild,I,N)):Ee!==8||v?se=b():se=i(I);break;case Po:if(v&&(I=i(I),Ee=I.nodeType),Ee===1||Ee===3){se=I;const de=!C.children.length;for(let ne=0;ne<C.staticCount;ne++)de&&(C.children+=se.nodeType===1?se.outerHTML:se.data),ne===C.staticCount-1&&(C.anchor=se),se=i(se);return v?i(se):se}else b();break;case At:v?se=E(I,C,N,F,w,y):se=b();break;default:if(A&1)(Ee!==1||C.type.toLowerCase()!==I.tagName.toLowerCase())&&!D(I)?se=b():se=m(I,C,N,F,w,y);else if(A&6){C.slotScopeIds=w;const de=o(I);if(v?se=x(I):ci(I)&&I.data==="teleport start"?se=x(I,I.data,"teleport end"):se=i(I),e(C,de,null,N,F,rc(de),y),Dr(C)&&!C.type.__asyncResolved){let ne;v?(ne=$e(At),ne.anchor=se?se.previousSibling:de.lastChild):ne=I.nodeType===3?Lv(""):$e("div"),ne.el=I,C.component.subTree=ne}}else A&64?Ee!==8?se=b():se=C.type.hydrate(I,C,N,F,w,y,n,g):A&128&&(se=C.type.hydrate(I,C,N,F,rc(o(I)),w,y,n,f))}return S!=null&&Ko(S,null,F,C),se},m=(I,C,N,F,w,y)=>{y=y||!!C.dynamicChildren;const{type:v,props:b,patchFlag:k,shapeFlag:S,dirs:A,transition:ye}=C,Ee=v==="input"||v==="option";if(Ee||k!==-1){A&&En(C,null,N,"created");let se=!1;if(D(I)){se=bv(null,ye)&&N&&N.vnode.props&&N.vnode.props.appear;const ne=I.content.firstChild;se&&ye.beforeEnter(ne),V(ne,I,N),C.el=I=ne}if(S&16&&!(b&&(b.innerHTML||b.textContent))){let ne=g(I.firstChild,C,I,N,F,w,y);for(;ne;){sc(I,1)||Gs();const Ke=ne;ne=ne.nextSibling,a(Ke)}}else if(S&8){let ne=C.children;ne[0]===`
`&&(I.tagName==="PRE"||I.tagName==="TEXTAREA")&&(ne=ne.slice(1)),I.textContent!==ne&&(sc(I,0)||Gs(),I.textContent=C.children)}if(b){if(Ee||!y||k&48){const ne=I.tagName.includes("-");for(const Ke in b)(Ee&&(Ke.endsWith("value")||Ke==="indeterminate")||da(Ke)&&!fi(Ke)||Ke[0]==="."||ne)&&r(I,Ke,null,b[Ke],void 0,N)}else if(b.onClick)r(I,"onClick",null,b.onClick,void 0,N);else if(k&4&&gs(b.style))for(const ne in b.style)b.style[ne]}let de;(de=b&&b.onVnodeBeforeMount)&&Ft(de,N,C),A&&En(C,null,N,"beforeMount"),((de=b&&b.onVnodeMounted)||A||se)&&kv(()=>{de&&Ft(de,N,C),se&&ye.enter(I),A&&En(C,null,N,"mounted")},F)}return I.nextSibling},g=(I,C,N,F,w,y,v)=>{v=v||!!C.dynamicChildren;const b=C.children,k=b.length;for(let S=0;S<k;S++){const A=v?b[S]:b[S]=Kt(b[S]),ye=A.type===ys;I?(ye&&!v&&S+1<k&&Kt(b[S+1]).type===ys&&(c(s(I.data.slice(A.children.length)),N,i(I)),I.data=A.children),I=f(I,A,F,w,y,v)):ye&&!A.children?c(A.el=s(""),N):(sc(N,1)||Gs(),t(null,A,N,null,F,w,rc(N),y))}return I},E=(I,C,N,F,w,y)=>{const{slotScopeIds:v}=C;v&&(w=w?w.concat(v):v);const b=o(I),k=g(i(I),C,b,N,F,w,y);return k&&ci(k)&&k.data==="]"?i(C.anchor=k):(Gs(),c(C.anchor=u("]"),b,k),k)},T=(I,C,N,F,w,y)=>{if(sc(I.parentElement,1)||Gs(),C.el=null,y){const k=x(I);for(;;){const S=i(I);if(S&&S!==k)a(S);else break}}const v=i(I),b=o(I);return a(I),t(null,C,b,v,N,F,rc(b),w),N&&(N.vnode.el=C.el,Nl(N,C.el)),v},x=(I,C="[",N="]")=>{let F=0;for(;I;)if(I=i(I),I&&ci(I)&&(I.data===C&&F++,I.data===N)){if(F===0)return i(I);F--}return I},V=(I,C,N)=>{const F=C.parentNode;F&&F.replaceChild(I,C);let w=N;for(;w;)w.vnode.el===C&&(w.vnode.el=w.subTree.el=I),w=w.parent},D=I=>I.nodeType===1&&I.tagName==="TEMPLATE";return[h,f]}const nm="data-allow-mismatch",EA={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function sc(n,e){if(e===0||e===1)for(;n&&!n.hasAttribute(nm);)n=n.parentElement;const t=n&&n.getAttribute(nm);if(t==null)return!1;if(t==="")return!0;{const r=t.split(",");return e===0&&r.includes("children")?!0:t.split(",").includes(EA[e])}}Pl().requestIdleCallback;Pl().cancelIdleCallback;function IA(n,e){if(ci(n)&&n.data==="["){let t=1,r=n.nextSibling;for(;r;){if(r.nodeType===1){if(e(r)===!1)break}else if(ci(r))if(r.data==="]"){if(--t===0)break}else r.data==="["&&t++;r=r.nextSibling}}else e(n)}const Dr=n=>!!n.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function Ih(n){me(n)&&(n={loader:n});const{loader:e,loadingComponent:t,errorComponent:r,delay:s=200,hydrate:i,timeout:o,suspensible:a=!0,onError:c}=n;let u=null,h,f=0;const m=()=>(f++,u=null,g()),g=()=>{let E;return u||(E=u=e().catch(T=>{if(T=T instanceof Error?T:new Error(String(T)),c)return new Promise((x,V)=>{c(T,()=>x(m()),()=>V(T),f+1)});throw T}).then(T=>E!==u&&u?u:(T&&(T.__esModule||T[Symbol.toStringTag]==="Module")&&(T=T.default),h=T,T)))};return er({name:"AsyncComponentWrapper",__asyncLoader:g,__asyncHydrate(E,T,x){const V=i?()=>{const D=i(x,I=>IA(E,I));D&&(T.bum||(T.bum=[])).push(D)}:x;h?V():g().then(()=>!T.isUnmounted&&V())},get __asyncResolved(){return h},setup(){const E=st;if(jf(E),h)return()=>Lu(h,E);const T=I=>{u=null,ji(I,E,13,!r)};if(a&&E.suspense||wi)return g().then(I=>()=>Lu(I,E)).catch(I=>(T(I),()=>r?$e(r,{error:I}):null));const x=Rn(!1),V=Rn(),D=Rn(!!s);return s&&setTimeout(()=>{D.value=!1},s),o!=null&&setTimeout(()=>{if(!x.value&&!V.value){const I=new Error(`Async component timed out after ${o}ms.`);T(I),V.value=I}},o),g().then(()=>{x.value=!0,E.parent&&_a(E.parent.vnode)&&E.parent.update()}).catch(I=>{T(I),V.value=I}),()=>{if(x.value&&h)return Lu(h,E);if(V.value&&r)return $e(r,{error:V.value});if(t&&!D.value)return $e(t)}}})}function Lu(n,e){const{ref:t,props:r,children:s,ce:i}=e.vnode,o=$e(n,r,s);return o.ref=t,o.ce=i,delete e.vnode.ce,o}const _a=n=>n.type.__isKeepAlive,TA={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(n,{slots:e}){const t=Ol(),r=t.ctx;if(!r.renderer)return()=>{const D=e.default&&e.default();return D&&D.length===1?D[0]:D};const s=new Map,i=new Set;let o=null;const a=t.suspense,{renderer:{p:c,m:u,um:h,o:{createElement:f}}}=r,m=f("div");r.activate=(D,I,C,N,F)=>{const w=D.component;u(D,I,C,0,a),c(w.vnode,D,I,C,w,a,N,D.slotScopeIds,F),pt(()=>{w.isDeactivated=!1,w.a&&di(w.a);const y=D.props&&D.props.onVnodeMounted;y&&Ft(y,w.parent,D)},a)},r.deactivate=D=>{const I=D.component;Hc(I.m),Hc(I.a),u(D,m,null,1,a),pt(()=>{I.da&&di(I.da);const C=D.props&&D.props.onVnodeUnmounted;C&&Ft(C,I.parent,D),I.isDeactivated=!0},a)};function g(D){Fu(D),h(D,t,a,!0)}function E(D){s.forEach((I,C)=>{const N=Ch(I.type);N&&!D(N)&&T(C)})}function T(D){const I=s.get(D);I&&(!o||!hn(I,o))?g(I):o&&Fu(o),s.delete(D),i.delete(D)}Vr(()=>[n.include,n.exclude],([D,I])=>{D&&E(C=>go(D,C)),I&&E(C=>!go(I,C))},{flush:"post",deep:!0});let x=null;const V=()=>{x!=null&&(qc(t.subTree.type)?pt(()=>{s.set(x,ic(t.subTree))},t.subTree.suspense):s.set(x,ic(t.subTree)))};return $f(V),sv(V),ya(()=>{s.forEach(D=>{const{subTree:I,suspense:C}=t,N=ic(I);if(D.type===N.type&&D.key===N.key){Fu(N);const F=N.component.da;F&&pt(F,C);return}g(D)})}),()=>{if(x=null,!e.default)return o=null;const D=e.default(),I=D[0];if(D.length>1)return o=null,D;if(!Ts(I)||!(I.shapeFlag&4)&&!(I.shapeFlag&128))return o=null,I;let C=ic(I);if(C.type===rt)return o=null,C;const N=C.type,F=Ch(Dr(C)?C.type.__asyncResolved||{}:N),{include:w,exclude:y,max:v}=n;if(w&&(!F||!go(w,F))||y&&F&&go(y,F))return C.shapeFlag&=-257,o=C,I;const b=C.key==null?N:C.key,k=s.get(b);return C.el&&(C=Gn(C),I.shapeFlag&128&&(I.ssContent=C)),x=b,k?(C.el=k.el,C.component=k.component,C.transition&&Ii(C,C.transition),C.shapeFlag|=512,i.delete(b),i.add(b)):(i.add(b),v&&i.size>parseInt(v,10)&&T(i.values().next().value)),C.shapeFlag|=256,o=C,qc(I.type)?I:C}}},wA=TA;function go(n,e){return fe(n)?n.some(t=>go(t,e)):He(n)?n.split(",").includes(e):Tb(n)?(n.lastIndex=0,n.test(e)):!1}function tv(n,e){rv(n,"a",e)}function nv(n,e){rv(n,"da",e)}function rv(n,e,t=st){const r=n.__wdc||(n.__wdc=()=>{let s=t;for(;s;){if(s.isDeactivated)return;s=s.parent}return n()});if(Dl(e,r,t),t){let s=t.parent;for(;s&&s.parent;)_a(s.parent.vnode)&&bA(r,e,t,s),s=s.parent}}function bA(n,e,t,r){const s=Dl(e,n,r,!0);iv(()=>{kf(r[e],s)},t)}function Fu(n){n.shapeFlag&=-257,n.shapeFlag&=-513}function ic(n){return n.shapeFlag&128?n.ssContent:n}function Dl(n,e,t=st,r=!1){if(t){const s=t[n]||(t[n]=[]),i=e.__weh||(e.__weh=(...o)=>{Kr();const a=va(t),c=pn(e,t,n,o);return a(),zr(),c});return r?s.unshift(i):s.push(i),i}}const tr=n=>(e,t=st)=>{(!wi||n==="sp")&&Dl(n,(...r)=>e(...r),t)},AA=tr("bm"),$f=tr("m"),RA=tr("bu"),sv=tr("u"),ya=tr("bum"),iv=tr("um"),SA=tr("sp"),PA=tr("rtg"),CA=tr("rtc");function ov(n,e=st){Dl("ec",n,e)}const av="components";function jM(n,e){return lv(av,n,!0,e)||n}const cv=Symbol.for("v-ndc");function kA(n){return He(n)?lv(av,n,!1)||n:n||cv}function lv(n,e,t=!0,r=!1){const s=it||st;if(s){const i=s.type;{const a=Ch(i,!1);if(a&&(a===e||a===sn(e)||a===Sl(sn(e))))return i}const o=rm(s[n]||i[n],e)||rm(s.appContext[n],e);return!o&&r?i:o}}function rm(n,e){return n&&(n[e]||n[sn(e)]||n[Sl(sn(e))])}function $M(n,e,t,r){let s;const i=t,o=fe(n);if(o||He(n)){const a=o&&gs(n);let c=!1;a&&(c=!nn(n),n=xl(n)),s=new Array(n.length);for(let u=0,h=n.length;u<h;u++)s[u]=e(c?bt(n[u]):n[u],u,void 0,i)}else if(typeof n=="number"){s=new Array(n);for(let a=0;a<n;a++)s[a]=e(a+1,a,void 0,i)}else if(Fe(n))if(n[Symbol.iterator])s=Array.from(n,(a,c)=>e(a,c,void 0,i));else{const a=Object.keys(n);s=new Array(a.length);for(let c=0,u=a.length;c<u;c++){const h=a[c];s[c]=e(n[h],h,c,i)}}else s=[];return s}function HM(n,e,t={},r,s){if(it.ce||it.parent&&Dr(it.parent)&&it.parent.ce)return Zt(),jn(At,null,[$e("slot",t,r)],64);let i=n[e];i&&i._c&&(i._d=!1),Zt();const o=i&&uv(i(t)),a=t.key||o&&o.key,c=jn(At,{key:(a&&!Xn(a)?a:`_${e}`)+""},o||[],o&&n._===1?64:-2);return c.scopeId&&(c.slotScopeIds=[c.scopeId+"-s"]),i&&i._c&&(i._d=!0),c}function uv(n){return n.some(e=>Ts(e)?!(e.type===rt||e.type===At&&!uv(e.children)):!0)?n:null}const Th=n=>n?Uv(n)?Ml(n):Th(n.parent):null,So=ht(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>Th(n.parent),$root:n=>Th(n.root),$host:n=>n.ce,$emit:n=>n.emit,$options:n=>fv(n),$forceUpdate:n=>n.f||(n.f=()=>{Uf(n.update)}),$nextTick:n=>n.n||(n.n=ga.bind(n.proxy)),$watch:n=>JA.bind(n)}),Uu=(n,e)=>n!==Me&&!n.__isScriptSetup&&ke(n,e),xA={get({_:n},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:r,data:s,props:i,accessCache:o,type:a,appContext:c}=n;let u;if(e[0]!=="$"){const g=o[e];if(g!==void 0)switch(g){case 1:return r[e];case 2:return s[e];case 4:return t[e];case 3:return i[e]}else{if(Uu(r,e))return o[e]=1,r[e];if(s!==Me&&ke(s,e))return o[e]=2,s[e];if((u=n.propsOptions[0])&&ke(u,e))return o[e]=3,i[e];if(t!==Me&&ke(t,e))return o[e]=4,t[e];wh&&(o[e]=0)}}const h=So[e];let f,m;if(h)return e==="$attrs"&&wt(n.attrs,"get",""),h(n);if((f=a.__cssModules)&&(f=f[e]))return f;if(t!==Me&&ke(t,e))return o[e]=4,t[e];if(m=c.config.globalProperties,ke(m,e))return m[e]},set({_:n},e,t){const{data:r,setupState:s,ctx:i}=n;return Uu(s,e)?(s[e]=t,!0):r!==Me&&ke(r,e)?(r[e]=t,!0):ke(n.props,e)||e[0]==="$"&&e.slice(1)in n?!1:(i[e]=t,!0)},has({_:{data:n,setupState:e,accessCache:t,ctx:r,appContext:s,propsOptions:i}},o){let a;return!!t[o]||n!==Me&&ke(n,o)||Uu(e,o)||(a=i[0])&&ke(a,o)||ke(r,o)||ke(So,o)||ke(s.config.globalProperties,o)},defineProperty(n,e,t){return t.get!=null?n._.accessCache[e]=0:ke(t,"value")&&this.set(n,e,t.value,null),Reflect.defineProperty(n,e,t)}};function sm(n){return fe(n)?n.reduce((e,t)=>(e[t]=null,e),{}):n}let wh=!0;function DA(n){const e=fv(n),t=n.proxy,r=n.ctx;wh=!1,e.beforeCreate&&im(e.beforeCreate,n,"bc");const{data:s,computed:i,methods:o,watch:a,provide:c,inject:u,created:h,beforeMount:f,mounted:m,beforeUpdate:g,updated:E,activated:T,deactivated:x,beforeDestroy:V,beforeUnmount:D,destroyed:I,unmounted:C,render:N,renderTracked:F,renderTriggered:w,errorCaptured:y,serverPrefetch:v,expose:b,inheritAttrs:k,components:S,directives:A,filters:ye}=e;if(u&&VA(u,r,null),o)for(const de in o){const ne=o[de];me(ne)&&(r[de]=ne.bind(t))}if(s){const de=s.call(t,t);Fe(de)&&(n.data=Zn(de))}if(wh=!0,i)for(const de in i){const ne=i[de],Ke=me(ne)?ne.bind(t,t):me(ne.get)?ne.get.bind(t,t):An,an=!me(ne)&&me(ne.set)?ne.set.bind(t):An,Qt=zt({get:Ke,set:an});Object.defineProperty(r,de,{enumerable:!0,configurable:!0,get:()=>Qt.value,set:ze=>Qt.value=ze})}if(a)for(const de in a)hv(a[de],r,t,de);if(c){const de=me(c)?c.call(t):c;Reflect.ownKeys(de).forEach(ne=>{Sn(ne,de[ne])})}h&&im(h,n,"c");function se(de,ne){fe(ne)?ne.forEach(Ke=>de(Ke.bind(t))):ne&&de(ne.bind(t))}if(se(AA,f),se($f,m),se(RA,g),se(sv,E),se(tv,T),se(nv,x),se(ov,y),se(CA,F),se(PA,w),se(ya,D),se(iv,C),se(SA,v),fe(b))if(b.length){const de=n.exposed||(n.exposed={});b.forEach(ne=>{Object.defineProperty(de,ne,{get:()=>t[ne],set:Ke=>t[ne]=Ke})})}else n.exposed||(n.exposed={});N&&n.render===An&&(n.render=N),k!=null&&(n.inheritAttrs=k),S&&(n.components=S),A&&(n.directives=A),v&&jf(n)}function VA(n,e,t=An){fe(n)&&(n=bh(n));for(const r in n){const s=n[r];let i;Fe(s)?"default"in s?i=Pt(s.from||r,s.default,!0):i=Pt(s.from||r):i=Pt(s),et(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function im(n,e,t){pn(fe(n)?n.map(r=>r.bind(e.proxy)):n.bind(e.proxy),e,t)}function hv(n,e,t,r){let s=r.includes(".")?Sv(t,r):()=>t[r];if(He(n)){const i=e[n];me(i)&&Vr(s,i)}else if(me(n))Vr(s,n.bind(t));else if(Fe(n))if(fe(n))n.forEach(i=>hv(i,e,t,r));else{const i=me(n.handler)?n.handler.bind(t):e[n.handler];me(i)&&Vr(s,i,n)}}function fv(n){const e=n.type,{mixins:t,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=n.appContext,a=i.get(e);let c;return a?c=a:!s.length&&!t&&!r?c=e:(c={},s.length&&s.forEach(u=>$c(c,u,o,!0)),$c(c,e,o)),Fe(e)&&i.set(e,c),c}function $c(n,e,t,r=!1){const{mixins:s,extends:i}=e;i&&$c(n,i,t,!0),s&&s.forEach(o=>$c(n,o,t,!0));for(const o in e)if(!(r&&o==="expose")){const a=NA[o]||t&&t[o];n[o]=a?a(n[o],e[o]):e[o]}return n}const NA={data:om,props:am,emits:am,methods:_o,computed:_o,beforeCreate:Dt,created:Dt,beforeMount:Dt,mounted:Dt,beforeUpdate:Dt,updated:Dt,beforeDestroy:Dt,beforeUnmount:Dt,destroyed:Dt,unmounted:Dt,activated:Dt,deactivated:Dt,errorCaptured:Dt,serverPrefetch:Dt,components:_o,directives:_o,watch:MA,provide:om,inject:OA};function om(n,e){return e?n?function(){return ht(me(n)?n.call(this,this):n,me(e)?e.call(this,this):e)}:e:n}function OA(n,e){return _o(bh(n),bh(e))}function bh(n){if(fe(n)){const e={};for(let t=0;t<n.length;t++)e[n[t]]=n[t];return e}return n}function Dt(n,e){return n?[...new Set([].concat(n,e))]:e}function _o(n,e){return n?ht(Object.create(null),n,e):e}function am(n,e){return n?fe(n)&&fe(e)?[...new Set([...n,...e])]:ht(Object.create(null),sm(n),sm(e??{})):e}function MA(n,e){if(!n)return e;if(!e)return n;const t=ht(Object.create(null),n);for(const r in e)t[r]=Dt(n[r],e[r]);return t}function dv(){return{app:null,config:{isNativeTag:Eb,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let LA=0;function FA(n,e){return function(r,s=null){me(r)||(r=ht({},r)),s!=null&&!Fe(s)&&(s=null);const i=dv(),o=new WeakSet,a=[];let c=!1;const u=i.app={_uid:LA++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:v0,get config(){return i.config},set config(h){},use(h,...f){return o.has(h)||(h&&me(h.install)?(o.add(h),h.install(u,...f)):me(h)&&(o.add(h),h(u,...f))),u},mixin(h){return i.mixins.includes(h)||i.mixins.push(h),u},component(h,f){return f?(i.components[h]=f,u):i.components[h]},directive(h,f){return f?(i.directives[h]=f,u):i.directives[h]},mount(h,f,m){if(!c){const g=u._ceVNode||$e(r,s);return g.appContext=i,m===!0?m="svg":m===!1&&(m=void 0),f&&e?e(g,h):n(g,h,m),c=!0,u._container=h,h.__vue_app__=u,Ml(g.component)}},onUnmount(h){a.push(h)},unmount(){c&&(pn(a,u._instance,16),n(null,u._container),delete u._container.__vue_app__)},provide(h,f){return i.provides[h]=f,u},runWithContext(h){const f=_s;_s=u;try{return h()}finally{_s=f}}};return u}}let _s=null;function Sn(n,e){if(st){let t=st.provides;const r=st.parent&&st.parent.provides;r===t&&(t=st.provides=Object.create(r)),t[n]=e}}function Pt(n,e,t=!1){const r=st||it;if(r||_s){const s=_s?_s._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&n in s)return s[n];if(arguments.length>1)return t&&me(e)?e.call(r&&r.proxy):e}}function Hf(){return!!(st||it||_s)}const pv={},mv=()=>Object.create(pv),gv=n=>Object.getPrototypeOf(n)===pv;function UA(n,e,t,r=!1){const s={},i=mv();n.propsDefaults=Object.create(null),_v(n,e,s,i);for(const o in n.propsOptions[0])o in s||(s[o]=void 0);t?n.props=r?s:$n(s):n.type.props?n.props=s:n.props=i,n.attrs=i}function BA(n,e,t,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=n,a=Se(s),[c]=n.propsOptions;let u=!1;if((r||o>0)&&!(o&16)){if(o&8){const h=n.vnode.dynamicProps;for(let f=0;f<h.length;f++){let m=h[f];if(Vl(n.emitsOptions,m))continue;const g=e[m];if(c)if(ke(i,m))g!==i[m]&&(i[m]=g,u=!0);else{const E=sn(m);s[E]=Ah(c,a,E,g,n,!1)}else g!==i[m]&&(i[m]=g,u=!0)}}}else{_v(n,e,s,i)&&(u=!0);let h;for(const f in a)(!e||!ke(e,f)&&((h=Os(f))===f||!ke(e,h)))&&(c?t&&(t[f]!==void 0||t[h]!==void 0)&&(s[f]=Ah(c,a,f,void 0,n,!0)):delete s[f]);if(i!==a)for(const f in i)(!e||!ke(e,f))&&(delete i[f],u=!0)}u&&Un(n.attrs,"set","")}function _v(n,e,t,r){const[s,i]=n.propsOptions;let o=!1,a;if(e)for(let c in e){if(fi(c))continue;const u=e[c];let h;s&&ke(s,h=sn(c))?!i||!i.includes(h)?t[h]=u:(a||(a={}))[h]=u:Vl(n.emitsOptions,c)||(!(c in r)||u!==r[c])&&(r[c]=u,o=!0)}if(i){const c=Se(t),u=a||Me;for(let h=0;h<i.length;h++){const f=i[h];t[f]=Ah(s,c,f,u[f],n,!ke(u,f))}}return o}function Ah(n,e,t,r,s,i){const o=n[t];if(o!=null){const a=ke(o,"default");if(a&&r===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&me(c)){const{propsDefaults:u}=s;if(t in u)r=u[t];else{const h=va(s);r=u[t]=c.call(null,e),h()}}else r=c;s.ce&&s.ce._setProp(t,r)}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===Os(t))&&(r=!0))}return r}const jA=new WeakMap;function yv(n,e,t=!1){const r=t?jA:e.propsCache,s=r.get(n);if(s)return s;const i=n.props,o={},a=[];let c=!1;if(!me(n)){const h=f=>{c=!0;const[m,g]=yv(f,e,!0);ht(o,m),g&&a.push(...g)};!t&&e.mixins.length&&e.mixins.forEach(h),n.extends&&h(n.extends),n.mixins&&n.mixins.forEach(h)}if(!i&&!c)return Fe(n)&&r.set(n,ui),ui;if(fe(i))for(let h=0;h<i.length;h++){const f=sn(i[h]);cm(f)&&(o[f]=Me)}else if(i)for(const h in i){const f=sn(h);if(cm(f)){const m=i[h],g=o[f]=fe(m)||me(m)?{type:m}:ht({},m),E=g.type;let T=!1,x=!0;if(fe(E))for(let V=0;V<E.length;++V){const D=E[V],I=me(D)&&D.name;if(I==="Boolean"){T=!0;break}else I==="String"&&(x=!1)}else T=me(E)&&E.name==="Boolean";g[0]=T,g[1]=x,(T||ke(g,"default"))&&a.push(f)}}const u=[o,a];return Fe(n)&&r.set(n,u),u}function cm(n){return n[0]!=="$"&&!fi(n)}const vv=n=>n[0]==="_"||n==="$stable",qf=n=>fe(n)?n.map(Kt):[Kt(n)],$A=(n,e,t)=>{if(e._n)return e;const r=Bf((...s)=>qf(e(...s)),t);return r._c=!1,r},Ev=(n,e,t)=>{const r=n._ctx;for(const s in n){if(vv(s))continue;const i=n[s];if(me(i))e[s]=$A(s,i,r);else if(i!=null){const o=qf(i);e[s]=()=>o}}},Iv=(n,e)=>{const t=qf(e);n.slots.default=()=>t},Tv=(n,e,t)=>{for(const r in e)(t||r!=="_")&&(n[r]=e[r])},HA=(n,e,t)=>{const r=n.slots=mv();if(n.vnode.shapeFlag&32){const s=e._;s?(Tv(r,e,t),t&&Ey(r,"_",s,!0)):Ev(e,r)}else e&&Iv(n,e)},qA=(n,e,t)=>{const{vnode:r,slots:s}=n;let i=!0,o=Me;if(r.shapeFlag&32){const a=e._;a?t&&a===1?i=!1:Tv(s,e,t):(i=!e.$stable,Ev(e,s)),o=e}else e&&(Iv(n,e),o={default:1});if(i)for(const a in s)!vv(a)&&o[a]==null&&delete s[a]},pt=kv;function KA(n){return wv(n)}function zA(n){return wv(n,vA)}function wv(n,e){const t=Pl();t.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:a,createComment:c,setText:u,setElementText:h,parentNode:f,nextSibling:m,setScopeId:g=An,insertStaticContent:E}=n,T=(R,P,L,H=null,j=null,q=null,J=void 0,W=null,G=!!P.dynamicChildren)=>{if(R===P)return;R&&!hn(R,P)&&(H=$(R),ze(R,j,q,!0),R=null),P.patchFlag===-2&&(G=!1,P.dynamicChildren=null);const{type:K,ref:ue,shapeFlag:ee}=P;switch(K){case ys:x(R,P,L,H);break;case rt:V(R,P,L,H);break;case Po:R==null&&D(P,L,H,J);break;case At:S(R,P,L,H,j,q,J,W,G);break;default:ee&1?N(R,P,L,H,j,q,J,W,G):ee&6?A(R,P,L,H,j,q,J,W,G):(ee&64||ee&128)&&K.process(R,P,L,H,j,q,J,W,G,ie)}ue!=null&&j&&Ko(ue,R&&R.ref,q,P||R,!P)},x=(R,P,L,H)=>{if(R==null)r(P.el=a(P.children),L,H);else{const j=P.el=R.el;P.children!==R.children&&u(j,P.children)}},V=(R,P,L,H)=>{R==null?r(P.el=c(P.children||""),L,H):P.el=R.el},D=(R,P,L,H)=>{[R.el,R.anchor]=E(R.children,P,L,H,R.el,R.anchor)},I=({el:R,anchor:P},L,H)=>{let j;for(;R&&R!==P;)j=m(R),r(R,L,H),R=j;r(P,L,H)},C=({el:R,anchor:P})=>{let L;for(;R&&R!==P;)L=m(R),s(R),R=L;s(P)},N=(R,P,L,H,j,q,J,W,G)=>{P.type==="svg"?J="svg":P.type==="math"&&(J="mathml"),R==null?F(P,L,H,j,q,J,W,G):v(R,P,j,q,J,W,G)},F=(R,P,L,H,j,q,J,W)=>{let G,K;const{props:ue,shapeFlag:ee,transition:ae,dirs:oe}=R;if(G=R.el=o(R.type,q,ue&&ue.is,ue),ee&8?h(G,R.children):ee&16&&y(R.children,G,null,H,j,Bu(R,q),J,W),oe&&En(R,null,H,"created"),w(G,R,R.scopeId,J,H),ue){for(const Pe in ue)Pe!=="value"&&!fi(Pe)&&i(G,Pe,null,ue[Pe],q,H);"value"in ue&&i(G,"value",null,ue.value,q),(K=ue.onVnodeBeforeMount)&&Ft(K,H,R)}oe&&En(R,null,H,"beforeMount");const he=bv(j,ae);he&&ae.beforeEnter(G),r(G,P,L),((K=ue&&ue.onVnodeMounted)||he||oe)&&pt(()=>{K&&Ft(K,H,R),he&&ae.enter(G),oe&&En(R,null,H,"mounted")},j)},w=(R,P,L,H,j)=>{if(L&&g(R,L),H)for(let q=0;q<H.length;q++)g(R,H[q]);if(j){let q=j.subTree;if(P===q||qc(q.type)&&(q.ssContent===P||q.ssFallback===P)){const J=j.vnode;w(R,J,J.scopeId,J.slotScopeIds,j.parent)}}},y=(R,P,L,H,j,q,J,W,G=0)=>{for(let K=G;K<R.length;K++){const ue=R[K]=W?Er(R[K]):Kt(R[K]);T(null,ue,P,L,H,j,q,J,W)}},v=(R,P,L,H,j,q,J)=>{const W=P.el=R.el;let{patchFlag:G,dynamicChildren:K,dirs:ue}=P;G|=R.patchFlag&16;const ee=R.props||Me,ae=P.props||Me;let oe;if(L&&ts(L,!1),(oe=ae.onVnodeBeforeUpdate)&&Ft(oe,L,P,R),ue&&En(P,R,L,"beforeUpdate"),L&&ts(L,!0),(ee.innerHTML&&ae.innerHTML==null||ee.textContent&&ae.textContent==null)&&h(W,""),K?b(R.dynamicChildren,K,W,L,H,Bu(P,j),q):J||ne(R,P,W,null,L,H,Bu(P,j),q,!1),G>0){if(G&16)k(W,ee,ae,L,j);else if(G&2&&ee.class!==ae.class&&i(W,"class",null,ae.class,j),G&4&&i(W,"style",ee.style,ae.style,j),G&8){const he=P.dynamicProps;for(let Pe=0;Pe<he.length;Pe++){const Ae=he[Pe],_t=ee[Ae],ct=ae[Ae];(ct!==_t||Ae==="value")&&i(W,Ae,_t,ct,j,L)}}G&1&&R.children!==P.children&&h(W,P.children)}else!J&&K==null&&k(W,ee,ae,L,j);((oe=ae.onVnodeUpdated)||ue)&&pt(()=>{oe&&Ft(oe,L,P,R),ue&&En(P,R,L,"updated")},H)},b=(R,P,L,H,j,q,J)=>{for(let W=0;W<P.length;W++){const G=R[W],K=P[W],ue=G.el&&(G.type===At||!hn(G,K)||G.shapeFlag&70)?f(G.el):L;T(G,K,ue,null,H,j,q,J,!0)}},k=(R,P,L,H,j)=>{if(P!==L){if(P!==Me)for(const q in P)!fi(q)&&!(q in L)&&i(R,q,P[q],null,j,H);for(const q in L){if(fi(q))continue;const J=L[q],W=P[q];J!==W&&q!=="value"&&i(R,q,W,J,j,H)}"value"in L&&i(R,"value",P.value,L.value,j)}},S=(R,P,L,H,j,q,J,W,G)=>{const K=P.el=R?R.el:a(""),ue=P.anchor=R?R.anchor:a("");let{patchFlag:ee,dynamicChildren:ae,slotScopeIds:oe}=P;oe&&(W=W?W.concat(oe):oe),R==null?(r(K,L,H),r(ue,L,H),y(P.children||[],L,ue,j,q,J,W,G)):ee>0&&ee&64&&ae&&R.dynamicChildren?(b(R.dynamicChildren,ae,L,j,q,J,W),(P.key!=null||j&&P===j.subTree)&&Av(R,P,!0)):ne(R,P,L,ue,j,q,J,W,G)},A=(R,P,L,H,j,q,J,W,G)=>{P.slotScopeIds=W,R==null?P.shapeFlag&512?j.ctx.activate(P,L,H,J,G):ye(P,L,H,j,q,J,G):Ee(R,P,G)},ye=(R,P,L,H,j,q,J)=>{const W=R.component=d0(R,H,j);if(_a(R)&&(W.ctx.renderer=ie),p0(W,!1,J),W.asyncDep){if(j&&j.registerDep(W,se,J),!R.el){const G=W.subTree=$e(rt);V(null,G,P,L)}}else se(W,R,P,L,j,q,J)},Ee=(R,P,L)=>{const H=P.component=R.component;if(r0(R,P,L))if(H.asyncDep&&!H.asyncResolved){de(H,P,L);return}else H.next=P,H.update();else P.el=R.el,H.vnode=P},se=(R,P,L,H,j,q,J)=>{const W=()=>{if(R.isMounted){let{next:ee,bu:ae,u:oe,parent:he,vnode:Pe}=R;{const yt=Rv(R);if(yt){ee&&(ee.el=Pe.el,de(R,ee,J)),yt.asyncDep.then(()=>{R.isUnmounted||W()});return}}let Ae=ee,_t;ts(R,!1),ee?(ee.el=Pe.el,de(R,ee,J)):ee=Pe,ae&&di(ae),(_t=ee.props&&ee.props.onVnodeBeforeUpdate)&&Ft(_t,he,ee,Pe),ts(R,!0);const ct=ju(R),ft=R.subTree;R.subTree=ct,T(ft,ct,f(ft.el),$(ft),R,j,q),ee.el=ct.el,Ae===null&&Nl(R,ct.el),oe&&pt(oe,j),(_t=ee.props&&ee.props.onVnodeUpdated)&&pt(()=>Ft(_t,he,ee,Pe),j)}else{let ee;const{el:ae,props:oe}=P,{bm:he,m:Pe,parent:Ae,root:_t,type:ct}=R,ft=Dr(P);if(ts(R,!1),he&&di(he),!ft&&(ee=oe&&oe.onVnodeBeforeMount)&&Ft(ee,Ae,P),ts(R,!0),ae&&Ne){const yt=()=>{R.subTree=ju(R),Ne(ae,R.subTree,R,j,null)};ft&&ct.__asyncHydrate?ct.__asyncHydrate(ae,R,yt):yt()}else{_t.ce&&_t.ce._injectChildStyle(ct);const yt=R.subTree=ju(R);T(null,yt,L,H,R,j,q),P.el=yt.el}if(Pe&&pt(Pe,j),!ft&&(ee=oe&&oe.onVnodeMounted)){const yt=P;pt(()=>Ft(ee,Ae,yt),j)}(P.shapeFlag&256||Ae&&Dr(Ae.vnode)&&Ae.vnode.shapeFlag&256)&&R.a&&pt(R.a,j),R.isMounted=!0,P=L=H=null}};R.scope.on();const G=R.effect=new Sy(W);R.scope.off();const K=R.update=G.run.bind(G),ue=R.job=G.runIfDirty.bind(G);ue.i=R,ue.id=R.uid,G.scheduler=()=>Uf(ue),ts(R,!0),K()},de=(R,P,L)=>{P.component=R;const H=R.vnode.props;R.vnode=P,R.next=null,BA(R,P.props,H,L),qA(R,P.children,L),Kr(),Zp(R),zr()},ne=(R,P,L,H,j,q,J,W,G=!1)=>{const K=R&&R.children,ue=R?R.shapeFlag:0,ee=P.children,{patchFlag:ae,shapeFlag:oe}=P;if(ae>0){if(ae&128){an(K,ee,L,H,j,q,J,W,G);return}else if(ae&256){Ke(K,ee,L,H,j,q,J,W,G);return}}oe&8?(ue&16&&Lt(K,j,q),ee!==K&&h(L,ee)):ue&16?oe&16?an(K,ee,L,H,j,q,J,W,G):Lt(K,j,q,!0):(ue&8&&h(L,""),oe&16&&y(ee,L,H,j,q,J,W,G))},Ke=(R,P,L,H,j,q,J,W,G)=>{R=R||ui,P=P||ui;const K=R.length,ue=P.length,ee=Math.min(K,ue);let ae;for(ae=0;ae<ee;ae++){const oe=P[ae]=G?Er(P[ae]):Kt(P[ae]);T(R[ae],oe,L,null,j,q,J,W,G)}K>ue?Lt(R,j,q,!0,!1,ee):y(P,L,H,j,q,J,W,G,ee)},an=(R,P,L,H,j,q,J,W,G)=>{let K=0;const ue=P.length;let ee=R.length-1,ae=ue-1;for(;K<=ee&&K<=ae;){const oe=R[K],he=P[K]=G?Er(P[K]):Kt(P[K]);if(hn(oe,he))T(oe,he,L,null,j,q,J,W,G);else break;K++}for(;K<=ee&&K<=ae;){const oe=R[ee],he=P[ae]=G?Er(P[ae]):Kt(P[ae]);if(hn(oe,he))T(oe,he,L,null,j,q,J,W,G);else break;ee--,ae--}if(K>ee){if(K<=ae){const oe=ae+1,he=oe<ue?P[oe].el:H;for(;K<=ae;)T(null,P[K]=G?Er(P[K]):Kt(P[K]),L,he,j,q,J,W,G),K++}}else if(K>ae)for(;K<=ee;)ze(R[K],j,q,!0),K++;else{const oe=K,he=K,Pe=new Map;for(K=he;K<=ae;K++){const kt=P[K]=G?Er(P[K]):Kt(P[K]);kt.key!=null&&Pe.set(kt.key,K)}let Ae,_t=0;const ct=ae-he+1;let ft=!1,yt=0;const cr=new Array(ct);for(K=0;K<ct;K++)cr[K]=0;for(K=oe;K<=ee;K++){const kt=R[K];if(_t>=ct){ze(kt,j,q,!0);continue}let Yt;if(kt.key!=null)Yt=Pe.get(kt.key);else for(Ae=he;Ae<=ae;Ae++)if(cr[Ae-he]===0&&hn(kt,P[Ae])){Yt=Ae;break}Yt===void 0?ze(kt,j,q,!0):(cr[Yt-he]=K+1,Yt>=yt?yt=Yt:ft=!0,T(kt,P[Yt],L,null,j,q,J,W,G),_t++)}const Bs=ft?GA(cr):ui;for(Ae=Bs.length-1,K=ct-1;K>=0;K--){const kt=he+K,Yt=P[kt],js=kt+1<ue?P[kt+1].el:H;cr[K]===0?T(null,Yt,L,js,j,q,J,W,G):ft&&(Ae<0||K!==Bs[Ae]?Qt(Yt,L,js,2):Ae--)}}},Qt=(R,P,L,H,j=null)=>{const{el:q,type:J,transition:W,children:G,shapeFlag:K}=R;if(K&6){Qt(R.component.subTree,P,L,H);return}if(K&128){R.suspense.move(P,L,H);return}if(K&64){J.move(R,P,L,ie);return}if(J===At){r(q,P,L);for(let ee=0;ee<G.length;ee++)Qt(G[ee],P,L,H);r(R.anchor,P,L);return}if(J===Po){I(R,P,L);return}if(H!==2&&K&1&&W)if(H===0)W.beforeEnter(q),r(q,P,L),pt(()=>W.enter(q),j);else{const{leave:ee,delayLeave:ae,afterLeave:oe}=W,he=()=>r(q,P,L),Pe=()=>{ee(q,()=>{he(),oe&&oe()})};ae?ae(q,he,Pe):Pe()}else r(q,P,L)},ze=(R,P,L,H=!1,j=!1)=>{const{type:q,props:J,ref:W,children:G,dynamicChildren:K,shapeFlag:ue,patchFlag:ee,dirs:ae,cacheIndex:oe}=R;if(ee===-2&&(j=!1),W!=null&&Ko(W,null,L,R,!0),oe!=null&&(P.renderCache[oe]=void 0),ue&256){P.ctx.deactivate(R);return}const he=ue&1&&ae,Pe=!Dr(R);let Ae;if(Pe&&(Ae=J&&J.onVnodeBeforeUnmount)&&Ft(Ae,P,R),ue&6)yn(R.component,L,H);else{if(ue&128){R.suspense.unmount(L,H);return}he&&En(R,null,P,"beforeUnmount"),ue&64?R.type.remove(R,P,L,ie,H):K&&!K.hasOnce&&(q!==At||ee>0&&ee&64)?Lt(K,P,L,!1,!0):(q===At&&ee&384||!j&&ue&16)&&Lt(G,P,L),H&&Ge(R)}(Pe&&(Ae=J&&J.onVnodeUnmounted)||he)&&pt(()=>{Ae&&Ft(Ae,P,R),he&&En(R,null,P,"unmounted")},L)},Ge=R=>{const{type:P,el:L,anchor:H,transition:j}=R;if(P===At){ar(L,H);return}if(P===Po){C(R);return}const q=()=>{s(L),j&&!j.persisted&&j.afterLeave&&j.afterLeave()};if(R.shapeFlag&1&&j&&!j.persisted){const{leave:J,delayLeave:W}=j,G=()=>J(L,q);W?W(R.el,q,G):G()}else q()},ar=(R,P)=>{let L;for(;R!==P;)L=m(R),s(R),R=L;s(P)},yn=(R,P,L)=>{const{bum:H,scope:j,job:q,subTree:J,um:W,m:G,a:K}=R;Hc(G),Hc(K),H&&di(H),j.stop(),q&&(q.flags|=8,ze(J,R,P,L)),W&&pt(W,P),pt(()=>{R.isUnmounted=!0},P),P&&P.pendingBranch&&!P.isUnmounted&&R.asyncDep&&!R.asyncResolved&&R.suspenseId===P.pendingId&&(P.deps--,P.deps===0&&P.resolve())},Lt=(R,P,L,H=!1,j=!1,q=0)=>{for(let J=q;J<R.length;J++)ze(R[J],P,L,H,j)},$=R=>{if(R.shapeFlag&6)return $(R.component.subTree);if(R.shapeFlag&128)return R.suspense.next();const P=m(R.anchor||R.el),L=P&&P[dA];return L?m(L):P};let te=!1;const X=(R,P,L)=>{R==null?P._vnode&&ze(P._vnode,null,null,!0):T(P._vnode||null,R,P,null,null,null,L),P._vnode=R,te||(te=!0,Zp(),Bc(),te=!1)},ie={p:T,um:ze,m:Qt,r:Ge,mt:ye,mc:y,pc:ne,pbc:b,n:$,o:n};let we,Ne;return e&&([we,Ne]=e(ie)),{render:X,hydrate:we,createApp:FA(X,we)}}function Bu({type:n,props:e},t){return t==="svg"&&n==="foreignObject"||t==="mathml"&&n==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function ts({effect:n,job:e},t){t?(n.flags|=32,e.flags|=4):(n.flags&=-33,e.flags&=-5)}function bv(n,e){return(!n||n&&!n.pendingBranch)&&e&&!e.persisted}function Av(n,e,t=!1){const r=n.children,s=e.children;if(fe(r)&&fe(s))for(let i=0;i<r.length;i++){const o=r[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=Er(s[i]),a.el=o.el),!t&&a.patchFlag!==-2&&Av(o,a)),a.type===ys&&(a.el=o.el)}}function GA(n){const e=n.slice(),t=[0];let r,s,i,o,a;const c=n.length;for(r=0;r<c;r++){const u=n[r];if(u!==0){if(s=t[t.length-1],n[s]<u){e[r]=s,t.push(r);continue}for(i=0,o=t.length-1;i<o;)a=i+o>>1,n[t[a]]<u?i=a+1:o=a;u<n[t[i]]&&(i>0&&(e[r]=t[i-1]),t[i]=r)}}for(i=t.length,o=t[i-1];i-- >0;)t[i]=o,o=e[o];return t}function Rv(n){const e=n.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Rv(e)}function Hc(n){if(n)for(let e=0;e<n.length;e++)n[e].flags|=8}const WA=Symbol.for("v-scx"),QA=()=>Pt(WA);function YA(n,e){return Kf(n,null,e)}function Vr(n,e,t){return Kf(n,e,t)}function Kf(n,e,t=Me){const{immediate:r,deep:s,flush:i,once:o}=t,a=ht({},t),c=e&&r||!e&&i!=="post";let u;if(wi){if(i==="sync"){const g=QA();u=g.__watcherHandles||(g.__watcherHandles=[])}else if(!c){const g=()=>{};return g.stop=An,g.resume=An,g.pause=An,g}}const h=st;a.call=(g,E,T)=>pn(g,h,E,T);let f=!1;i==="post"?a.scheduler=g=>{pt(g,h&&h.suspense)}:i!=="sync"&&(f=!0,a.scheduler=(g,E)=>{E?g():Uf(g)}),a.augmentJob=g=>{e&&(g.flags|=4),f&&(g.flags|=2,h&&(g.id=h.uid,g.i=h))};const m=uA(n,e,a);return wi&&(u?u.push(m):c&&m()),m}function JA(n,e,t){const r=this.proxy,s=He(n)?n.includes(".")?Sv(r,n):()=>r[n]:n.bind(r,r);let i;me(e)?i=e:(i=e.handler,t=e);const o=va(this),a=Kf(s,i.bind(r),t);return o(),a}function Sv(n,e){const t=e.split(".");return()=>{let r=n;for(let s=0;s<t.length&&r;s++)r=r[t[s]];return r}}const XA=(n,e)=>e==="modelValue"||e==="model-value"?n.modelModifiers:n[`${e}Modifiers`]||n[`${sn(e)}Modifiers`]||n[`${Os(e)}Modifiers`];function ZA(n,e,...t){if(n.isUnmounted)return;const r=n.vnode.props||Me;let s=t;const i=e.startsWith("update:"),o=i&&XA(r,e.slice(7));o&&(o.trim&&(s=t.map(h=>He(h)?h.trim():h)),o.number&&(s=t.map(ph)));let a,c=r[a=xu(e)]||r[a=xu(sn(e))];!c&&i&&(c=r[a=xu(Os(e))]),c&&pn(c,n,6,s);const u=r[a+"Once"];if(u){if(!n.emitted)n.emitted={};else if(n.emitted[a])return;n.emitted[a]=!0,pn(u,n,6,s)}}function Pv(n,e,t=!1){const r=e.emitsCache,s=r.get(n);if(s!==void 0)return s;const i=n.emits;let o={},a=!1;if(!me(n)){const c=u=>{const h=Pv(u,e,!0);h&&(a=!0,ht(o,h))};!t&&e.mixins.length&&e.mixins.forEach(c),n.extends&&c(n.extends),n.mixins&&n.mixins.forEach(c)}return!i&&!a?(Fe(n)&&r.set(n,null),null):(fe(i)?i.forEach(c=>o[c]=null):ht(o,i),Fe(n)&&r.set(n,o),o)}function Vl(n,e){return!n||!da(e)?!1:(e=e.slice(2).replace(/Once$/,""),ke(n,e[0].toLowerCase()+e.slice(1))||ke(n,Os(e))||ke(n,e))}function ju(n){const{type:e,vnode:t,proxy:r,withProxy:s,propsOptions:[i],slots:o,attrs:a,emit:c,render:u,renderCache:h,props:f,data:m,setupState:g,ctx:E,inheritAttrs:T}=n,x=jc(n);let V,D;try{if(t.shapeFlag&4){const C=s||r,N=C;V=Kt(u.call(N,C,h,f,g,m,E)),D=a}else{const C=e;V=Kt(C.length>1?C(f,{attrs:a,slots:o,emit:c}):C(f,null)),D=e.props?a:t0(a)}}catch(C){Co.length=0,ji(C,n,1),V=$e(rt)}let I=V;if(D&&T!==!1){const C=Object.keys(D),{shapeFlag:N}=I;C.length&&N&7&&(i&&C.some(Cf)&&(D=n0(D,i)),I=Gn(I,D,!1,!0))}return t.dirs&&(I=Gn(I,null,!1,!0),I.dirs=I.dirs?I.dirs.concat(t.dirs):t.dirs),t.transition&&Ii(I,t.transition),V=I,jc(x),V}function e0(n,e=!0){let t;for(let r=0;r<n.length;r++){const s=n[r];if(Ts(s)){if(s.type!==rt||s.children==="v-if"){if(t)return;t=s}}else return}return t}const t0=n=>{let e;for(const t in n)(t==="class"||t==="style"||da(t))&&((e||(e={}))[t]=n[t]);return e},n0=(n,e)=>{const t={};for(const r in n)(!Cf(r)||!(r.slice(9)in e))&&(t[r]=n[r]);return t};function r0(n,e,t){const{props:r,children:s,component:i}=n,{props:o,children:a,patchFlag:c}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&c>=0){if(c&1024)return!0;if(c&16)return r?lm(r,o,u):!!o;if(c&8){const h=e.dynamicProps;for(let f=0;f<h.length;f++){const m=h[f];if(o[m]!==r[m]&&!Vl(u,m))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?lm(r,o,u):!0:!!o;return!1}function lm(n,e,t){const r=Object.keys(e);if(r.length!==Object.keys(n).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==n[i]&&!Vl(t,i))return!0}return!1}function Nl({vnode:n,parent:e},t){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===n&&(r.el=n.el),r===n)(n=e.vnode).el=t,e=e.parent;else break}}const qc=n=>n.__isSuspense;let Rh=0;const s0={name:"Suspense",__isSuspense:!0,process(n,e,t,r,s,i,o,a,c,u){if(n==null)i0(e,t,r,s,i,o,a,c,u);else{if(i&&i.deps>0&&!n.suspense.isInFallback){e.suspense=n.suspense,e.suspense.vnode=e,e.el=n.el;return}o0(n,e,t,r,s,o,a,c,u)}},hydrate:a0,normalize:c0},zf=s0;function zo(n,e){const t=n.props&&n.props[e];me(t)&&t()}function i0(n,e,t,r,s,i,o,a,c){const{p:u,o:{createElement:h}}=c,f=h("div"),m=n.suspense=Cv(n,s,r,e,f,t,i,o,a,c);u(null,m.pendingBranch=n.ssContent,f,null,r,m,i,o),m.deps>0?(zo(n,"onPending"),zo(n,"onFallback"),u(null,n.ssFallback,e,t,r,null,i,o),mi(m,n.ssFallback)):m.resolve(!1,!0)}function o0(n,e,t,r,s,i,o,a,{p:c,um:u,o:{createElement:h}}){const f=e.suspense=n.suspense;f.vnode=e,e.el=n.el;const m=e.ssContent,g=e.ssFallback,{activeBranch:E,pendingBranch:T,isInFallback:x,isHydrating:V}=f;if(T)f.pendingBranch=m,hn(m,T)?(c(T,m,f.hiddenContainer,null,s,f,i,o,a),f.deps<=0?f.resolve():x&&(V||(c(E,g,t,r,s,null,i,o,a),mi(f,g)))):(f.pendingId=Rh++,V?(f.isHydrating=!1,f.activeBranch=T):u(T,s,f),f.deps=0,f.effects.length=0,f.hiddenContainer=h("div"),x?(c(null,m,f.hiddenContainer,null,s,f,i,o,a),f.deps<=0?f.resolve():(c(E,g,t,r,s,null,i,o,a),mi(f,g))):E&&hn(m,E)?(c(E,m,t,r,s,f,i,o,a),f.resolve(!0)):(c(null,m,f.hiddenContainer,null,s,f,i,o,a),f.deps<=0&&f.resolve()));else if(E&&hn(m,E))c(E,m,t,r,s,f,i,o,a),mi(f,m);else if(zo(e,"onPending"),f.pendingBranch=m,m.shapeFlag&512?f.pendingId=m.component.suspenseId:f.pendingId=Rh++,c(null,m,f.hiddenContainer,null,s,f,i,o,a),f.deps<=0)f.resolve();else{const{timeout:D,pendingId:I}=f;D>0?setTimeout(()=>{f.pendingId===I&&f.fallback(g)},D):D===0&&f.fallback(g)}}function Cv(n,e,t,r,s,i,o,a,c,u,h=!1){const{p:f,m,um:g,n:E,o:{parentNode:T,remove:x}}=u;let V;const D=l0(n);D&&e&&e.pendingBranch&&(V=e.pendingId,e.deps++);const I=n.props?Iy(n.props.timeout):void 0,C=i,N={vnode:n,parent:e,parentComponent:t,namespace:o,container:r,hiddenContainer:s,deps:0,pendingId:Rh++,timeout:typeof I=="number"?I:-1,activeBranch:null,pendingBranch:null,isInFallback:!h,isHydrating:h,isUnmounted:!1,effects:[],resolve(F=!1,w=!1){const{vnode:y,activeBranch:v,pendingBranch:b,pendingId:k,effects:S,parentComponent:A,container:ye}=N;let Ee=!1;N.isHydrating?N.isHydrating=!1:F||(Ee=v&&b.transition&&b.transition.mode==="out-in",Ee&&(v.transition.afterLeave=()=>{k===N.pendingId&&(m(b,ye,i===C?E(v):i,0),vh(S))}),v&&(T(v.el)===ye&&(i=E(v)),g(v,A,N,!0)),Ee||m(b,ye,i,0)),mi(N,b),N.pendingBranch=null,N.isInFallback=!1;let se=N.parent,de=!1;for(;se;){if(se.pendingBranch){se.effects.push(...S),de=!0;break}se=se.parent}!de&&!Ee&&vh(S),N.effects=[],D&&e&&e.pendingBranch&&V===e.pendingId&&(e.deps--,e.deps===0&&!w&&e.resolve()),zo(y,"onResolve")},fallback(F){if(!N.pendingBranch)return;const{vnode:w,activeBranch:y,parentComponent:v,container:b,namespace:k}=N;zo(w,"onFallback");const S=E(y),A=()=>{N.isInFallback&&(f(null,F,b,S,v,null,k,a,c),mi(N,F))},ye=F.transition&&F.transition.mode==="out-in";ye&&(y.transition.afterLeave=A),N.isInFallback=!0,g(y,v,null,!0),ye||A()},move(F,w,y){N.activeBranch&&m(N.activeBranch,F,w,y),N.container=F},next(){return N.activeBranch&&E(N.activeBranch)},registerDep(F,w,y){const v=!!N.pendingBranch;v&&N.deps++;const b=F.vnode.el;F.asyncDep.catch(k=>{ji(k,F,0)}).then(k=>{if(F.isUnmounted||N.isUnmounted||N.pendingId!==F.suspenseId)return;F.asyncResolved=!0;const{vnode:S}=F;Ph(F,k),b&&(S.el=b);const A=!b&&F.subTree.el;w(F,S,T(b||F.subTree.el),b?null:E(F.subTree),N,o,y),A&&x(A),Nl(F,S.el),v&&--N.deps===0&&N.resolve()})},unmount(F,w){N.isUnmounted=!0,N.activeBranch&&g(N.activeBranch,t,F,w),N.pendingBranch&&g(N.pendingBranch,t,F,w)}};return N}function a0(n,e,t,r,s,i,o,a,c){const u=e.suspense=Cv(e,r,t,n.parentNode,document.createElement("div"),null,s,i,o,a,!0),h=c(n,u.pendingBranch=e.ssContent,t,u,i,o);return u.deps===0&&u.resolve(!1,!0),h}function c0(n){const{shapeFlag:e,children:t}=n,r=e&32;n.ssContent=um(r?t.default:t),n.ssFallback=r?um(t.fallback):$e(rt)}function um(n){let e;if(me(n)){const t=Ti&&n._c;t&&(n._d=!1,Zt()),n=n(),t&&(n._d=!0,e=Ut,xv())}return fe(n)&&(n=e0(n)),n=Kt(n),e&&!n.dynamicChildren&&(n.dynamicChildren=e.filter(t=>t!==n)),n}function kv(n,e){e&&e.pendingBranch?fe(n)?e.effects.push(...n):e.effects.push(n):vh(n)}function mi(n,e){n.activeBranch=e;const{vnode:t,parentComponent:r}=n;let s=e.el;for(;!s&&e.component;)e=e.component.subTree,s=e.el;t.el=s,r&&r.subTree===t&&(r.vnode.el=s,Nl(r,s))}function l0(n){const e=n.props&&n.props.suspensible;return e!=null&&e!==!1}const At=Symbol.for("v-fgt"),ys=Symbol.for("v-txt"),rt=Symbol.for("v-cmt"),Po=Symbol.for("v-stc"),Co=[];let Ut=null;function Zt(n=!1){Co.push(Ut=n?null:[])}function xv(){Co.pop(),Ut=Co[Co.length-1]||null}let Ti=1;function hm(n,e=!1){Ti+=n,n<0&&Ut&&e&&(Ut.hasOnce=!0)}function Dv(n){return n.dynamicChildren=Ti>0?Ut||ui:null,xv(),Ti>0&&Ut&&Ut.push(n),n}function Vv(n,e,t,r,s,i){return Dv(Ov(n,e,t,r,s,i,!0))}function jn(n,e,t,r,s){return Dv($e(n,e,t,r,s,!0))}function Ts(n){return n?n.__v_isVNode===!0:!1}function hn(n,e){return n.type===e.type&&n.key===e.key}const Nv=({key:n})=>n??null,_c=({ref:n,ref_key:e,ref_for:t})=>(typeof n=="number"&&(n=""+n),n!=null?He(n)||et(n)||me(n)?{i:it,r:n,k:e,f:!!t}:n:null);function Ov(n,e=null,t=null,r=0,s=null,i=n===At?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&Nv(e),ref:e&&_c(e),scopeId:Wy,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:it};return a?(Gf(c,t),i&128&&n.normalize(c)):t&&(c.shapeFlag|=He(t)?8:16),Ti>0&&!o&&Ut&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&Ut.push(c),c}const $e=u0;function u0(n,e=null,t=null,r=0,s=null,i=!1){if((!n||n===cv)&&(n=rt),Ts(n)){const a=Gn(n,e,!0);return t&&Gf(a,t),Ti>0&&!i&&Ut&&(a.shapeFlag&6?Ut[Ut.indexOf(n)]=a:Ut.push(a)),a.patchFlag=-2,a}if(y0(n)&&(n=n.__vccOpts),e){e=Mv(e);let{class:a,style:c}=e;a&&!He(a)&&(e.class=kl(a)),Fe(c)&&(Ff(c)&&!fe(c)&&(c=ht({},c)),e.style=Cl(c))}const o=He(n)?1:qc(n)?128:Qy(n)?64:Fe(n)?4:me(n)?2:0;return Ov(n,e,t,r,s,o,i,!0)}function Mv(n){return n?Ff(n)||gv(n)?ht({},n):n:null}function Gn(n,e,t=!1,r=!1){const{props:s,ref:i,patchFlag:o,children:a,transition:c}=n,u=e?Fv(s||{},e):s,h={__v_isVNode:!0,__v_skip:!0,type:n.type,props:u,key:u&&Nv(u),ref:e&&e.ref?t&&i?fe(i)?i.concat(_c(e)):[i,_c(e)]:_c(e):i,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:a,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==At?o===-1?16:o|16:o,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:c,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&Gn(n.ssContent),ssFallback:n.ssFallback&&Gn(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return c&&r&&Ii(h,c.clone(h)),h}function Lv(n=" ",e=0){return $e(ys,null,n,e)}function qM(n,e){const t=$e(Po,null,n);return t.staticCount=e,t}function KM(n="",e=!1){return e?(Zt(),jn(rt,null,n)):$e(rt,null,n)}function Kt(n){return n==null||typeof n=="boolean"?$e(rt):fe(n)?$e(At,null,n.slice()):Ts(n)?Er(n):$e(ys,null,String(n))}function Er(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:Gn(n)}function Gf(n,e){let t=0;const{shapeFlag:r}=n;if(e==null)e=null;else if(fe(e))t=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),Gf(n,s()),s._c&&(s._d=!0));return}else{t=32;const s=e._;!s&&!gv(e)?e._ctx=it:s===3&&it&&(it.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else me(e)?(e={default:e,_ctx:it},t=32):(e=String(e),r&64?(t=16,e=[Lv(e)]):t=8);n.children=e,n.shapeFlag|=t}function Fv(...n){const e={};for(let t=0;t<n.length;t++){const r=n[t];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=kl([e.class,r.class]));else if(s==="style")e.style=Cl([e.style,r.style]);else if(da(s)){const i=e[s],o=r[s];o&&i!==o&&!(fe(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=r[s])}return e}function Ft(n,e,t,r=null){pn(n,e,7,[t,r])}const h0=dv();let f0=0;function d0(n,e,t){const r=n.type,s=(e?e.appContext:n.appContext)||h0,i={uid:f0++,vnode:n,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Ay(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:yv(r,s),emitsOptions:Pv(r,s),emit:null,emitted:null,propsDefaults:Me,inheritAttrs:r.inheritAttrs,ctx:Me,data:Me,props:Me,attrs:Me,slots:Me,refs:Me,setupState:Me,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=ZA.bind(null,i),n.ce&&n.ce(i),i}let st=null;const Ol=()=>st||it;let Kc,Sh;{const n=Pl(),e=(t,r)=>{let s;return(s=n[t])||(s=n[t]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};Kc=e("__VUE_INSTANCE_SETTERS__",t=>st=t),Sh=e("__VUE_SSR_SETTERS__",t=>wi=t)}const va=n=>{const e=st;return Kc(n),n.scope.on(),()=>{n.scope.off(),Kc(e)}},fm=()=>{st&&st.scope.off(),Kc(null)};function Uv(n){return n.vnode.shapeFlag&4}let wi=!1;function p0(n,e=!1,t=!1){e&&Sh(e);const{props:r,children:s}=n.vnode,i=Uv(n);UA(n,r,i,e),HA(n,s,t);const o=i?m0(n,e):void 0;return e&&Sh(!1),o}function m0(n,e){const t=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,xA);const{setup:r}=t;if(r){Kr();const s=n.setupContext=r.length>1?_0(n):null,i=va(n),o=ma(r,n,0,[n.props,s]),a=_y(o);if(zr(),i(),(a||n.sp)&&!Dr(n)&&jf(n),a){if(o.then(fm,fm),e)return o.then(c=>{Ph(n,c)}).catch(c=>{ji(c,n,0)});n.asyncDep=o}else Ph(n,o)}else Bv(n)}function Ph(n,e,t){me(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:Fe(e)&&(n.setupState=Hy(e)),Bv(n)}function Bv(n,e,t){const r=n.type;n.render||(n.render=r.render||An);{const s=va(n);Kr();try{DA(n)}finally{zr(),s()}}}const g0={get(n,e){return wt(n,"get",""),n[e]}};function _0(n){const e=t=>{n.exposed=t||{}};return{attrs:new Proxy(n.attrs,g0),slots:n.slots,emit:n.emit,expose:e}}function Ml(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy(Hy(eA(n.exposed)),{get(e,t){if(t in e)return e[t];if(t in So)return So[t](n)},has(e,t){return t in e||t in So}})):n.proxy}function Ch(n,e=!0){return me(n)?n.displayName||n.name:n.name||e&&n.__name}function y0(n){return me(n)&&"__vccOpts"in n}const zt=(n,e)=>cA(n,e,wi);function St(n,e,t){const r=arguments.length;return r===2?Fe(e)&&!fe(e)?Ts(e)?$e(n,null,[e]):$e(n,e):$e(n,null,e):(r>3?t=Array.prototype.slice.call(arguments,2):r===3&&Ts(t)&&(t=[t]),$e(n,e,t))}const v0="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let kh;const dm=typeof window<"u"&&window.trustedTypes;if(dm)try{kh=dm.createPolicy("vue",{createHTML:n=>n})}catch{}const jv=kh?n=>kh.createHTML(n):n=>n,E0="http://www.w3.org/2000/svg",I0="http://www.w3.org/1998/Math/MathML",Fn=typeof document<"u"?document:null,pm=Fn&&Fn.createElement("template"),T0={insert:(n,e,t)=>{e.insertBefore(n,t||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,t,r)=>{const s=e==="svg"?Fn.createElementNS(E0,n):e==="mathml"?Fn.createElementNS(I0,n):t?Fn.createElement(n,{is:t}):Fn.createElement(n);return n==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:n=>Fn.createTextNode(n),createComment:n=>Fn.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>Fn.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},insertStaticContent(n,e,t,r,s,i){const o=t?t.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),t),!(s===i||!(s=s.nextSibling)););else{pm.innerHTML=jv(r==="svg"?`<svg>${n}</svg>`:r==="mathml"?`<math>${n}</math>`:n);const a=pm.content;if(r==="svg"||r==="mathml"){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}e.insertBefore(a,t)}return[o?o.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},dr="transition",ao="animation",Go=Symbol("_vtc"),$v={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},w0=ht({},Yy,$v),b0=n=>(n.displayName="Transition",n.props=w0,n),A0=b0((n,{slots:e})=>St(gA,R0(n),e)),ns=(n,e=[])=>{fe(n)?n.forEach(t=>t(...e)):n&&n(...e)},mm=n=>n?fe(n)?n.some(e=>e.length>1):n.length>1:!1;function R0(n){const e={};for(const S in n)S in $v||(e[S]=n[S]);if(n.css===!1)return e;const{name:t="v",type:r,duration:s,enterFromClass:i=`${t}-enter-from`,enterActiveClass:o=`${t}-enter-active`,enterToClass:a=`${t}-enter-to`,appearFromClass:c=i,appearActiveClass:u=o,appearToClass:h=a,leaveFromClass:f=`${t}-leave-from`,leaveActiveClass:m=`${t}-leave-active`,leaveToClass:g=`${t}-leave-to`}=n,E=S0(s),T=E&&E[0],x=E&&E[1],{onBeforeEnter:V,onEnter:D,onEnterCancelled:I,onLeave:C,onLeaveCancelled:N,onBeforeAppear:F=V,onAppear:w=D,onAppearCancelled:y=I}=e,v=(S,A,ye,Ee)=>{S._enterCancelled=Ee,rs(S,A?h:a),rs(S,A?u:o),ye&&ye()},b=(S,A)=>{S._isLeaving=!1,rs(S,f),rs(S,g),rs(S,m),A&&A()},k=S=>(A,ye)=>{const Ee=S?w:D,se=()=>v(A,S,ye);ns(Ee,[A,se]),gm(()=>{rs(A,S?c:i),On(A,S?h:a),mm(Ee)||_m(A,r,T,se)})};return ht(e,{onBeforeEnter(S){ns(V,[S]),On(S,i),On(S,o)},onBeforeAppear(S){ns(F,[S]),On(S,c),On(S,u)},onEnter:k(!1),onAppear:k(!0),onLeave(S,A){S._isLeaving=!0;const ye=()=>b(S,A);On(S,f),S._enterCancelled?(On(S,m),Em()):(Em(),On(S,m)),gm(()=>{S._isLeaving&&(rs(S,f),On(S,g),mm(C)||_m(S,r,x,ye))}),ns(C,[S,ye])},onEnterCancelled(S){v(S,!1,void 0,!0),ns(I,[S])},onAppearCancelled(S){v(S,!0,void 0,!0),ns(y,[S])},onLeaveCancelled(S){b(S),ns(N,[S])}})}function S0(n){if(n==null)return null;if(Fe(n))return[$u(n.enter),$u(n.leave)];{const e=$u(n);return[e,e]}}function $u(n){return Iy(n)}function On(n,e){e.split(/\s+/).forEach(t=>t&&n.classList.add(t)),(n[Go]||(n[Go]=new Set)).add(e)}function rs(n,e){e.split(/\s+/).forEach(r=>r&&n.classList.remove(r));const t=n[Go];t&&(t.delete(e),t.size||(n[Go]=void 0))}function gm(n){requestAnimationFrame(()=>{requestAnimationFrame(n)})}let P0=0;function _m(n,e,t,r){const s=n._endId=++P0,i=()=>{s===n._endId&&r()};if(t!=null)return setTimeout(i,t);const{type:o,timeout:a,propCount:c}=C0(n,e);if(!o)return r();const u=o+"end";let h=0;const f=()=>{n.removeEventListener(u,m),i()},m=g=>{g.target===n&&++h>=c&&f()};setTimeout(()=>{h<c&&f()},a+1),n.addEventListener(u,m)}function C0(n,e){const t=window.getComputedStyle(n),r=E=>(t[E]||"").split(", "),s=r(`${dr}Delay`),i=r(`${dr}Duration`),o=ym(s,i),a=r(`${ao}Delay`),c=r(`${ao}Duration`),u=ym(a,c);let h=null,f=0,m=0;e===dr?o>0&&(h=dr,f=o,m=i.length):e===ao?u>0&&(h=ao,f=u,m=c.length):(f=Math.max(o,u),h=f>0?o>u?dr:ao:null,m=h?h===dr?i.length:c.length:0);const g=h===dr&&/\b(transform|all)(,|$)/.test(r(`${dr}Property`).toString());return{type:h,timeout:f,propCount:m,hasTransform:g}}function ym(n,e){for(;n.length<e.length;)n=n.concat(n);return Math.max(...e.map((t,r)=>vm(t)+vm(n[r])))}function vm(n){return n==="auto"?0:Number(n.slice(0,-1).replace(",","."))*1e3}function Em(){return document.body.offsetHeight}function k0(n,e,t){const r=n[Go];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?n.removeAttribute("class"):t?n.setAttribute("class",e):n.className=e}const Im=Symbol("_vod"),x0=Symbol("_vsh"),D0=Symbol(""),V0=/(^|;)\s*display\s*:/;function N0(n,e,t){const r=n.style,s=He(t);let i=!1;if(t&&!s){if(e)if(He(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();t[a]==null&&yc(r,a,"")}else for(const o in e)t[o]==null&&yc(r,o,"");for(const o in t)o==="display"&&(i=!0),yc(r,o,t[o])}else if(s){if(e!==t){const o=r[D0];o&&(t+=";"+o),r.cssText=t,i=V0.test(t)}}else e&&n.removeAttribute("style");Im in n&&(n[Im]=i?r.display:"",n[x0]&&(r.display="none"))}const Tm=/\s*!important$/;function yc(n,e,t){if(fe(t))t.forEach(r=>yc(n,e,r));else if(t==null&&(t=""),e.startsWith("--"))n.setProperty(e,t);else{const r=O0(n,e);Tm.test(t)?n.setProperty(Os(r),t.replace(Tm,""),"important"):n[r]=t}}const wm=["Webkit","Moz","ms"],Hu={};function O0(n,e){const t=Hu[e];if(t)return t;let r=sn(e);if(r!=="filter"&&r in n)return Hu[e]=r;r=Sl(r);for(let s=0;s<wm.length;s++){const i=wm[s]+r;if(i in n)return Hu[e]=i}return e}const bm="http://www.w3.org/1999/xlink";function Am(n,e,t,r,s,i=Db(e)){r&&e.startsWith("xlink:")?t==null?n.removeAttributeNS(bm,e.slice(6,e.length)):n.setAttributeNS(bm,e,t):t==null||i&&!Ty(t)?n.removeAttribute(e):n.setAttribute(e,i?"":Xn(t)?String(t):t)}function Rm(n,e,t,r,s){if(e==="innerHTML"||e==="textContent"){t!=null&&(n[e]=e==="innerHTML"?jv(t):t);return}const i=n.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?n.getAttribute("value")||"":n.value,c=t==null?n.type==="checkbox"?"on":"":String(t);(a!==c||!("_value"in n))&&(n.value=c),t==null&&n.removeAttribute(e),n._value=t;return}let o=!1;if(t===""||t==null){const a=typeof n[e];a==="boolean"?t=Ty(t):t==null&&a==="string"?(t="",o=!0):a==="number"&&(t=0,o=!0)}try{n[e]=t}catch{}o&&n.removeAttribute(s||e)}function ti(n,e,t,r){n.addEventListener(e,t,r)}function M0(n,e,t,r){n.removeEventListener(e,t,r)}const Sm=Symbol("_vei");function L0(n,e,t,r,s=null){const i=n[Sm]||(n[Sm]={}),o=i[e];if(r&&o)o.value=r;else{const[a,c]=F0(e);if(r){const u=i[e]=j0(r,s);ti(n,a,u,c)}else o&&(M0(n,a,o,c),i[e]=void 0)}}const Pm=/(?:Once|Passive|Capture)$/;function F0(n){let e;if(Pm.test(n)){e={};let r;for(;r=n.match(Pm);)n=n.slice(0,n.length-r[0].length),e[r[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):Os(n.slice(2)),e]}let qu=0;const U0=Promise.resolve(),B0=()=>qu||(U0.then(()=>qu=0),qu=Date.now());function j0(n,e){const t=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=t.attached)return;pn($0(r,t.value),e,5,[r])};return t.value=n,t.attached=B0(),t}function $0(n,e){if(fe(e)){const t=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{t.call(n),n._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const Cm=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,H0=(n,e,t,r,s,i)=>{const o=s==="svg";e==="class"?k0(n,r,o):e==="style"?N0(n,t,r):da(e)?Cf(e)||L0(n,e,t,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):q0(n,e,r,o))?(Rm(n,e,r),!n.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Am(n,e,r,o,i,e!=="value")):n._isVueCE&&(/[A-Z]/.test(e)||!He(r))?Rm(n,sn(e),r,i,e):(e==="true-value"?n._trueValue=r:e==="false-value"&&(n._falseValue=r),Am(n,e,r,o))};function q0(n,e,t,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in n&&Cm(e)&&me(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=n.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Cm(e)&&He(t)?!1:e in n}const km=n=>{const e=n.props["onUpdate:modelValue"]||!1;return fe(e)?t=>di(e,t):e};function K0(n){n.target.composing=!0}function xm(n){const e=n.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Ku=Symbol("_assign"),zM={created(n,{modifiers:{lazy:e,trim:t,number:r}},s){n[Ku]=km(s);const i=r||s.props&&s.props.type==="number";ti(n,e?"change":"input",o=>{if(o.target.composing)return;let a=n.value;t&&(a=a.trim()),i&&(a=ph(a)),n[Ku](a)}),t&&ti(n,"change",()=>{n.value=n.value.trim()}),e||(ti(n,"compositionstart",K0),ti(n,"compositionend",xm),ti(n,"change",xm))},mounted(n,{value:e}){n.value=e??""},beforeUpdate(n,{value:e,oldValue:t,modifiers:{lazy:r,trim:s,number:i}},o){if(n[Ku]=km(o),n.composing)return;const a=(i||n.type==="number")&&!/^0\d/.test(n.value)?ph(n.value):n.value,c=e??"";a!==c&&(document.activeElement===n&&n.type!=="range"&&(r&&e===t||s&&n.value.trim()===c)||(n.value=c))}},z0=["ctrl","shift","alt","meta"],G0={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,e)=>z0.some(t=>n[`${t}Key`]&&!e.includes(t))},GM=(n,e)=>{const t=n._withMods||(n._withMods={}),r=e.join(".");return t[r]||(t[r]=(s,...i)=>{for(let o=0;o<e.length;o++){const a=G0[e[o]];if(a&&a(s,e))return}return n(s,...i)})},Hv=ht({patchProp:H0},T0);let ko,Dm=!1;function W0(){return ko||(ko=KA(Hv))}function Q0(){return ko=Dm?ko:zA(Hv),Dm=!0,ko}const Y0=(...n)=>{const e=W0().createApp(...n),{mount:t}=e;return e.mount=r=>{const s=Kv(r);if(!s)return;const i=e._component;!me(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=t(s,!1,qv(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e},J0=(...n)=>{const e=Q0().createApp(...n),{mount:t}=e;return e.mount=r=>{const s=Kv(r);if(s)return t(s,!0,qv(s))},e};function qv(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function Kv(n){return He(n)?document.querySelector(n):n}const X0=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,Z0=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,eR=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function tR(n,e){if(n==="__proto__"||n==="constructor"&&e&&typeof e=="object"&&"prototype"in e){nR(n);return}return e}function nR(n){console.warn(`[destr] Dropping "${n}" key to prevent prototype pollution.`)}function zc(n,e={}){if(typeof n!="string")return n;if(n[0]==='"'&&n[n.length-1]==='"'&&n.indexOf("\\")===-1)return n.slice(1,-1);const t=n.trim();if(t.length<=9)switch(t.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!eR.test(n)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return n}try{if(X0.test(n)||Z0.test(n)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(n,tR)}return JSON.parse(n)}catch(r){if(e.strict)throw r;return n}}const rR=/#/g,sR=/&/g,iR=/\//g,oR=/=/g,Wf=/\+/g,aR=/%5e/gi,cR=/%60/gi,lR=/%7c/gi,uR=/%20/gi;function hR(n){return encodeURI(""+n).replace(lR,"|")}function xh(n){return hR(typeof n=="string"?n:JSON.stringify(n)).replace(Wf,"%2B").replace(uR,"+").replace(rR,"%23").replace(sR,"%26").replace(cR,"`").replace(aR,"^").replace(iR,"%2F")}function zu(n){return xh(n).replace(oR,"%3D")}function Gc(n=""){try{return decodeURIComponent(""+n)}catch{return""+n}}function fR(n){return Gc(n.replace(Wf," "))}function dR(n){return Gc(n.replace(Wf," "))}function zv(n=""){const e=Object.create(null);n[0]==="?"&&(n=n.slice(1));for(const t of n.split("&")){const r=t.match(/([^=]+)=?(.*)/)||[];if(r.length<2)continue;const s=fR(r[1]);if(s==="__proto__"||s==="constructor")continue;const i=dR(r[2]||"");e[s]===void 0?e[s]=i:Array.isArray(e[s])?e[s].push(i):e[s]=[e[s],i]}return e}function pR(n,e){return(typeof e=="number"||typeof e=="boolean")&&(e=String(e)),e?Array.isArray(e)?e.map(t=>`${zu(n)}=${xh(t)}`).join("&"):`${zu(n)}=${xh(e)}`:zu(n)}function mR(n){return Object.keys(n).filter(e=>n[e]!==void 0).map(e=>pR(e,n[e])).filter(Boolean).join("&")}const gR=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,_R=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,yR=/^([/\\]\s*){2,}[^/\\]/,vR=/^[\s\0]*(blob|data|javascript|vbscript):$/i,ER=/\/$|\/\?|\/#/,IR=/^\.?\//;function Ms(n,e={}){return typeof e=="boolean"&&(e={acceptRelative:e}),e.strict?gR.test(n):_R.test(n)||(e.acceptRelative?yR.test(n):!1)}function TR(n){return!!n&&vR.test(n)}function Dh(n="",e){return e?ER.test(n):n.endsWith("/")}function Qf(n="",e){if(!e)return(Dh(n)?n.slice(0,-1):n)||"/";if(!Dh(n,!0))return n||"/";let t=n,r="";const s=n.indexOf("#");s!==-1&&(t=n.slice(0,s),r=n.slice(s));const[i,...o]=t.split("?");return((i.endsWith("/")?i.slice(0,-1):i)||"/")+(o.length>0?`?${o.join("?")}`:"")+r}function Vh(n="",e){if(!e)return n.endsWith("/")?n:n+"/";if(Dh(n,!0))return n||"/";let t=n,r="";const s=n.indexOf("#");if(s!==-1&&(t=n.slice(0,s),r=n.slice(s),!t))return r;const[i,...o]=t.split("?");return i+"/"+(o.length>0?`?${o.join("?")}`:"")+r}function wR(n=""){return n.startsWith("/")}function Vm(n=""){return wR(n)?n:"/"+n}function bR(n,e){if(Wv(e)||Ms(n))return n;const t=Qf(e);return n.startsWith(t)?n:Yf(t,n)}function Nm(n,e){if(Wv(e))return n;const t=Qf(e);if(!n.startsWith(t))return n;const r=n.slice(t.length);return r[0]==="/"?r:"/"+r}function Gv(n,e){const t=Jv(n),r={...zv(t.search),...e};return t.search=mR(r),SR(t)}function Wv(n){return!n||n==="/"}function AR(n){return n&&n!=="/"}function Yf(n,...e){let t=n||"";for(const r of e.filter(s=>AR(s)))if(t){const s=r.replace(IR,"");t=Vh(t)+s}else t=r;return t}function Qv(...n){var o,a,c,u;const e=/\/(?!\/)/,t=n.filter(Boolean),r=[];let s=0;for(const h of t)if(!(!h||h==="/")){for(const[f,m]of h.split(e).entries())if(!(!m||m===".")){if(m===".."){if(r.length===1&&Ms(r[0]))continue;r.pop(),s--;continue}if(f===1&&((o=r[r.length-1])!=null&&o.endsWith(":/"))){r[r.length-1]+="/"+m;continue}r.push(m),s++}}let i=r.join("/");return s>=0?(a=t[0])!=null&&a.startsWith("/")&&!i.startsWith("/")?i="/"+i:(c=t[0])!=null&&c.startsWith("./")&&!i.startsWith("./")&&(i="./"+i):i="../".repeat(-1*s)+i,(u=t[t.length-1])!=null&&u.endsWith("/")&&!i.endsWith("/")&&(i+="/"),i}function RR(n,e,t={}){return t.trailingSlash||(n=Vh(n),e=Vh(e)),t.leadingSlash||(n=Vm(n),e=Vm(e)),t.encoding||(n=Gc(n),e=Gc(e)),n===e}const Yv=Symbol.for("ufo:protocolRelative");function Jv(n="",e){const t=n.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(t){const[,f,m=""]=t;return{protocol:f.toLowerCase(),pathname:m,href:f+m,auth:"",host:"",search:"",hash:""}}if(!Ms(n,{acceptRelative:!0}))return Om(n);const[,r="",s,i=""]=n.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[];let[,o="",a=""]=i.match(/([^#/?]*)(.*)?/)||[];r==="file:"&&(a=a.replace(/\/(?=[A-Za-z]:)/,""));const{pathname:c,search:u,hash:h}=Om(a);return{protocol:r.toLowerCase(),auth:s?s.slice(0,Math.max(0,s.length-1)):"",host:o,pathname:c,search:u,hash:h,[Yv]:!r}}function Om(n=""){const[e="",t="",r=""]=(n.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:e,search:t,hash:r}}function SR(n){const e=n.pathname||"",t=n.search?(n.search.startsWith("?")?"":"?")+n.search:"",r=n.hash||"",s=n.auth?n.auth+"@":"",i=n.host||"";return(n.protocol||n[Yv]?(n.protocol||"")+"//":"")+s+i+e+t+r}class PR extends Error{constructor(e,t){super(e,t),this.name="FetchError",t!=null&&t.cause&&!this.cause&&(this.cause=t.cause)}}function CR(n){var c,u,h,f,m;const e=((c=n.error)==null?void 0:c.message)||((u=n.error)==null?void 0:u.toString())||"",t=((h=n.request)==null?void 0:h.method)||((f=n.options)==null?void 0:f.method)||"GET",r=((m=n.request)==null?void 0:m.url)||String(n.request)||"/",s=`[${t}] ${JSON.stringify(r)}`,i=n.response?`${n.response.status} ${n.response.statusText}`:"<no response>",o=`${s}: ${i}${e?` ${e}`:""}`,a=new PR(o,n.error?{cause:n.error}:void 0);for(const g of["request","options","response"])Object.defineProperty(a,g,{get(){return n[g]}});for(const[g,E]of[["data","_data"],["status","status"],["statusCode","status"],["statusText","statusText"],["statusMessage","statusText"]])Object.defineProperty(a,g,{get(){return n.response&&n.response[E]}});return a}const kR=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function Mm(n="GET"){return kR.has(n.toUpperCase())}function xR(n){if(n===void 0)return!1;const e=typeof n;return e==="string"||e==="number"||e==="boolean"||e===null?!0:e!=="object"?!1:Array.isArray(n)?!0:n.buffer?!1:n.constructor&&n.constructor.name==="Object"||typeof n.toJSON=="function"}const DR=new Set(["image/svg","application/xml","application/xhtml","application/html"]),VR=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function NR(n=""){if(!n)return"json";const e=n.split(";").shift()||"";return VR.test(e)?"json":DR.has(e)||e.startsWith("text/")?"text":"blob"}function OR(n,e,t,r){const s=MR((e==null?void 0:e.headers)??(n==null?void 0:n.headers),t==null?void 0:t.headers,r);let i;return(t!=null&&t.query||t!=null&&t.params||e!=null&&e.params||e!=null&&e.query)&&(i={...t==null?void 0:t.params,...t==null?void 0:t.query,...e==null?void 0:e.params,...e==null?void 0:e.query}),{...t,...e,query:i,params:i,headers:s}}function MR(n,e,t){if(!e)return new t(n);const r=new t(e);if(n)for(const[s,i]of Symbol.iterator in n||Array.isArray(n)?n:new t(n))r.set(s,i);return r}async function oc(n,e){if(e)if(Array.isArray(e))for(const t of e)await t(n);else await e(n)}const LR=new Set([408,409,425,429,500,502,503,504]),FR=new Set([101,204,205,304]);function Xv(n={}){const{fetch:e=globalThis.fetch,Headers:t=globalThis.Headers,AbortController:r=globalThis.AbortController}=n;async function s(a){const c=a.error&&a.error.name==="AbortError"&&!a.options.timeout||!1;if(a.options.retry!==!1&&!c){let h;typeof a.options.retry=="number"?h=a.options.retry:h=Mm(a.options.method)?0:1;const f=a.response&&a.response.status||500;if(h>0&&(Array.isArray(a.options.retryStatusCodes)?a.options.retryStatusCodes.includes(f):LR.has(f))){const m=typeof a.options.retryDelay=="function"?a.options.retryDelay(a):a.options.retryDelay||0;return m>0&&await new Promise(g=>setTimeout(g,m)),i(a.request,{...a.options,retry:h-1})}}const u=CR(a);throw Error.captureStackTrace&&Error.captureStackTrace(u,i),u}const i=async function(c,u={}){const h={request:c,options:OR(c,u,n.defaults,t),response:void 0,error:void 0};h.options.method&&(h.options.method=h.options.method.toUpperCase()),h.options.onRequest&&await oc(h,h.options.onRequest),typeof h.request=="string"&&(h.options.baseURL&&(h.request=bR(h.request,h.options.baseURL)),h.options.query&&(h.request=Gv(h.request,h.options.query),delete h.options.query),"query"in h.options&&delete h.options.query,"params"in h.options&&delete h.options.params),h.options.body&&Mm(h.options.method)&&(xR(h.options.body)?(h.options.body=typeof h.options.body=="string"?h.options.body:JSON.stringify(h.options.body),h.options.headers=new t(h.options.headers||{}),h.options.headers.has("content-type")||h.options.headers.set("content-type","application/json"),h.options.headers.has("accept")||h.options.headers.set("accept","application/json")):("pipeTo"in h.options.body&&typeof h.options.body.pipeTo=="function"||typeof h.options.body.pipe=="function")&&("duplex"in h.options||(h.options.duplex="half")));let f;if(!h.options.signal&&h.options.timeout){const g=new r;f=setTimeout(()=>{const E=new Error("[TimeoutError]: The operation was aborted due to timeout");E.name="TimeoutError",E.code=23,g.abort(E)},h.options.timeout),h.options.signal=g.signal}try{h.response=await e(h.request,h.options)}catch(g){return h.error=g,h.options.onRequestError&&await oc(h,h.options.onRequestError),await s(h)}finally{f&&clearTimeout(f)}if((h.response.body||h.response._bodyInit)&&!FR.has(h.response.status)&&h.options.method!=="HEAD"){const g=(h.options.parseResponse?"json":h.options.responseType)||NR(h.response.headers.get("content-type")||"");switch(g){case"json":{const E=await h.response.text(),T=h.options.parseResponse||zc;h.response._data=T(E);break}case"stream":{h.response._data=h.response.body||h.response._bodyInit;break}default:h.response._data=await h.response[g]()}}return h.options.onResponse&&await oc(h,h.options.onResponse),!h.options.ignoreResponseError&&h.response.status>=400&&h.response.status<600?(h.options.onResponseError&&await oc(h,h.options.onResponseError),await s(h)):h.response},o=async function(c,u){return(await i(c,u))._data};return o.raw=i,o.native=(...a)=>e(...a),o.create=(a={},c={})=>Xv({...n,...c,defaults:{...n.defaults,...c.defaults,...a}}),o}const Wc=function(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}(),UR=Wc.fetch?(...n)=>Wc.fetch(...n):()=>Promise.reject(new Error("[ofetch] global.fetch is not supported!")),BR=Wc.Headers,jR=Wc.AbortController,$R=Xv({fetch:UR,Headers:BR,AbortController:jR}),HR=$R,qR=()=>{var n;return((n=window==null?void 0:window.__NUXT__)==null?void 0:n.config)||{}},Qc=qR().app,KR=()=>Qc.baseURL,zR=()=>Qc.buildAssetsDir,Jf=(...n)=>Qv(Zv(),zR(),...n),Zv=(...n)=>{const e=Qc.cdnURL||Qc.baseURL;return n.length?Qv(e,...n):e};globalThis.__buildAssetsURL=Jf,globalThis.__publicAssetsURL=Zv;globalThis.$fetch||(globalThis.$fetch=HR.create({baseURL:KR()}));function Nh(n,e={},t){for(const r in n){const s=n[r],i=t?`${t}:${r}`:r;typeof s=="object"&&s!==null?Nh(s,e,i):typeof s=="function"&&(e[i]=s)}return e}const GR={run:n=>n()},WR=()=>GR,eE=typeof console.createTask<"u"?console.createTask:WR;function QR(n,e){const t=e.shift(),r=eE(t);return n.reduce((s,i)=>s.then(()=>r.run(()=>i(...e))),Promise.resolve())}function YR(n,e){const t=e.shift(),r=eE(t);return Promise.all(n.map(s=>r.run(()=>s(...e))))}function Gu(n,e){for(const t of[...n])t(e)}class JR{constructor(){this._hooks={},this._before=void 0,this._after=void 0,this._deprecatedMessages=void 0,this._deprecatedHooks={},this.hook=this.hook.bind(this),this.callHook=this.callHook.bind(this),this.callHookWith=this.callHookWith.bind(this)}hook(e,t,r={}){if(!e||typeof t!="function")return()=>{};const s=e;let i;for(;this._deprecatedHooks[e];)i=this._deprecatedHooks[e],e=i.to;if(i&&!r.allowDeprecated){let o=i.message;o||(o=`${s} hook has been deprecated`+(i.to?`, please use ${i.to}`:"")),this._deprecatedMessages||(this._deprecatedMessages=new Set),this._deprecatedMessages.has(o)||(console.warn(o),this._deprecatedMessages.add(o))}if(!t.name)try{Object.defineProperty(t,"name",{get:()=>"_"+e.replace(/\W+/g,"_")+"_hook_cb",configurable:!0})}catch{}return this._hooks[e]=this._hooks[e]||[],this._hooks[e].push(t),()=>{t&&(this.removeHook(e,t),t=void 0)}}hookOnce(e,t){let r,s=(...i)=>(typeof r=="function"&&r(),r=void 0,s=void 0,t(...i));return r=this.hook(e,s),r}removeHook(e,t){if(this._hooks[e]){const r=this._hooks[e].indexOf(t);r!==-1&&this._hooks[e].splice(r,1),this._hooks[e].length===0&&delete this._hooks[e]}}deprecateHook(e,t){this._deprecatedHooks[e]=typeof t=="string"?{to:t}:t;const r=this._hooks[e]||[];delete this._hooks[e];for(const s of r)this.hook(e,s)}deprecateHooks(e){Object.assign(this._deprecatedHooks,e);for(const t in e)this.deprecateHook(t,e[t])}addHooks(e){const t=Nh(e),r=Object.keys(t).map(s=>this.hook(s,t[s]));return()=>{for(const s of r.splice(0,r.length))s()}}removeHooks(e){const t=Nh(e);for(const r in t)this.removeHook(r,t[r])}removeAllHooks(){for(const e in this._hooks)delete this._hooks[e]}callHook(e,...t){return t.unshift(e),this.callHookWith(QR,e,...t)}callHookParallel(e,...t){return t.unshift(e),this.callHookWith(YR,e,...t)}callHookWith(e,t,...r){const s=this._before||this._after?{name:t,args:r,context:{}}:void 0;this._before&&Gu(this._before,s);const i=e(t in this._hooks?[...this._hooks[t]]:[],r);return i instanceof Promise?i.finally(()=>{this._after&&s&&Gu(this._after,s)}):(this._after&&s&&Gu(this._after,s),i)}beforeEach(e){return this._before=this._before||[],this._before.push(e),()=>{if(this._before!==void 0){const t=this._before.indexOf(e);t!==-1&&this._before.splice(t,1)}}}afterEach(e){return this._after=this._after||[],this._after.push(e),()=>{if(this._after!==void 0){const t=this._after.indexOf(e);t!==-1&&this._after.splice(t,1)}}}}function tE(){return new JR}function XR(n={}){let e,t=!1;const r=o=>{if(e&&e!==o)throw new Error("Context conflict")};let s;if(n.asyncContext){const o=n.AsyncLocalStorage||globalThis.AsyncLocalStorage;o?s=new o:console.warn("[unctx] `AsyncLocalStorage` is not provided.")}const i=()=>{if(s){const o=s.getStore();if(o!==void 0)return o}return e};return{use:()=>{const o=i();if(o===void 0)throw new Error("Context is not available");return o},tryUse:()=>i(),set:(o,a)=>{a||r(o),e=o,t=!0},unset:()=>{e=void 0,t=!1},call:(o,a)=>{r(o),e=o;try{return s?s.run(o,a):a()}finally{t||(e=void 0)}},async callAsync(o,a){e=o;const c=()=>{e=o},u=()=>e===o?c:void 0;Oh.add(u);try{const h=s?s.run(o,a):a();return t||(e=void 0),await h}finally{Oh.delete(u)}}}}function ZR(n={}){const e={};return{get(t,r={}){return e[t]||(e[t]=XR({...n,...r})),e[t]}}}const Yc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof global<"u"?global:typeof window<"u"?window:{},Lm="__unctx__",eS=Yc[Lm]||(Yc[Lm]=ZR()),tS=(n,e={})=>eS.get(n,e),Fm="__unctx_async_handlers__",Oh=Yc[Fm]||(Yc[Fm]=new Set);function gi(n){const e=[];for(const s of Oh){const i=s();i&&e.push(i)}const t=()=>{for(const s of e)s()};let r=n();return r&&typeof r=="object"&&"catch"in r&&(r=r.catch(s=>{throw t(),s})),[r,t]}const nS=!1,Mh=!1,rS=!1,WM={componentName:"NuxtLink",prefetch:!0,prefetchOn:{visibility:!0}},sS=null,iS="#__nuxt",nE="nuxt-app",Um=36e5,oS="vite:preloadError";function rE(n=nE){return tS(n,{asyncContext:!1})}const aS="__nuxt_plugin";function cS(n){var s;let e=0;const t={_id:n.id||nE||"nuxt-app",_scope:Nb(),provide:void 0,globalName:"nuxt",versions:{get nuxt(){return"3.16.2"},get vue(){return t.vueApp.version}},payload:$n({...((s=n.ssrContext)==null?void 0:s.payload)||{},data:$n({}),state:Zn({}),once:new Set,_errors:$n({})}),static:{data:{}},runWithContext(i){return t._scope.active&&!Ry()?t._scope.run(()=>Bm(t,i)):Bm(t,i)},isHydrating:!0,deferHydration(){if(!t.isHydrating)return()=>{};e++;let i=!1;return()=>{if(!i&&(i=!0,e--,e===0))return t.isHydrating=!1,t.callHook("app:suspense:resolve")}},_asyncDataPromises:{},_asyncData:$n({}),_payloadRevivers:{},...n};{const i=window.__NUXT__;if(i)for(const o in i)switch(o){case"data":case"state":case"_errors":Object.assign(t.payload[o],i[o]);break;default:t.payload[o]=i[o]}}t.hooks=tE(),t.hook=t.hooks.hook,t.callHook=t.hooks.callHook,t.provide=(i,o)=>{const a="$"+i;ac(t,a,o),ac(t.vueApp.config.globalProperties,a,o)},ac(t.vueApp,"$nuxt",t),ac(t.vueApp.config.globalProperties,"$nuxt",t);{window.addEventListener(oS,o=>{t.callHook("app:chunkError",{error:o.payload}),(t.isHydrating||o.payload.message.includes("Unable to preload CSS"))&&o.preventDefault()}),window.useNuxtApp||(window.useNuxtApp=Xe);const i=t.hook("app:error",(...o)=>{console.error("[nuxt] error caught during app initialization",...o)});t.hook("app:mounted",i)}const r=t.payload.config;return t.provide("config",r),t}function lS(n,e){e.hooks&&n.hooks.addHooks(e.hooks)}async function uS(n,e){if(typeof e=="function"){const{provide:t}=await n.runWithContext(()=>e(n))||{};if(t&&typeof t=="object")for(const r in t)n.provide(r,t[r])}}async function hS(n,e){const t=[],r=[],s=[],i=[];let o=0;async function a(c){var h;const u=((h=c.dependsOn)==null?void 0:h.filter(f=>e.some(m=>m._name===f)&&!t.includes(f)))??[];if(u.length>0)r.push([new Set(u),c]);else{const f=uS(n,c).then(async()=>{c._name&&(t.push(c._name),await Promise.all(r.map(async([m,g])=>{m.has(c._name)&&(m.delete(c._name),m.size===0&&(o++,await a(g)))})))});c.parallel?s.push(f.catch(m=>i.push(m))):await f}}for(const c of e)lS(n,c);for(const c of e)await a(c);if(await Promise.all(s),o)for(let c=0;c<o;c++)await Promise.all(s);if(i.length)throw i[0]}function on(n){if(typeof n=="function")return n;const e=n._name||n.name;return delete n.name,Object.assign(n.setup||(()=>{}),n,{[aS]:!0,_name:e})}function Bm(n,e,t){const r=()=>e();return rE(n._id).set(n),n.vueApp.runWithContext(r)}function fS(n){var t;let e;return Hf()&&(e=(t=Ol())==null?void 0:t.appContext.app.$nuxt),e||(e=rE(n).tryUse()),e||null}function Xe(n){const e=fS(n);if(!e)throw new Error("[nuxt] instance unavailable");return e}function Ea(n){return Xe().$config}function ac(n,e,t){Object.defineProperty(n,e,{get:()=>t})}function dS(n,e){return{ctx:{table:n},matchAll:t=>iE(t,n)}}function sE(n){const e={};for(const t in n)e[t]=t==="dynamic"?new Map(Object.entries(n[t]).map(([r,s])=>[r,sE(s)])):new Map(Object.entries(n[t]));return e}function pS(n){return dS(sE(n))}function iE(n,e,t){n.endsWith("/")&&(n=n.slice(0,-1)||"/");const r=[];for(const[i,o]of jm(e.wildcard))(n===i||n.startsWith(i+"/"))&&r.push(o);for(const[i,o]of jm(e.dynamic))if(n.startsWith(i+"/")){const a="/"+n.slice(i.length).split("/").splice(2).join("/");r.push(...iE(a,o))}const s=e.static.get(n);return s&&r.push(s),r.filter(Boolean)}function jm(n){return[...n.entries()].sort((e,t)=>e[0].length-t[0].length)}function Wu(n){if(n===null||typeof n!="object")return!1;const e=Object.getPrototypeOf(n);return e!==null&&e!==Object.prototype&&Object.getPrototypeOf(e)!==null||Symbol.iterator in n?!1:Symbol.toStringTag in n?Object.prototype.toString.call(n)==="[object Module]":!0}function Lh(n,e,t=".",r){if(!Wu(e))return Lh(n,{},t,r);const s=Object.assign({},e);for(const i in n){if(i==="__proto__"||i==="constructor")continue;const o=n[i];o!=null&&(r&&r(s,i,o,t)||(Array.isArray(o)&&Array.isArray(s[i])?s[i]=[...o,...s[i]]:Wu(o)&&Wu(s[i])?s[i]=Lh(o,s[i],(t?`${t}.`:"")+i.toString(),r):s[i]=o))}return s}function mS(n){return(...e)=>e.reduce((t,r)=>Lh(t,r,"",n),{})}const oE=mS();function gS(n,e){try{return e in n}catch{return!1}}class Fh extends Error{constructor(t,r={}){super(t,r);fr(this,"statusCode",500);fr(this,"fatal",!1);fr(this,"unhandled",!1);fr(this,"statusMessage");fr(this,"data");fr(this,"cause");r.cause&&!this.cause&&(this.cause=r.cause)}toJSON(){const t={message:this.message,statusCode:Uh(this.statusCode,500)};return this.statusMessage&&(t.statusMessage=aE(this.statusMessage)),this.data!==void 0&&(t.data=this.data),t}}fr(Fh,"__h3_error__",!0);function vc(n){if(typeof n=="string")return new Fh(n);if(_S(n))return n;const e=new Fh(n.message??n.statusMessage??"",{cause:n.cause||n});if(gS(n,"stack"))try{Object.defineProperty(e,"stack",{get(){return n.stack}})}catch{try{e.stack=n.stack}catch{}}if(n.data&&(e.data=n.data),n.statusCode?e.statusCode=Uh(n.statusCode,e.statusCode):n.status&&(e.statusCode=Uh(n.status,e.statusCode)),n.statusMessage?e.statusMessage=n.statusMessage:n.statusText&&(e.statusMessage=n.statusText),e.statusMessage){const t=e.statusMessage;aE(e.statusMessage)!==t&&console.warn("[h3] Please prefer using `message` for longer error messages instead of `statusMessage`. In the future, `statusMessage` will be sanitized by default.")}return n.fatal!==void 0&&(e.fatal=n.fatal),n.unhandled!==void 0&&(e.unhandled=n.unhandled),e}function _S(n){var e;return((e=n==null?void 0:n.constructor)==null?void 0:e.__h3_error__)===!0}const yS=/[^\u0009\u0020-\u007E]/g;function aE(n=""){return n.replace(yS,"")}function Uh(n,e=200){return!n||(typeof n=="string"&&(n=Number.parseInt(n,10)),n<100||n>999)?e:n}const cE=Symbol("layout-meta"),Ia=Symbol("route"),$t=()=>{var n;return(n=Xe())==null?void 0:n.$router},Xf=()=>Hf()?Pt(Ia,Xe()._route):Xe()._route;function QM(n){return n}const vS=()=>{try{if(Xe()._processingMiddleware)return!0}catch{return!1}return!1},YM=(n,e)=>{n||(n="/");const t=typeof n=="string"?n:"path"in n?ES(n):$t().resolve(n).href;if(e!=null&&e.open){const{target:c="_blank",windowFeatures:u={}}=e.open,h=Object.entries(u).filter(([f,m])=>m!==void 0).map(([f,m])=>`${f.toLowerCase()}=${m}`).join(", ");return open(t,c,h),Promise.resolve()}const r=Ms(t,{acceptRelative:!0}),s=(e==null?void 0:e.external)||r;if(s){if(!(e!=null&&e.external))throw new Error("Navigating to an external URL is not allowed by default. Use `navigateTo(url, { external: true })`.");const{protocol:c}=new URL(t,window.location.href);if(c&&TR(c))throw new Error(`Cannot navigate to a URL with '${c}' protocol.`)}const i=vS();if(!s&&i){if(e!=null&&e.replace){if(typeof n=="string"){const{pathname:c,search:u,hash:h}=Jv(n);return{path:c,...u&&{query:zv(u)},...h&&{hash:h},replace:!0}}return{...n,replace:!0}}return n}const o=$t(),a=Xe();return s?(a._scope.stop(),e!=null&&e.replace?location.replace(t):location.href=t,i?a.isHydrating?new Promise(()=>{}):!1:Promise.resolve()):e!=null&&e.replace?o.replace(n):o.push(n)};function ES(n){return Gv(n.path||"",n.query||{})+(n.hash||"")}const lE="__nuxt_error",Ll=()=>qy(Xe().payload,"error"),Ir=n=>{const e=Fl(n);try{const t=Xe(),r=Ll();t.hooks.callHook("app:error",e),r.value||(r.value=e)}catch{throw e}return e},IS=async(n={})=>{const e=Xe(),t=Ll();e.callHook("app:error:cleared",n),n.redirect&&await $t().replace(n.redirect),t.value=sS},uE=n=>!!n&&typeof n=="object"&&lE in n,Fl=n=>{const e=vc(n);return Object.defineProperty(e,lE,{value:!0,configurable:!1,writable:!1}),e};function $m(n){const e=wS(n),t=new ArrayBuffer(e.length),r=new DataView(t);for(let s=0;s<t.byteLength;s++)r.setUint8(s,e.charCodeAt(s));return t}const TS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function wS(n){n.length%4===0&&(n=n.replace(/==?$/,""));let e="",t=0,r=0;for(let s=0;s<n.length;s++)t<<=6,t|=TS.indexOf(n[s]),r+=6,r===24&&(e+=String.fromCharCode((t&16711680)>>16),e+=String.fromCharCode((t&65280)>>8),e+=String.fromCharCode(t&255),t=r=0);return r===12?(t>>=4,e+=String.fromCharCode(t)):r===18&&(t>>=2,e+=String.fromCharCode((t&65280)>>8),e+=String.fromCharCode(t&255)),e}const bS=-1,AS=-2,RS=-3,SS=-4,PS=-5,CS=-6;function kS(n,e){return xS(JSON.parse(n),e)}function xS(n,e){if(typeof n=="number")return s(n,!0);if(!Array.isArray(n)||n.length===0)throw new Error("Invalid input");const t=n,r=Array(t.length);function s(i,o=!1){if(i===bS)return;if(i===RS)return NaN;if(i===SS)return 1/0;if(i===PS)return-1/0;if(i===CS)return-0;if(o)throw new Error("Invalid input");if(i in r)return r[i];const a=t[i];if(!a||typeof a!="object")r[i]=a;else if(Array.isArray(a))if(typeof a[0]=="string"){const c=a[0],u=e==null?void 0:e[c];if(u)return r[i]=u(s(a[1]));switch(c){case"Date":r[i]=new Date(a[1]);break;case"Set":const h=new Set;r[i]=h;for(let g=1;g<a.length;g+=1)h.add(s(a[g]));break;case"Map":const f=new Map;r[i]=f;for(let g=1;g<a.length;g+=2)f.set(s(a[g]),s(a[g+1]));break;case"RegExp":r[i]=new RegExp(a[1],a[2]);break;case"Object":r[i]=Object(a[1]);break;case"BigInt":r[i]=BigInt(a[1]);break;case"null":const m=Object.create(null);r[i]=m;for(let g=1;g<a.length;g+=2)m[a[g]]=s(a[g+1]);break;case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":{const g=globalThis[c],E=a[1],T=$m(E),x=new g(T);r[i]=x;break}case"ArrayBuffer":{const g=a[1],E=$m(g);r[i]=E;break}default:throw new Error(`Unknown type ${c}`)}}else{const c=new Array(a.length);r[i]=c;for(let u=0;u<a.length;u+=1){const h=a[u];h!==AS&&(c[u]=s(h))}}else{const c={};r[i]=c;for(const u in a){const h=a[u];c[u]=s(h)}}return r[i]}return s(0)}const DS=new Set(["link","style","script","noscript"]),VS=new Set(["title","titleTemplate","script","style","noscript"]),Hm=new Set(["base","meta","link","style","script","noscript"]),NS=new Set(["title","base","htmlAttrs","bodyAttrs","meta","link","style","script","noscript"]),OS=new Set(["base","title","titleTemplate","bodyAttrs","htmlAttrs","templateParams"]),MS=new Set(["key","tagPosition","tagPriority","tagDuplicateStrategy","innerHTML","textContent","processTemplateParams"]),LS=new Set(["templateParams","htmlAttrs","bodyAttrs"]),FS=new Set(["theme-color","google-site-verification","og","article","book","profile","twitter","author"]);const US=["name","property","http-equiv"];function hE(n){const e=n.split(":")[1];return FS.has(e)}function Bh(n){const{props:e,tag:t}=n;if(OS.has(t))return t;if(t==="link"&&e.rel==="canonical")return"canonical";if(e.charset)return"charset";if(n.tag==="meta"){for(const r of US)if(e[r]!==void 0)return`${t}:${e[r]}`}if(n.key)return`${t}:key:${n.key}`;if(e.id)return`${t}:id:${e.id}`;if(VS.has(t)){const r=n.textContent||n.innerHTML;if(r)return`${t}:content:${r}`}}function qm(n){const e=n._h||n._d;if(e)return e;const t=n.textContent||n.innerHTML;return t||`${n.tag}:${Object.entries(n.props).map(([r,s])=>`${r}:${String(s)}`).join(",")}`}function Jc(n,e,t){typeof n==="function"&&(!t||t!=="titleTemplate"&&!(t[0]==="o"&&t[1]==="n"))&&(n=n());let s;if(e&&(s=e(t,n)),Array.isArray(s))return s.map(i=>Jc(i,e));if((s==null?void 0:s.constructor)===Object){const i={};for(const o of Object.keys(s))i[o]=Jc(s[o],e,o);return i}return s}function BS(n,e){const t=n==="style"?new Map:new Set;function r(s){const i=s.trim();if(i)if(n==="style"){const[o,...a]=i.split(":").map(c=>c.trim());o&&a.length&&t.set(o,a.join(":"))}else i.split(" ").filter(Boolean).forEach(o=>t.add(o))}return typeof e=="string"?n==="style"?e.split(";").forEach(r):r(e):Array.isArray(e)?e.forEach(s=>r(s)):e&&typeof e=="object"&&Object.entries(e).forEach(([s,i])=>{i&&i!=="false"&&(n==="style"?t.set(s.trim(),i):r(s))}),t}function fE(n,e){return n.props=n.props||{},e&&Object.entries(e).forEach(([t,r])=>{if(r===null){n.props[t]=null;return}if(t==="class"||t==="style"){n.props[t]=BS(t,r);return}if(MS.has(t)){if(["textContent","innerHTML"].includes(t)&&typeof r=="object"){let o=e.type;if(e.type||(o="application/json"),!(o!=null&&o.endsWith("json"))&&o!=="speculationrules")return;e.type=o,n.props.type=o,n[t]=JSON.stringify(r)}else n[t]=r;return}const s=String(r),i=t.startsWith("data-");s==="true"||s===""?n.props[t]=i?s:!0:!r&&i&&s==="false"?n.props[t]="false":r!==void 0&&(n.props[t]=r)}),n}function jS(n,e){const t=typeof e=="object"&&typeof e!="function"?e:{[n==="script"||n==="noscript"||n==="style"?"innerHTML":"textContent"]:e},r=fE({tag:n,props:{}},t);return r.key&&DS.has(r.tag)&&(r.props["data-hid"]=r._h=r.key),r.tag==="script"&&typeof r.innerHTML=="object"&&(r.innerHTML=JSON.stringify(r.innerHTML),r.props.type=r.props.type||"application/json"),Array.isArray(r.props.content)?r.props.content.map(s=>({...r,props:{...r.props,content:s}})):r}function $S(n,e){if(!n)return[];typeof n=="function"&&(n=n());const t=(s,i)=>{for(let o=0;o<e.length;o++)i=e[o](s,i);return i};n=t(void 0,n);const r=[];return n=Jc(n,t),Object.entries(n||{}).forEach(([s,i])=>{if(i!==void 0)for(const o of Array.isArray(i)?i:[i])r.push(jS(s,o))}),r.flat()}const jh=(n,e)=>n._w===e._w?n._p-e._p:n._w-e._w,Km={base:-10,title:10},HS={critical:-8,high:-1,low:2},zm={meta:{"content-security-policy":-30,charset:-20,viewport:-15},link:{preconnect:20,stylesheet:60,preload:70,modulepreload:70,prefetch:90,"dns-prefetch":90,prerender:90},script:{async:30,defer:80,sync:50},style:{imported:40,sync:60}},qS=/@import/,co=n=>n===""||n===!0;function KS(n,e){var i;if(typeof e.tagPriority=="number")return e.tagPriority;let t=100;const r=HS[e.tagPriority]||0,s=n.resolvedOptions.disableCapoSorting?{link:{},script:{},style:{}}:zm;if(e.tag in Km)t=Km[e.tag];else if(e.tag==="meta"){const o=e.props["http-equiv"]==="content-security-policy"?"content-security-policy":e.props.charset?"charset":e.props.name==="viewport"?"viewport":null;o&&(t=zm.meta[o])}else e.tag==="link"&&e.props.rel?t=s.link[e.props.rel]:e.tag==="script"?co(e.props.async)?t=s.script.async:e.props.src&&!co(e.props.defer)&&!co(e.props.async)&&e.props.type!=="module"&&!((i=e.props.type)!=null&&i.endsWith("json"))?t=s.script.sync:co(e.props.defer)&&e.props.src&&!co(e.props.async)&&(t=s.script.defer):e.tag==="style"&&(t=e.innerHTML&&qS.test(e.innerHTML)?s.style.imported:s.style.sync);return(t||100)+r}function Gm(n,e){const t=typeof e=="function"?e(n):e,r=t.key||String(n.plugins.size+1);n.plugins.get(r)||(n.plugins.set(r,t),n.hooks.addHooks(t.hooks||{}))}function zS(n={}){var a;const e=tE();e.addHooks(n.hooks||{});const t=!n.document,r=new Map,s=new Map,i=[],o={_entryCount:1,plugins:s,dirty:!1,resolvedOptions:n,hooks:e,ssr:t,entries:r,headEntries(){return[...r.values()]},use:c=>Gm(o,c),push(c,u){const h={...u||{}};delete h.head;const f=h._index??o._entryCount++,m={_i:f,input:c,options:h},g={_poll(E=!1){o.dirty=!0,!E&&i.push(f),e.callHook("entries:updated",o)},dispose(){r.delete(f)&&g._poll(!0)},patch(E){(!h.mode||h.mode==="server"&&t||h.mode==="client"&&!t)&&(m.input=E,r.set(f,m),g._poll())}};return g.patch(c),g},async resolveTags(){var g;const c={tagMap:new Map,tags:[],entries:[...o.entries.values()]};for(await e.callHook("entries:resolve",c);i.length;){const E=i.shift(),T=r.get(E);if(T){const x={tags:$S(T.input,n.propResolvers||[]).map(V=>Object.assign(V,T.options)),entry:T};await e.callHook("entries:normalize",x),T._tags=x.tags.map((V,D)=>(V._w=KS(o,V),V._p=(T._i<<10)+D,V._d=Bh(V),V))}}let u=!1;c.entries.flatMap(E=>(E._tags||[]).map(T=>({...T,props:{...T.props}}))).sort(jh).reduce((E,T)=>{const x=String(T._d||T._p);if(!E.has(x))return E.set(x,T);const V=E.get(x);if(((T==null?void 0:T.tagDuplicateStrategy)||(LS.has(T.tag)?"merge":null)||(T.key&&T.key===V.key?"merge":null))==="merge"){const I={...V.props};Object.entries(T.props).forEach(([C,N])=>I[C]=C==="style"?new Map([...V.props.style||new Map,...N]):C==="class"?new Set([...V.props.class||new Set,...N]):N),E.set(x,{...T,props:I})}else T._p>>10===V._p>>10&&hE(T._d)?(E.set(x,Object.assign([...Array.isArray(V)?V:[V],T],T)),u=!0):(T._w===V._w?T._p>V._p:(T==null?void 0:T._w)<(V==null?void 0:V._w))&&E.set(x,T);return E},c.tagMap);const h=c.tagMap.get("title"),f=c.tagMap.get("titleTemplate");if(o._title=h==null?void 0:h.textContent,f){const E=f==null?void 0:f.textContent;if(o._titleTemplate=E,E){let T=typeof E=="function"?E(h==null?void 0:h.textContent):E;typeof T=="string"&&!o.plugins.has("template-params")&&(T=T.replace("%s",(h==null?void 0:h.textContent)||"")),h?T===null?c.tagMap.delete("title"):c.tagMap.set("title",{...h,textContent:T}):(f.tag="title",f.textContent=T)}}c.tags=Array.from(c.tagMap.values()),u&&(c.tags=c.tags.flat().sort(jh)),await e.callHook("tags:beforeResolve",c),await e.callHook("tags:resolve",c),await e.callHook("tags:afterResolve",c);const m=[];for(const E of c.tags){const{innerHTML:T,tag:x,props:V}=E;if(NS.has(x)&&!(Object.keys(V).length===0&&!E.innerHTML&&!E.textContent)&&!(x==="meta"&&!V.content&&!V["http-equiv"]&&!V.charset)){if(x==="script"&&T){if((g=V.type)!=null&&g.endsWith("json")){const D=typeof T=="string"?T:JSON.stringify(T);E.innerHTML=D.replace(/</g,"\\u003C")}else typeof T=="string"&&(E.innerHTML=T.replace(new RegExp(`</${x}`,"g"),`<\\/${x}`));E._d=Bh(E)}m.push(E)}}return m}};return((n==null?void 0:n.plugins)||[]).forEach(c=>Gm(o,c)),o.hooks.callHook("init",o),(a=n.init)==null||a.forEach(c=>c&&o.push(c)),o}const Tr="%separator",GS=new RegExp(`${Tr}(?:\\s*${Tr})*`,"g");function WS(n,e,t=!1){var s;let r;if(e==="s"||e==="pageTitle")r=n.pageTitle;else if(e.includes(".")){const i=e.indexOf(".");r=(s=n[e.substring(0,i)])==null?void 0:s[e.substring(i+1)]}else r=n[e];if(r!==void 0)return t?(r||"").replace(/\\/g,"\\\\").replace(/</g,"\\u003C").replace(/"/g,'\\"'):r||""}function cc(n,e,t,r=!1){if(typeof n!="string"||!n.includes("%"))return n;let s=n;try{s=decodeURI(n)}catch{}const i=s.match(/%\w+(?:\.\w+)?/g);if(!i)return n;const o=n.includes(Tr);return n=n.replace(/%\w+(?:\.\w+)?/g,a=>{if(a===Tr||!i.includes(a))return a;const c=WS(e,a.slice(1),r);return c!==void 0?c:a}).trim(),o&&(n.endsWith(Tr)&&(n=n.slice(0,-Tr.length)),n.startsWith(Tr)&&(n=n.slice(Tr.length)),n=n.replace(GS,t||"").trim()),n}const Wm=n=>n.includes(":key")?n:n.split(":").join(":key:"),QS={key:"aliasSorting",hooks:{"tags:resolve":n=>{let e=!1;for(const t of n.tags){const r=t.tagPriority;if(!r)continue;const s=String(r);if(s.startsWith("before:")){const i=Wm(s.slice(7)),o=n.tagMap.get(i);o&&(typeof o.tagPriority=="number"&&(t.tagPriority=o.tagPriority),t._p=o._p-1,e=!0)}else if(s.startsWith("after:")){const i=Wm(s.slice(6)),o=n.tagMap.get(i);o&&(typeof o.tagPriority=="number"&&(t.tagPriority=o.tagPriority),t._p=o._p+1,e=!0)}}e&&(n.tags=n.tags.sort(jh))}}},YS={key:"deprecations",hooks:{"entries:normalize":({tags:n})=>{for(const e of n)e.props.children&&(e.innerHTML=e.props.children,delete e.props.children),e.props.hid&&(e.key=e.props.hid,delete e.props.hid),e.props.vmid&&(e.key=e.props.vmid,delete e.props.vmid),e.props.body&&(e.tagPosition="bodyClose",delete e.props.body)}}};async function $h(n){if(typeof n==="function")return n;if(n instanceof Promise)return await n;if(Array.isArray(n))return await Promise.all(n.map(t=>$h(t)));if((n==null?void 0:n.constructor)===Object){const t={};for(const r of Object.keys(n))t[r]=await $h(n[r]);return t}return n}const JS={key:"promises",hooks:{"entries:resolve":async n=>{const e=[];for(const t in n.entries)n.entries[t]._promisesProcessed||e.push($h(n.entries[t].input).then(r=>{n.entries[t].input=r,n.entries[t]._promisesProcessed=!0}));await Promise.all(e)}}},XS={meta:"content",link:"href",htmlAttrs:"lang"},ZS=["innerHTML","textContent"],eP=n=>({key:"template-params",hooks:{"entries:normalize":e=>{var r,s,i;const t=((s=(r=e.tags.filter(o=>o.tag==="templateParams"&&o.mode==="server"))==null?void 0:r[0])==null?void 0:s.props)||{};Object.keys(t).length&&(n._ssrPayload={templateParams:{...((i=n._ssrPayload)==null?void 0:i.templateParams)||{},...t}})},"tags:resolve":({tagMap:e,tags:t})=>{var i;const r=((i=e.get("templateParams"))==null?void 0:i.props)||{},s=r.separator||"|";delete r.separator,r.pageTitle=cc(r.pageTitle||n._title||"",r,s);for(const o of t){if(o.processTemplateParams===!1)continue;const a=XS[o.tag];if(a&&typeof o.props[a]=="string")o.props[a]=cc(o.props[a],r,s);else if(o.processTemplateParams||o.tag==="titleTemplate"||o.tag==="title")for(const c of ZS)typeof o[c]=="string"&&(o[c]=cc(o[c],r,s,o.tag==="script"&&o.props.type.endsWith("json")))}n._templateParams=r,n._separator=s},"tags:afterResolve":({tagMap:e})=>{const t=e.get("title");t!=null&&t.textContent&&t.processTemplateParams!==!1&&(t.textContent=cc(t.textContent,n._templateParams,n._separator))}}}),tP=(n,e)=>et(e)?nA(e):e,dE="usehead";function nP(n){return{install(t){t.config.globalProperties.$unhead=n,t.config.globalProperties.$head=n,t.provide(dE,n)}}.install}function rP(){if(Hf()){const n=Pt(dE);if(!n)throw new Error("useHead() was called without provide context, ensure you call it through the setup() function.");return n}throw new Error("useHead() was called without provide context, ensure you call it through the setup() function.")}function JM(n,e={}){const t=e.head||rP();return t.ssr?t.push(n||{},e):sP(t,n,e)}function sP(n,e,t={}){const r=Rn(!1);let s;return YA(()=>{const o=r.value?{}:Jc(e,tP);s?s.patch(o):s=n.push(o,t)}),Ol()&&(ya(()=>{s.dispose()}),nv(()=>{r.value=!0}),tv(()=>{r.value=!1})),s}const iP="modulepreload",oP=function(n,e){return new URL(n,e).href},Qm={},Tn=function(e,t,r){let s=Promise.resolve();if(t&&t.length>0){let o=function(h){return Promise.all(h.map(f=>Promise.resolve(f).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};const a=document.getElementsByTagName("link"),c=document.querySelector("meta[property=csp-nonce]"),u=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));s=o(t.map(h=>{if(h=oP(h,r),h in Qm)return;Qm[h]=!0;const f=h.endsWith(".css"),m=f?'[rel="stylesheet"]':"";if(!!r)for(let T=a.length-1;T>=0;T--){const x=a[T];if(x.href===h&&(!f||x.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${h}"]${m}`))return;const E=document.createElement("link");if(E.rel=f?"stylesheet":iP,f||(E.as="script"),E.crossOrigin="",E.href=h,u&&E.setAttribute("nonce",u),document.head.appendChild(E),f)return new Promise((T,x)=>{E.addEventListener("load",T),E.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${h}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};let Ec,Ic;function aP(){return Ec=$fetch(Jf(`builds/meta/${Ea().app.buildId}.json`),{responseType:"json"}),Ec.then(n=>{Ic=pS(n.matcher)}).catch(n=>{console.error("[nuxt] Error fetching app manifest.",n)}),Ec}function Ul(){return Ec||aP()}async function Zf(n){const e=typeof n=="string"?n:n.path;if(await Ul(),!Ic)return console.error("[nuxt] Error creating app manifest matcher.",Ic),{};try{return oE({},...Ic.matchAll(e).reverse())}catch(t){return console.error("[nuxt] Error matching route rules.",t),{}}}async function Ym(n,e={}){if(!await mE(n))return null;const r=await lP(n,e);return await pE(r)||null}const cP="_payload.json";async function lP(n,e={}){const t=new URL(n,"http://localhost");if(t.host!=="localhost"||Ms(t.pathname,{acceptRelative:!0}))throw new Error("Payload URL must not include hostname: "+n);const r=Ea(),s=e.hash||(e.fresh?Date.now():r.app.buildId),i=r.app.cdnURL,o=i&&await mE(n)?i:r.app.baseURL;return Yf(o,t.pathname,cP+(s?`?${s}`:""))}async function pE(n){const e=fetch(n,{cache:"force-cache"}).then(t=>t.text().then(gE));try{return await e}catch(t){console.warn("[nuxt] Cannot load payload ",n,t)}return null}async function mE(n=Xf().path){const e=Xe();return n=Qf(n),(await Ul()).prerendered.includes(n)?!0:e.runWithContext(async()=>{const r=await Zf({path:n});return!!r.prerender&&!r.redirect})}let ss=null;async function uP(){var r;if(ss)return ss;const n=document.getElementById("__NUXT_DATA__");if(!n)return{};const e=await gE(n.textContent||""),t=n.dataset.src?await pE(n.dataset.src):void 0;return ss={...e,...t,...window.__NUXT__},(r=ss.config)!=null&&r.public&&(ss.config.public=Zn(ss.config.public)),ss}async function gE(n){return await kS(n,Xe()._payloadRevivers)}function hP(n,e){Xe()._payloadRevivers[n]=e}const fP=[["NuxtError",n=>Fl(n)],["EmptyShallowRef",n=>Ho(n==="_"?void 0:n==="0n"?BigInt(0):zc(n))],["EmptyRef",n=>Rn(n==="_"?void 0:n==="0n"?BigInt(0):zc(n))],["ShallowRef",n=>Ho(n)],["ShallowReactive",n=>$n(n)],["Ref",n=>Rn(n)],["Reactive",n=>Zn(n)]],dP=on({name:"nuxt:revive-payload:client",order:-30,async setup(n){let e,t;for(const[r,s]of fP)hP(r,s);Object.assign(n.payload,([e,t]=gi(()=>n.runWithContext(uP)),e=await e,t(),e)),window.__NUXT__=n.payload}});async function ed(n,e={}){const t=e.document||n.resolvedOptions.document;if(!t||!n.dirty)return;const r={shouldRender:!0,tags:[]};if(await n.hooks.callHook("dom:beforeRender",r),!!r.shouldRender)return n._domUpdatePromise||(n._domUpdatePromise=new Promise(async s=>{var g;const i=new Map,o=new Promise(E=>{n.resolveTags().then(T=>{E(T.map(x=>{const V=i.get(x._d)||0,D={tag:x,id:(V?`${x._d}:${V}`:x._d)||qm(x),shouldRender:!0};return x._d&&hE(x._d)&&i.set(x._d,V+1),D}))})});let a=n._dom;if(!a){a={title:t.title,elMap:new Map().set("htmlAttrs",t.documentElement).set("bodyAttrs",t.body)};for(const E of["body","head"]){const T=(g=t[E])==null?void 0:g.children;for(const x of T){const V=x.tagName.toLowerCase();if(!Hm.has(V))continue;const D=fE({tag:V,props:{}},{innerHTML:x.innerHTML,...x.getAttributeNames().reduce((I,C)=>(I[C]=x.getAttribute(C),I),{})||{}});if(D.key=x.getAttribute("data-hid")||void 0,D._d=Bh(D)||qm(D),a.elMap.has(D._d)){let I=1,C=D._d;for(;a.elMap.has(C);)C=`${D._d}:${I++}`;a.elMap.set(C,x)}else a.elMap.set(D._d,x)}}}a.pendingSideEffects={...a.sideEffects},a.sideEffects={};function c(E,T,x){const V=`${E}:${T}`;a.sideEffects[V]=x,delete a.pendingSideEffects[V]}function u({id:E,$el:T,tag:x}){const V=x.tag.endsWith("Attrs");a.elMap.set(E,T),V||(x.textContent&&x.textContent!==T.textContent&&(T.textContent=x.textContent),x.innerHTML&&x.innerHTML!==T.innerHTML&&(T.innerHTML=x.innerHTML),c(E,"el",()=>{T==null||T.remove(),a.elMap.delete(E)}));for(const D in x.props){if(!Object.prototype.hasOwnProperty.call(x.props,D))continue;const I=x.props[D];if(D.startsWith("on")&&typeof I=="function"){const N=T==null?void 0:T.dataset;if(N&&N[`${D}fired`]){const F=D.slice(0,-5);I.call(T,new Event(F.substring(2)))}T.getAttribute(`data-${D}`)!==""&&((x.tag==="bodyAttrs"?t.defaultView:T).addEventListener(D.substring(2),I.bind(T)),T.setAttribute(`data-${D}`,""));continue}const C=`attr:${D}`;if(D==="class"){if(!I)continue;for(const N of I)V&&c(E,`${C}:${N}`,()=>T.classList.remove(N)),!T.classList.contains(N)&&T.classList.add(N)}else if(D==="style"){if(!I)continue;for(const[N,F]of I)c(E,`${C}:${N}`,()=>{T.style.removeProperty(N)}),T.style.setProperty(N,F)}else I!==!1&&I!==null&&(T.getAttribute(D)!==I&&T.setAttribute(D,I===!0?"":String(I)),V&&c(E,C,()=>T.removeAttribute(D)))}}const h=[],f={bodyClose:void 0,bodyOpen:void 0,head:void 0},m=await o;for(const E of m){const{tag:T,shouldRender:x,id:V}=E;if(x){if(T.tag==="title"){t.title=T.textContent,c("title","",()=>t.title=a.title);continue}E.$el=E.$el||a.elMap.get(V),E.$el?u(E):Hm.has(T.tag)&&h.push(E)}}for(const E of h){const T=E.tag.tagPosition||"head";E.$el=t.createElement(E.tag.tag),u(E),f[T]=f[T]||t.createDocumentFragment(),f[T].appendChild(E.$el)}for(const E of m)await n.hooks.callHook("dom:renderTag",E,t,c);f.head&&t.head.appendChild(f.head),f.bodyOpen&&t.body.insertBefore(f.bodyOpen,t.body.firstChild),f.bodyClose&&t.body.appendChild(f.bodyClose);for(const E in a.pendingSideEffects)a.pendingSideEffects[E]();n._dom=a,await n.hooks.callHook("dom:rendered",{renders:m}),s()}).finally(()=>{n._domUpdatePromise=void 0,n.dirty=!1})),n._domUpdatePromise}function pP(n={}){var r,s,i;const e=((r=n.domOptions)==null?void 0:r.render)||ed;n.document=n.document||(typeof window<"u"?document:void 0);const t=((i=(s=n.document)==null?void 0:s.head.querySelector('script[id="unhead:payload"]'))==null?void 0:i.innerHTML)||!1;return zS({...n,plugins:[...n.plugins||[],{key:"client",hooks:{"entries:updated":e}}],init:[t?JSON.parse(t):!1,...n.init||[]]})}function mP(n,e){let t=0;return()=>{const r=++t;e(()=>{t===r&&n()})}}function gP(n={}){const e=pP({domOptions:{render:mP(()=>ed(e),t=>setTimeout(t,0))},...n});return e.install=nP(e),e}const _P={disableDefaults:!0,disableCapoSorting:!1,plugins:[YS,JS,eP,QS]},yP=on({name:"nuxt:head",enforce:"pre",setup(n){const e=gP(_P);n.vueApp.use(e);{let t=!0;const r=async()=>{t=!1,await ed(e)};e.hooks.hook("dom:beforeRender",s=>{s.shouldRender=!t}),n.hooks.hook("page:start",()=>{t=!0}),n.hooks.hook("page:finish",()=>{n.isHydrating||r()}),n.hooks.hook("app:error",r),n.hooks.hook("app:suspense:resolve",r)}}});/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const ni=typeof document<"u";function _E(n){return typeof n=="object"||"displayName"in n||"props"in n||"__vccOpts"in n}function vP(n){return n.__esModule||n[Symbol.toStringTag]==="Module"||n.default&&_E(n.default)}const Ce=Object.assign;function Qu(n,e){const t={};for(const r in e){const s=e[r];t[r]=mn(s)?s.map(n):n(s)}return t}const xo=()=>{},mn=Array.isArray,yE=/#/g,EP=/&/g,IP=/\//g,TP=/=/g,wP=/\?/g,vE=/\+/g,bP=/%5B/g,AP=/%5D/g,EE=/%5E/g,RP=/%60/g,IE=/%7B/g,SP=/%7C/g,TE=/%7D/g,PP=/%20/g;function td(n){return encodeURI(""+n).replace(SP,"|").replace(bP,"[").replace(AP,"]")}function CP(n){return td(n).replace(IE,"{").replace(TE,"}").replace(EE,"^")}function Hh(n){return td(n).replace(vE,"%2B").replace(PP,"+").replace(yE,"%23").replace(EP,"%26").replace(RP,"`").replace(IE,"{").replace(TE,"}").replace(EE,"^")}function kP(n){return Hh(n).replace(TP,"%3D")}function xP(n){return td(n).replace(yE,"%23").replace(wP,"%3F")}function DP(n){return n==null?"":xP(n).replace(IP,"%2F")}function Wo(n){try{return decodeURIComponent(""+n)}catch{}return""+n}const VP=/\/$/,NP=n=>n.replace(VP,"");function Yu(n,e,t="/"){let r,s={},i="",o="";const a=e.indexOf("#");let c=e.indexOf("?");return a<c&&a>=0&&(c=-1),c>-1&&(r=e.slice(0,c),i=e.slice(c+1,a>-1?a:e.length),s=n(i)),a>-1&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=FP(r??e,t),{fullPath:r+(i&&"?")+i+o,path:r,query:s,hash:Wo(o)}}function OP(n,e){const t=e.query?n(e.query):"";return e.path+(t&&"?")+t+(e.hash||"")}function Jm(n,e){return!e||!n.toLowerCase().startsWith(e.toLowerCase())?n:n.slice(e.length)||"/"}function MP(n,e,t){const r=e.matched.length-1,s=t.matched.length-1;return r>-1&&r===s&&bi(e.matched[r],t.matched[s])&&wE(e.params,t.params)&&n(e.query)===n(t.query)&&e.hash===t.hash}function bi(n,e){return(n.aliasOf||n)===(e.aliasOf||e)}function wE(n,e){if(Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(!LP(n[t],e[t]))return!1;return!0}function LP(n,e){return mn(n)?Xm(n,e):mn(e)?Xm(e,n):n===e}function Xm(n,e){return mn(e)?n.length===e.length&&n.every((t,r)=>t===e[r]):n.length===1&&n[0]===e}function FP(n,e){if(n.startsWith("/"))return n;if(!n)return e;const t=e.split("/"),r=n.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=t.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")i>1&&i--;else break;return t.slice(0,i).join("/")+"/"+r.slice(o).join("/")}const ln={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Qo;(function(n){n.pop="pop",n.push="push"})(Qo||(Qo={}));var Do;(function(n){n.back="back",n.forward="forward",n.unknown=""})(Do||(Do={}));function UP(n){if(!n)if(ni){const e=document.querySelector("base");n=e&&e.getAttribute("href")||"/",n=n.replace(/^\w+:\/\/[^\/]+/,"")}else n="/";return n[0]!=="/"&&n[0]!=="#"&&(n="/"+n),NP(n)}const BP=/^[^#]+#/;function jP(n,e){return n.replace(BP,"#")+e}function $P(n,e){const t=document.documentElement.getBoundingClientRect(),r=n.getBoundingClientRect();return{behavior:e.behavior,left:r.left-t.left-(e.left||0),top:r.top-t.top-(e.top||0)}}const Bl=()=>({left:window.scrollX,top:window.scrollY});function HP(n){let e;if("el"in n){const t=n.el,r=typeof t=="string"&&t.startsWith("#"),s=typeof t=="string"?r?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!s)return;e=$P(s,n)}else e=n;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Zm(n,e){return(history.state?history.state.position-e:-1)+n}const qh=new Map;function qP(n,e){qh.set(n,e)}function KP(n){const e=qh.get(n);return qh.delete(n),e}let zP=()=>location.protocol+"//"+location.host;function bE(n,e){const{pathname:t,search:r,hash:s}=e,i=n.indexOf("#");if(i>-1){let a=s.includes(n.slice(i))?n.slice(i).length:1,c=s.slice(a);return c[0]!=="/"&&(c="/"+c),Jm(c,"")}return Jm(t,n)+r+s}function GP(n,e,t,r){let s=[],i=[],o=null;const a=({state:m})=>{const g=bE(n,location),E=t.value,T=e.value;let x=0;if(m){if(t.value=g,e.value=m,o&&o===E){o=null;return}x=T?m.position-T.position:0}else r(g);s.forEach(V=>{V(t.value,E,{delta:x,type:Qo.pop,direction:x?x>0?Do.forward:Do.back:Do.unknown})})};function c(){o=t.value}function u(m){s.push(m);const g=()=>{const E=s.indexOf(m);E>-1&&s.splice(E,1)};return i.push(g),g}function h(){const{history:m}=window;m.state&&m.replaceState(Ce({},m.state,{scroll:Bl()}),"")}function f(){for(const m of i)m();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",h)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",h,{passive:!0}),{pauseListeners:c,listen:u,destroy:f}}function eg(n,e,t,r=!1,s=!1){return{back:n,current:e,forward:t,replaced:r,position:window.history.length,scroll:s?Bl():null}}function WP(n){const{history:e,location:t}=window,r={value:bE(n,t)},s={value:e.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(c,u,h){const f=n.indexOf("#"),m=f>-1?(t.host&&document.querySelector("base")?n:n.slice(f))+c:zP()+n+c;try{e[h?"replaceState":"pushState"](u,"",m),s.value=u}catch(g){console.error(g),t[h?"replace":"assign"](m)}}function o(c,u){const h=Ce({},e.state,eg(s.value.back,c,s.value.forward,!0),u,{position:s.value.position});i(c,h,!0),r.value=c}function a(c,u){const h=Ce({},s.value,e.state,{forward:c,scroll:Bl()});i(h.current,h,!0);const f=Ce({},eg(r.value,c,null),{position:h.position+1},u);i(c,f,!1),r.value=c}return{location:r,state:s,push:a,replace:o}}function QP(n){n=UP(n);const e=WP(n),t=GP(n,e.state,e.location,e.replace);function r(i,o=!0){o||t.pauseListeners(),history.go(i)}const s=Ce({location:"",base:n,go:r,createHref:jP.bind(null,n)},e,t);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function YP(n){return typeof n=="string"||n&&typeof n=="object"}function AE(n){return typeof n=="string"||typeof n=="symbol"}const RE=Symbol("");var tg;(function(n){n[n.aborted=4]="aborted",n[n.cancelled=8]="cancelled",n[n.duplicated=16]="duplicated"})(tg||(tg={}));function Ai(n,e){return Ce(new Error,{type:n,[RE]:!0},e)}function Mn(n,e){return n instanceof Error&&RE in n&&(e==null||!!(n.type&e))}const ng="[^/]+?",JP={sensitive:!1,strict:!1,start:!0,end:!0},XP=/[.+*?^${}()[\]/\\]/g;function ZP(n,e){const t=Ce({},JP,e),r=[];let s=t.start?"^":"";const i=[];for(const u of n){const h=u.length?[]:[90];t.strict&&!u.length&&(s+="/");for(let f=0;f<u.length;f++){const m=u[f];let g=40+(t.sensitive?.25:0);if(m.type===0)f||(s+="/"),s+=m.value.replace(XP,"\\$&"),g+=40;else if(m.type===1){const{value:E,repeatable:T,optional:x,regexp:V}=m;i.push({name:E,repeatable:T,optional:x});const D=V||ng;if(D!==ng){g+=10;try{new RegExp(`(${D})`)}catch(C){throw new Error(`Invalid custom RegExp for param "${E}" (${D}): `+C.message)}}let I=T?`((?:${D})(?:/(?:${D}))*)`:`(${D})`;f||(I=x&&u.length<2?`(?:/${I})`:"/"+I),x&&(I+="?"),s+=I,g+=20,x&&(g+=-8),T&&(g+=-20),D===".*"&&(g+=-50)}h.push(g)}r.push(h)}if(t.strict&&t.end){const u=r.length-1;r[u][r[u].length-1]+=.7000000000000001}t.strict||(s+="/?"),t.end?s+="$":t.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const o=new RegExp(s,t.sensitive?"":"i");function a(u){const h=u.match(o),f={};if(!h)return null;for(let m=1;m<h.length;m++){const g=h[m]||"",E=i[m-1];f[E.name]=g&&E.repeatable?g.split("/"):g}return f}function c(u){let h="",f=!1;for(const m of n){(!f||!h.endsWith("/"))&&(h+="/"),f=!1;for(const g of m)if(g.type===0)h+=g.value;else if(g.type===1){const{value:E,repeatable:T,optional:x}=g,V=E in u?u[E]:"";if(mn(V)&&!T)throw new Error(`Provided param "${E}" is an array but it is not repeatable (* or + modifiers)`);const D=mn(V)?V.join("/"):V;if(!D)if(x)m.length<2&&(h.endsWith("/")?h=h.slice(0,-1):f=!0);else throw new Error(`Missing required param "${E}"`);h+=D}}return h||"/"}return{re:o,score:r,keys:i,parse:a,stringify:c}}function eC(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=e[t]-n[t];if(r)return r;t++}return n.length<e.length?n.length===1&&n[0]===80?-1:1:n.length>e.length?e.length===1&&e[0]===80?1:-1:0}function SE(n,e){let t=0;const r=n.score,s=e.score;for(;t<r.length&&t<s.length;){const i=eC(r[t],s[t]);if(i)return i;t++}if(Math.abs(s.length-r.length)===1){if(rg(r))return 1;if(rg(s))return-1}return s.length-r.length}function rg(n){const e=n[n.length-1];return n.length>0&&e[e.length-1]<0}const tC={type:0,value:""},nC=/[a-zA-Z0-9_]/;function rC(n){if(!n)return[[]];if(n==="/")return[[tC]];if(!n.startsWith("/"))throw new Error(`Invalid path "${n}"`);function e(g){throw new Error(`ERR (${t})/"${u}": ${g}`)}let t=0,r=t;const s=[];let i;function o(){i&&s.push(i),i=[]}let a=0,c,u="",h="";function f(){u&&(t===0?i.push({type:0,value:u}):t===1||t===2||t===3?(i.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:u,regexp:h,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),u="")}function m(){u+=c}for(;a<n.length;){if(c=n[a++],c==="\\"&&t!==2){r=t,t=4;continue}switch(t){case 0:c==="/"?(u&&f(),o()):c===":"?(f(),t=1):m();break;case 4:m(),t=r;break;case 1:c==="("?t=2:nC.test(c)?m():(f(),t=0,c!=="*"&&c!=="?"&&c!=="+"&&a--);break;case 2:c===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+c:t=3:h+=c;break;case 3:f(),t=0,c!=="*"&&c!=="?"&&c!=="+"&&a--,h="";break;default:e("Unknown state");break}}return t===2&&e(`Unfinished custom RegExp for param "${u}"`),f(),o(),s}function sC(n,e,t){const r=ZP(rC(n.path),t),s=Ce(r,{record:n,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function iC(n,e){const t=[],r=new Map;e=ag({strict:!1,end:!0,sensitive:!1},e);function s(f){return r.get(f)}function i(f,m,g){const E=!g,T=ig(f);T.aliasOf=g&&g.record;const x=ag(e,f),V=[T];if("alias"in f){const C=typeof f.alias=="string"?[f.alias]:f.alias;for(const N of C)V.push(ig(Ce({},T,{components:g?g.record.components:T.components,path:N,aliasOf:g?g.record:T})))}let D,I;for(const C of V){const{path:N}=C;if(m&&N[0]!=="/"){const F=m.record.path,w=F[F.length-1]==="/"?"":"/";C.path=m.record.path+(N&&w+N)}if(D=sC(C,m,x),g?g.alias.push(D):(I=I||D,I!==D&&I.alias.push(D),E&&f.name&&!og(D)&&o(f.name)),PE(D)&&c(D),T.children){const F=T.children;for(let w=0;w<F.length;w++)i(F[w],D,g&&g.children[w])}g=g||D}return I?()=>{o(I)}:xo}function o(f){if(AE(f)){const m=r.get(f);m&&(r.delete(f),t.splice(t.indexOf(m),1),m.children.forEach(o),m.alias.forEach(o))}else{const m=t.indexOf(f);m>-1&&(t.splice(m,1),f.record.name&&r.delete(f.record.name),f.children.forEach(o),f.alias.forEach(o))}}function a(){return t}function c(f){const m=cC(f,t);t.splice(m,0,f),f.record.name&&!og(f)&&r.set(f.record.name,f)}function u(f,m){let g,E={},T,x;if("name"in f&&f.name){if(g=r.get(f.name),!g)throw Ai(1,{location:f});x=g.record.name,E=Ce(sg(m.params,g.keys.filter(I=>!I.optional).concat(g.parent?g.parent.keys.filter(I=>I.optional):[]).map(I=>I.name)),f.params&&sg(f.params,g.keys.map(I=>I.name))),T=g.stringify(E)}else if(f.path!=null)T=f.path,g=t.find(I=>I.re.test(T)),g&&(E=g.parse(T),x=g.record.name);else{if(g=m.name?r.get(m.name):t.find(I=>I.re.test(m.path)),!g)throw Ai(1,{location:f,currentLocation:m});x=g.record.name,E=Ce({},m.params,f.params),T=g.stringify(E)}const V=[];let D=g;for(;D;)V.unshift(D.record),D=D.parent;return{name:x,path:T,params:E,matched:V,meta:aC(V)}}n.forEach(f=>i(f));function h(){t.length=0,r.clear()}return{addRoute:i,resolve:u,removeRoute:o,clearRoutes:h,getRoutes:a,getRecordMatcher:s}}function sg(n,e){const t={};for(const r of e)r in n&&(t[r]=n[r]);return t}function ig(n){const e={path:n.path,redirect:n.redirect,name:n.name,meta:n.meta||{},aliasOf:n.aliasOf,beforeEnter:n.beforeEnter,props:oC(n),children:n.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in n?n.components||null:n.component&&{default:n.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function oC(n){const e={},t=n.props||!1;if("component"in n)e.default=t;else for(const r in n.components)e[r]=typeof t=="object"?t[r]:t;return e}function og(n){for(;n;){if(n.record.aliasOf)return!0;n=n.parent}return!1}function aC(n){return n.reduce((e,t)=>Ce(e,t.meta),{})}function ag(n,e){const t={};for(const r in n)t[r]=r in e?e[r]:n[r];return t}function cC(n,e){let t=0,r=e.length;for(;t!==r;){const i=t+r>>1;SE(n,e[i])<0?r=i:t=i+1}const s=lC(n);return s&&(r=e.lastIndexOf(s,r-1)),r}function lC(n){let e=n;for(;e=e.parent;)if(PE(e)&&SE(n,e)===0)return e}function PE({record:n}){return!!(n.name||n.components&&Object.keys(n.components).length||n.redirect)}function uC(n){const e={};if(n===""||n==="?")return e;const r=(n[0]==="?"?n.slice(1):n).split("&");for(let s=0;s<r.length;++s){const i=r[s].replace(vE," "),o=i.indexOf("="),a=Wo(o<0?i:i.slice(0,o)),c=o<0?null:Wo(i.slice(o+1));if(a in e){let u=e[a];mn(u)||(u=e[a]=[u]),u.push(c)}else e[a]=c}return e}function cg(n){let e="";for(let t in n){const r=n[t];if(t=kP(t),r==null){r!==void 0&&(e+=(e.length?"&":"")+t);continue}(mn(r)?r.map(i=>i&&Hh(i)):[r&&Hh(r)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+t,i!=null&&(e+="="+i))})}return e}function hC(n){const e={};for(const t in n){const r=n[t];r!==void 0&&(e[t]=mn(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}const fC=Symbol(""),lg=Symbol(""),jl=Symbol(""),nd=Symbol(""),Kh=Symbol("");function lo(){let n=[];function e(r){return n.push(r),()=>{const s=n.indexOf(r);s>-1&&n.splice(s,1)}}function t(){n=[]}return{add:e,list:()=>n.slice(),reset:t}}function wr(n,e,t,r,s,i=o=>o()){const o=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((a,c)=>{const u=m=>{m===!1?c(Ai(4,{from:t,to:e})):m instanceof Error?c(m):YP(m)?c(Ai(2,{from:e,to:m})):(o&&r.enterCallbacks[s]===o&&typeof m=="function"&&o.push(m),a())},h=i(()=>n.call(r&&r.instances[s],e,t,u));let f=Promise.resolve(h);n.length<3&&(f=f.then(u)),f.catch(m=>c(m))})}function Ju(n,e,t,r,s=i=>i()){const i=[];for(const o of n)for(const a in o.components){let c=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(_E(c)){const h=(c.__vccOpts||c)[e];h&&i.push(wr(h,t,r,o,a,s))}else{let u=c();i.push(()=>u.then(h=>{if(!h)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const f=vP(h)?h.default:h;o.mods[a]=h,o.components[a]=f;const g=(f.__vccOpts||f)[e];return g&&wr(g,t,r,o,a,s)()}))}}return i}function ug(n){const e=Pt(jl),t=Pt(nd),r=zt(()=>{const c=Be(n.to);return e.resolve(c)}),s=zt(()=>{const{matched:c}=r.value,{length:u}=c,h=c[u-1],f=t.matched;if(!h||!f.length)return-1;const m=f.findIndex(bi.bind(null,h));if(m>-1)return m;const g=hg(c[u-2]);return u>1&&hg(h)===g&&f[f.length-1].path!==g?f.findIndex(bi.bind(null,c[u-2])):m}),i=zt(()=>s.value>-1&&_C(t.params,r.value.params)),o=zt(()=>s.value>-1&&s.value===t.matched.length-1&&wE(t.params,r.value.params));function a(c={}){if(gC(c)){const u=e[Be(n.replace)?"replace":"push"](Be(n.to)).catch(xo);return n.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:r,href:zt(()=>r.value.href),isActive:i,isExactActive:o,navigate:a}}function dC(n){return n.length===1?n[0]:n}const pC=er({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:ug,setup(n,{slots:e}){const t=Zn(ug(n)),{options:r}=Pt(jl),s=zt(()=>({[fg(n.activeClass,r.linkActiveClass,"router-link-active")]:t.isActive,[fg(n.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const i=e.default&&dC(e.default(t));return n.custom?i:St("a",{"aria-current":t.isExactActive?n.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:s.value},i)}}}),mC=pC;function gC(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)&&!n.defaultPrevented&&!(n.button!==void 0&&n.button!==0)){if(n.currentTarget&&n.currentTarget.getAttribute){const e=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return n.preventDefault&&n.preventDefault(),!0}}function _C(n,e){for(const t in e){const r=e[t],s=n[t];if(typeof r=="string"){if(r!==s)return!1}else if(!mn(s)||s.length!==r.length||r.some((i,o)=>i!==s[o]))return!1}return!0}function hg(n){return n?n.aliasOf?n.aliasOf.path:n.path:""}const fg=(n,e,t)=>n??e??t,yC=er({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(n,{attrs:e,slots:t}){const r=Pt(Kh),s=zt(()=>n.route||r.value),i=Pt(lg,0),o=zt(()=>{let u=Be(i);const{matched:h}=s.value;let f;for(;(f=h[u])&&!f.components;)u++;return u}),a=zt(()=>s.value.matched[o.value]);Sn(lg,zt(()=>o.value+1)),Sn(fC,a),Sn(Kh,s);const c=Rn();return Vr(()=>[c.value,a.value,n.name],([u,h,f],[m,g,E])=>{h&&(h.instances[f]=u,g&&g!==h&&u&&u===m&&(h.leaveGuards.size||(h.leaveGuards=g.leaveGuards),h.updateGuards.size||(h.updateGuards=g.updateGuards))),u&&h&&(!g||!bi(h,g)||!m)&&(h.enterCallbacks[f]||[]).forEach(T=>T(u))},{flush:"post"}),()=>{const u=s.value,h=n.name,f=a.value,m=f&&f.components[h];if(!m)return dg(t.default,{Component:m,route:u});const g=f.props[h],E=g?g===!0?u.params:typeof g=="function"?g(u):g:null,x=St(m,Ce({},E,e,{onVnodeUnmounted:V=>{V.component.isUnmounted&&(f.instances[h]=null)},ref:c}));return dg(t.default,{Component:x,route:u})||x}}});function dg(n,e){if(!n)return null;const t=n(e);return t.length===1?t[0]:t}const CE=yC;function vC(n){const e=iC(n.routes,n),t=n.parseQuery||uC,r=n.stringifyQuery||cg,s=n.history,i=lo(),o=lo(),a=lo(),c=Ho(ln);let u=ln;ni&&n.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=Qu.bind(null,$=>""+$),f=Qu.bind(null,DP),m=Qu.bind(null,Wo);function g($,te){let X,ie;return AE($)?(X=e.getRecordMatcher($),ie=te):ie=$,e.addRoute(ie,X)}function E($){const te=e.getRecordMatcher($);te&&e.removeRoute(te)}function T(){return e.getRoutes().map($=>$.record)}function x($){return!!e.getRecordMatcher($)}function V($,te){if(te=Ce({},te||c.value),typeof $=="string"){const P=Yu(t,$,te.path),L=e.resolve({path:P.path},te),H=s.createHref(P.fullPath);return Ce(P,L,{params:m(L.params),hash:Wo(P.hash),redirectedFrom:void 0,href:H})}let X;if($.path!=null)X=Ce({},$,{path:Yu(t,$.path,te.path).path});else{const P=Ce({},$.params);for(const L in P)P[L]==null&&delete P[L];X=Ce({},$,{params:f(P)}),te.params=f(te.params)}const ie=e.resolve(X,te),we=$.hash||"";ie.params=h(m(ie.params));const Ne=OP(r,Ce({},$,{hash:CP(we),path:ie.path})),R=s.createHref(Ne);return Ce({fullPath:Ne,hash:we,query:r===cg?hC($.query):$.query||{}},ie,{redirectedFrom:void 0,href:R})}function D($){return typeof $=="string"?Yu(t,$,c.value.path):Ce({},$)}function I($,te){if(u!==$)return Ai(8,{from:te,to:$})}function C($){return w($)}function N($){return C(Ce(D($),{replace:!0}))}function F($){const te=$.matched[$.matched.length-1];if(te&&te.redirect){const{redirect:X}=te;let ie=typeof X=="function"?X($):X;return typeof ie=="string"&&(ie=ie.includes("?")||ie.includes("#")?ie=D(ie):{path:ie},ie.params={}),Ce({query:$.query,hash:$.hash,params:ie.path!=null?{}:$.params},ie)}}function w($,te){const X=u=V($),ie=c.value,we=$.state,Ne=$.force,R=$.replace===!0,P=F(X);if(P)return w(Ce(D(P),{state:typeof P=="object"?Ce({},we,P.state):we,force:Ne,replace:R}),te||X);const L=X;L.redirectedFrom=te;let H;return!Ne&&MP(r,ie,X)&&(H=Ai(16,{to:L,from:ie}),Qt(ie,ie,!0,!1)),(H?Promise.resolve(H):b(L,ie)).catch(j=>Mn(j)?Mn(j,2)?j:an(j):ne(j,L,ie)).then(j=>{if(j){if(Mn(j,2))return w(Ce({replace:R},D(j.to),{state:typeof j.to=="object"?Ce({},we,j.to.state):we,force:Ne}),te||L)}else j=S(L,ie,!0,R,we);return k(L,ie,j),j})}function y($,te){const X=I($,te);return X?Promise.reject(X):Promise.resolve()}function v($){const te=ar.values().next().value;return te&&typeof te.runWithContext=="function"?te.runWithContext($):$()}function b($,te){let X;const[ie,we,Ne]=EC($,te);X=Ju(ie.reverse(),"beforeRouteLeave",$,te);for(const P of ie)P.leaveGuards.forEach(L=>{X.push(wr(L,$,te))});const R=y.bind(null,$,te);return X.push(R),Lt(X).then(()=>{X=[];for(const P of i.list())X.push(wr(P,$,te));return X.push(R),Lt(X)}).then(()=>{X=Ju(we,"beforeRouteUpdate",$,te);for(const P of we)P.updateGuards.forEach(L=>{X.push(wr(L,$,te))});return X.push(R),Lt(X)}).then(()=>{X=[];for(const P of Ne)if(P.beforeEnter)if(mn(P.beforeEnter))for(const L of P.beforeEnter)X.push(wr(L,$,te));else X.push(wr(P.beforeEnter,$,te));return X.push(R),Lt(X)}).then(()=>($.matched.forEach(P=>P.enterCallbacks={}),X=Ju(Ne,"beforeRouteEnter",$,te,v),X.push(R),Lt(X))).then(()=>{X=[];for(const P of o.list())X.push(wr(P,$,te));return X.push(R),Lt(X)}).catch(P=>Mn(P,8)?P:Promise.reject(P))}function k($,te,X){a.list().forEach(ie=>v(()=>ie($,te,X)))}function S($,te,X,ie,we){const Ne=I($,te);if(Ne)return Ne;const R=te===ln,P=ni?history.state:{};X&&(ie||R?s.replace($.fullPath,Ce({scroll:R&&P&&P.scroll},we)):s.push($.fullPath,we)),c.value=$,Qt($,te,X,R),an()}let A;function ye(){A||(A=s.listen(($,te,X)=>{if(!yn.listening)return;const ie=V($),we=F(ie);if(we){w(Ce(we,{replace:!0,force:!0}),ie).catch(xo);return}u=ie;const Ne=c.value;ni&&qP(Zm(Ne.fullPath,X.delta),Bl()),b(ie,Ne).catch(R=>Mn(R,12)?R:Mn(R,2)?(w(Ce(D(R.to),{force:!0}),ie).then(P=>{Mn(P,20)&&!X.delta&&X.type===Qo.pop&&s.go(-1,!1)}).catch(xo),Promise.reject()):(X.delta&&s.go(-X.delta,!1),ne(R,ie,Ne))).then(R=>{R=R||S(ie,Ne,!1),R&&(X.delta&&!Mn(R,8)?s.go(-X.delta,!1):X.type===Qo.pop&&Mn(R,20)&&s.go(-1,!1)),k(ie,Ne,R)}).catch(xo)}))}let Ee=lo(),se=lo(),de;function ne($,te,X){an($);const ie=se.list();return ie.length?ie.forEach(we=>we($,te,X)):console.error($),Promise.reject($)}function Ke(){return de&&c.value!==ln?Promise.resolve():new Promise(($,te)=>{Ee.add([$,te])})}function an($){return de||(de=!$,ye(),Ee.list().forEach(([te,X])=>$?X($):te()),Ee.reset()),$}function Qt($,te,X,ie){const{scrollBehavior:we}=n;if(!ni||!we)return Promise.resolve();const Ne=!X&&KP(Zm($.fullPath,0))||(ie||!X)&&history.state&&history.state.scroll||null;return ga().then(()=>we($,te,Ne)).then(R=>R&&HP(R)).catch(R=>ne(R,$,te))}const ze=$=>s.go($);let Ge;const ar=new Set,yn={currentRoute:c,listening:!0,addRoute:g,removeRoute:E,clearRoutes:e.clearRoutes,hasRoute:x,getRoutes:T,resolve:V,options:n,push:C,replace:N,go:ze,back:()=>ze(-1),forward:()=>ze(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:se.add,isReady:Ke,install($){const te=this;$.component("RouterLink",mC),$.component("RouterView",CE),$.config.globalProperties.$router=te,Object.defineProperty($.config.globalProperties,"$route",{enumerable:!0,get:()=>Be(c)}),ni&&!Ge&&c.value===ln&&(Ge=!0,C(s.location).catch(we=>{}));const X={};for(const we in ln)Object.defineProperty(X,we,{get:()=>c.value[we],enumerable:!0});$.provide(jl,te),$.provide(nd,$n(X)),$.provide(Kh,c);const ie=$.unmount;ar.add($),$.unmount=function(){ar.delete($),ar.size<1&&(u=ln,A&&A(),A=null,c.value=ln,Ge=!1,de=!1),ie()}}};function Lt($){return $.reduce((te,X)=>te.then(()=>v(X)),Promise.resolve())}return yn}function EC(n,e){const t=[],r=[],s=[],i=Math.max(e.matched.length,n.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(n.matched.find(u=>bi(u,a))?r.push(a):t.push(a));const c=n.matched[o];c&&(e.matched.find(u=>bi(u,c))||s.push(c))}return[t,r,s]}function XM(){return Pt(jl)}function IC(n){return Pt(nd)}const TC=/(:\w+)\([^)]+\)/g,wC=/(:\w+)[?+*]/g,bC=/:\w+/g,AC=(n,e)=>e.path.replace(TC,"$1").replace(wC,"$1").replace(bC,t=>{var r;return((r=n.params[t.slice(1)])==null?void 0:r.toString())||""}),zh=(n,e)=>{const t=n.route.matched.find(s=>{var i;return((i=s.components)==null?void 0:i.default)===n.Component.type}),r=e??(t==null?void 0:t.meta.key)??(t&&AC(n.route,t));return typeof r=="function"?r(n.route):r},RC=(n,e)=>({default:()=>n?St(wA,n===!0?{}:n,e):e});function rd(n){return Array.isArray(n)?n:[n]}const Xu=[{name:"index",path:"/",component:()=>Tn(()=>import("./hZk-Juaz.js"),__vite__mapDeps([0,1,2]),import.meta.url)},{name:"login",path:"/login",component:()=>Tn(()=>import("./CED3FtRe.js"),__vite__mapDeps([3,1,2]),import.meta.url)},{name:"register",path:"/register",component:()=>Tn(()=>import("./BnnO2Fv5.js"),__vite__mapDeps([4,1,2]),import.meta.url)},{name:"dashboard",path:"/dashboard",component:()=>Tn(()=>import("./cUgYPMJs.js"),__vite__mapDeps([5,6,2]),import.meta.url)},{name:"terms-id",path:"/terms/:id()",component:()=>Tn(()=>import("./DnCs4Hod.js"),__vite__mapDeps([7,1,8,6,2]),import.meta.url)},{name:"forgot-password",path:"/forgot-password",component:()=>Tn(()=>import("./XfjbnB_g.js"),__vite__mapDeps([9,1,2]),import.meta.url)}],kE=(n,e)=>({default:()=>{var t;return n?St(A0,n===!0?{}:n,e):(t=e.default)==null?void 0:t.call(e)}}),SC=/(:\w+)\([^)]+\)/g,PC=/(:\w+)[?+*]/g,CC=/:\w+/g;function pg(n){const e=(n==null?void 0:n.meta.key)??n.path.replace(SC,"$1").replace(PC,"$1").replace(CC,t=>{var r;return((r=n.params[t.slice(1)])==null?void 0:r.toString())||""});return typeof e=="function"?e(n):e}function kC(n,e){return n===e||e===ln?!1:pg(n)!==pg(e)?!0:!n.matched.every((r,s)=>{var i,o;return r.components&&r.components.default===((o=(i=e.matched[s])==null?void 0:i.components)==null?void 0:o.default)})}const xC={scrollBehavior(n,e,t){var u;const r=Xe(),s=((u=$t().options)==null?void 0:u.scrollBehaviorType)??"auto";let i=t||void 0;const o=typeof n.meta.scrollToTop=="function"?n.meta.scrollToTop(n,e):n.meta.scrollToTop;if(!i&&e&&n&&o!==!1&&kC(n,e)&&(i={left:0,top:0}),n.path===e.path)return e.hash&&!n.hash?{left:0,top:0}:n.hash?{el:n.hash,top:xE(n.hash),behavior:s}:!1;const a=h=>!!(h.meta.pageTransition??Mh),c=a(e)&&a(n)?"page:transition:finish":"page:loading:end";return new Promise(h=>{r.hooks.hookOnce(c,()=>{requestAnimationFrame(()=>h(DC(n,"instant",i)))})})}};function xE(n){try{const e=document.querySelector(n);if(e)return(Number.parseFloat(getComputedStyle(e).scrollMarginTop)||0)+(Number.parseFloat(getComputedStyle(document.documentElement).scrollPaddingTop)||0)}catch{}return 0}function DC(n,e,t){return t||(n.hash?{el:n.hash,top:xE(n.hash),behavior:e}:{left:0,top:0,behavior:e})}const VC={hashMode:!1,scrollBehaviorType:"auto"},Xt={...VC,...xC},NC=async n=>{var c;let e,t;if(!((c=n.meta)!=null&&c.validate))return;const r=Xe(),s=$t(),i=([e,t]=gi(()=>Promise.resolve(n.meta.validate(n))),e=await e,t(),e);if(i===!0)return;const o=Fl({statusCode:i&&i.statusCode||404,statusMessage:i&&i.statusMessage||`Page Not Found: ${n.fullPath}`,data:{path:n.fullPath}}),a=s.beforeResolve(u=>{if(a(),u===n){const h=s.afterEach(async()=>{h(),await r.runWithContext(()=>Ir(o)),window==null||window.history.pushState({},"",n.fullPath)});return!1}})},OC=async n=>{let e,t;const r=([e,t]=gi(()=>Zf({path:n.path})),e=await e,t(),e);if(r.redirect)return Ms(r.redirect,{acceptRelative:!0})?(window.location.href=r.redirect,!1):r.redirect},MC=[NC,OC],Vo={auth:()=>Tn(()=>import("./CFbww66L.js"),__vite__mapDeps([10,2]),import.meta.url)};function LC(n,e,t){const{pathname:r,search:s,hash:i}=e,o=n.indexOf("#");if(o>-1){const u=i.includes(n.slice(o))?n.slice(o).length:1;let h=i.slice(u);return h[0]!=="/"&&(h="/"+h),Nm(h,"")}const a=Nm(r,n),c=!t||RR(a,t,{trailingSlash:!0})?a:t;return c+(c.includes("?")?"":s)+i}const FC=on({name:"nuxt:router",enforce:"pre",async setup(n){var x;let e,t,r=Ea().app.baseURL;const s=((x=Xt.history)==null?void 0:x.call(Xt,r))??QP(r),i=Xt.routes?([e,t]=gi(()=>Xt.routes(Xu)),e=await e,t(),e??Xu):Xu;let o;const a=vC({...Xt,scrollBehavior:(V,D,I)=>{if(D===ln){o=I;return}if(Xt.scrollBehavior){if(a.options.scrollBehavior=Xt.scrollBehavior,"scrollRestoration"in window.history){const C=a.beforeEach(()=>{C(),window.history.scrollRestoration="manual"})}return Xt.scrollBehavior(V,ln,o||I)}},history:s,routes:i});Xt.routes&&Xt.routes,"scrollRestoration"in window.history&&(window.history.scrollRestoration="auto"),n.vueApp.use(a);const c=Ho(a.currentRoute.value);a.afterEach((V,D)=>{c.value=D}),Object.defineProperty(n.vueApp.config.globalProperties,"previousRoute",{get:()=>c.value});const u=LC(r,window.location,n.payload.path),h=Ho(a.currentRoute.value),f=()=>{h.value=a.currentRoute.value};n.hook("page:finish",f),a.afterEach((V,D)=>{var I,C,N,F;((C=(I=V.matched[0])==null?void 0:I.components)==null?void 0:C.default)===((F=(N=D.matched[0])==null?void 0:N.components)==null?void 0:F.default)&&f()});const m={};for(const V in h.value)Object.defineProperty(m,V,{get:()=>h.value[V],enumerable:!0});n._route=$n(m),n._middleware||(n._middleware={global:[],named:{}});const g=Ll();a.afterEach(async(V,D,I)=>{delete n._processingMiddleware,!n.isHydrating&&g.value&&await n.runWithContext(IS),I&&await n.callHook("page:loading:end")});try{[e,t]=gi(()=>a.isReady()),await e,t()}catch(V){[e,t]=gi(()=>n.runWithContext(()=>Ir(V))),await e,t()}const E=u!==a.currentRoute.value.fullPath?a.resolve(u):a.currentRoute.value;f();const T=n.payload.state._layout;return a.beforeEach(async(V,D)=>{var I;await n.callHook("page:loading:start"),V.meta=Zn(V.meta),n.isHydrating&&T&&!Br(V.meta.layout)&&(V.meta.layout=T),n._processingMiddleware=!0;{const C=new Set([...MC,...n._middleware.global]);for(const N of V.matched){const F=N.meta.middleware;if(F)for(const w of rd(F))C.add(w)}{const N=await n.runWithContext(()=>Zf({path:V.path}));if(N.appMiddleware)for(const F in N.appMiddleware)N.appMiddleware[F]?C.add(F):C.delete(F)}for(const N of C){const F=typeof N=="string"?n._middleware.named[N]||await((I=Vo[N])==null?void 0:I.call(Vo).then(w=>w.default||w)):N;if(!F)throw new Error(`Unknown route middleware: '${N}'.`);try{const w=await n.runWithContext(()=>F(V,D));if(!n.payload.serverRendered&&n.isHydrating&&(w===!1||w instanceof Error)){const y=w||vc({statusCode:404,statusMessage:`Page Not Found: ${u}`});return await n.runWithContext(()=>Ir(y)),!1}if(w===!0)continue;if(w===!1)return w;if(w)return uE(w)&&w.fatal&&await n.runWithContext(()=>Ir(w)),w}catch(w){const y=vc(w);return y.fatal&&await n.runWithContext(()=>Ir(y)),y}}}}),a.onError(async()=>{delete n._processingMiddleware,await n.callHook("page:loading:end")}),a.afterEach(async(V,D)=>{V.matched.length===0&&await n.runWithContext(()=>Ir(vc({statusCode:404,fatal:!1,statusMessage:`Page not found: ${V.fullPath}`,data:{path:V.fullPath}})))}),n.hooks.hookOnce("app:created",async()=>{try{"name"in E&&(E.name=void 0),await a.replace({...E,force:!0}),a.options.scrollBehavior=Xt.scrollBehavior}catch(V){await n.runWithContext(()=>Ir(V))}}),{provide:{router:a}}}}),UC=on({name:"theme-init",enforce:"pre",setup(){{const n=localStorage.getItem("theme-hue")||"240",e=localStorage.getItem("color-mode-preference");document.documentElement.style.setProperty("--hue",n);const t=document.createElement("style");t.textContent=`
        :root {
          --hue: ${n};
        }
        
        /* Tema renklerini annda uygula */
        .text-primary-500 { color: oklch(68% 0.19 var(--hue)) !important; }
        .text-primary-600 { color: oklch(60% 0.20 var(--hue)) !important; }
        .text-primary-400 { color: oklch(76% 0.16 var(--hue)) !important; }
        
        .bg-primary-600 { background-color: oklch(60% 0.20 var(--hue)) !important; }
        .bg-primary-700 { background-color: oklch(52% 0.18 var(--hue)) !important; }
        
        .dark .text-primary-400 { color: oklch(76% 0.16 var(--hue)) !important; }
        .dark .text-primary-300 { color: oklch(84% 0.12 var(--hue)) !important; }
        
        /* Arkaplan renkleri */
        body { background-color: oklch(98% 0.003 var(--hue)); }
        .dark body { background-color: oklch(15% 0.008 var(--hue)); }
        
        /* Surface renkleri */
        .bg-surface-light { background-color: oklch(100% 0 0); }
        .dark .bg-surface-dark { background-color: oklch(22% 0.005 var(--hue)); }
      `,document.head.appendChild(t),setTimeout(()=>{document.head.contains(t)&&document.head.removeChild(t)},3e3),e==="dark"?document.documentElement.classList.add("dark"):e==="light"?document.documentElement.classList.remove("dark"):window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&document.documentElement.classList.add("dark")}}}),mg=globalThis.requestIdleCallback||(n=>{const e=Date.now(),t={didTimeout:!1,timeRemaining:()=>Math.max(0,50-(Date.now()-e))};return setTimeout(()=>{n(t)},1)}),ZM=globalThis.cancelIdleCallback||(n=>{clearTimeout(n)}),sd=n=>{const e=Xe();e.isHydrating?e.hooks.hookOnce("app:suspense:resolve",()=>{mg(()=>n())}):mg(()=>n())},BC=on({name:"nuxt:payload",setup(n){const e=new Set;$t().beforeResolve(async(t,r)=>{if(t.path===r.path)return;const s=await Ym(t.path);if(s){for(const i of e)delete n.static.data[i];for(const i in s.data)i in n.static.data||e.add(i),n.static.data[i]=s.data[i]}}),sd(()=>{var t;n.hooks.hook("link:prefetch",async r=>{const{hostname:s}=new URL(r,window.location.href);s===window.location.hostname&&await Ym(r).catch(()=>{console.warn("[nuxt] Error preloading payload for",r)})}),((t=navigator.connection)==null?void 0:t.effectiveType)!=="slow-2g"&&setTimeout(Ul,1e3)})}}),jC=on(()=>{const n=$t();sd(()=>{n.beforeResolve(async()=>{await new Promise(e=>{setTimeout(e,100),requestAnimationFrame(()=>{setTimeout(e,0)})})})})}),$C=on(n=>{let e;async function t(){const r=await Ul();e&&clearTimeout(e),e=setTimeout(t,Um);try{const s=await $fetch(Jf("builds/latest.json")+`?${Date.now()}`);s.id!==r.id&&n.hooks.callHook("app:manifest:update",s)}catch{}}sd(()=>{e=setTimeout(t,Um)})});function HC(n={}){const e=n.path||window.location.pathname;let t={};try{t=zc(sessionStorage.getItem("nuxt:reload")||"{}")}catch{}if(n.force||(t==null?void 0:t.path)!==e||(t==null?void 0:t.expires)<Date.now()){try{sessionStorage.setItem("nuxt:reload",JSON.stringify({path:e,expires:Date.now()+(n.ttl??1e4)}))}catch{}if(n.persistState)try{sessionStorage.setItem("nuxt:reload:state",JSON.stringify({state:Xe().payload.state}))}catch{}window.location.pathname!==e?window.location.href=e:window.location.reload()}}const qC=on({name:"nuxt:chunk-reload",setup(n){const e=$t(),t=Ea(),r=new Set;e.beforeEach(()=>{r.clear()}),n.hook("app:chunkError",({error:i})=>{r.add(i)});function s(i){const a="href"in i&&i.href[0]==="#"?t.app.baseURL+i.href:Yf(t.app.baseURL,i.fullPath);HC({path:a,persistState:!0})}n.hook("app:manifest:update",()=>{e.beforeResolve(s)}),e.onError((i,o)=>{r.has(i)&&s(o)})}}),KC=on({name:"nuxt:global-components"}),Cr={default:Ih(()=>Tn(()=>import("./D8NmufPH.js"),__vite__mapDeps([11,1,12,8,13]),import.meta.url).then(n=>n.default||n))},zC=on({name:"nuxt:prefetch",setup(n){const e=$t();n.hooks.hook("app:mounted",()=>{e.beforeEach(async t=>{var s;const r=(s=t==null?void 0:t.meta)==null?void 0:s.layout;r&&typeof Cr[r]=="function"&&await Cr[r]()})}),n.hooks.hook("link:prefetch",t=>{if(Ms(t))return;const r=e.resolve(t);if(!r)return;const s=r.meta.layout;let i=rd(r.meta.middleware);i=i.filter(o=>typeof o=="string");for(const o of i)typeof Vo[o]=="function"&&Vo[o]();s&&typeof Cr[s]=="function"&&Cr[s]()})}}),GC="__NUXT_COLOR_MODE__",Zu="nuxt-color-mode",WC="localStorage",QC="$s";function Xc(...n){const e=typeof n[n.length-1]=="string"?n.pop():void 0;typeof n[0]!="string"&&n.unshift(e);const[t,r]=n;if(!t||typeof t!="string")throw new TypeError("[nuxt] [useState] key must be a string: "+t);if(r!==void 0&&typeof r!="function")throw new Error("[nuxt] [useState] init must be a function: "+r);const s=QC+t,i=Xe(),o=qy(i.payload.state,s);if(o.value===void 0&&r){const a=r();if(et(a))return i.payload.state[s]=a,a;o.value=a}return o}const Ln=window[GC]||{},YC=on(n=>{const e=Xc("color-mode",()=>Zn({preference:Ln.preference,value:Ln.value,unknown:!1,forced:!1})).value;$t().afterEach(i=>{const o=i.meta.colorMode;o&&o!=="system"?(e.value=o,e.forced=!0):(o==="system"&&console.warn("You cannot force the colorMode to system at the page level."),e.forced=!1,e.value=e.preference==="system"?Ln.getColorScheme():e.preference)});let t;function r(){t||!window.matchMedia||(t=window.matchMedia("(prefers-color-scheme: dark)"),t.addEventListener("change",()=>{!e.forced&&e.preference==="system"&&(e.value=Ln.getColorScheme())}))}function s(i,o){var a,c;switch(i){case"cookie":window.document.cookie=Zu+"="+o;break;case"sessionStorage":(a=window.sessionStorage)==null||a.setItem(Zu,o);break;case"localStorage":default:(c=window.localStorage)==null||c.setItem(Zu,o)}}Vr(()=>e.preference,i=>{e.forced||(i==="system"?(e.value=Ln.getColorScheme(),r()):e.value=i,s(WC,i))},{immediate:!0}),Vr(()=>e.value,(i,o)=>{Ln.removeColorScheme(o),Ln.addColorScheme(i)}),e.preference==="system"&&r(),n.hook("app:mounted",()=>{e.unknown&&(e.preference=Ln.preference,e.value=Ln.value,e.unknown=!1)}),n.provide("colorMode",e)}),JC=()=>{};var gg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DE=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},XC=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=n[t++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=n[t++],o=n[t++],a=n[t++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=n[t++],o=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},VE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const i=n[s],o=s+1<n.length,a=o?n[s+1]:0,c=s+2<n.length,u=c?n[s+2]:0,h=i>>2,f=(i&3)<<4|a>>4;let m=(a&15)<<2|u>>6,g=u&63;c||(g=64,o||(m=64)),r.push(t[h],t[f],t[m],t[g])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(DE(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):XC(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const i=t[n.charAt(s++)],a=s<n.length?t[n.charAt(s)]:0;++s;const u=s<n.length?t[n.charAt(s)]:64;++s;const f=s<n.length?t[n.charAt(s)]:64;if(++s,i==null||a==null||u==null||f==null)throw new ZC;const m=i<<2|a>>4;if(r.push(m),u!==64){const g=a<<4&240|u>>2;if(r.push(g),f!==64){const E=u<<6&192|f;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class ZC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ek=function(n){const e=DE(n);return VE.encodeByteArray(e,!0)},Zc=function(n){return ek(n).replace(/\./g,"")},NE=function(n){try{return VE.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tk=()=>OE().__FIREBASE_DEFAULTS__,nk=()=>{if(typeof process>"u"||typeof gg>"u")return;const n=gg.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},rk=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&NE(n[1]);return e&&JSON.parse(e)},$l=()=>{try{return JC()||tk()||nk()||rk()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},ME=n=>{var e,t;return(t=(e=$l())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},sk=n=>{const e=ME(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},LE=()=>{var n;return(n=$l())===null||n===void 0?void 0:n.config},FE=n=>{var e;return(e=$l())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ok(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,i=n.sub||n.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Zc(JSON.stringify(t)),Zc(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ot(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ak(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ot())}function ck(){var n;const e=(n=$l())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(globalThis.process)==="[object process]"}catch{return!1}}function lk(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function uk(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function hk(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function fk(){const n=ot();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function UE(){return!ck()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function BE(){try{return typeof indexedDB=="object"}catch{return!1}}function dk(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pk="FirebaseError";class nr extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=pk,Object.setPrototypeOf(this,nr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ta.prototype.create)}}class Ta{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?mk(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new nr(s,a,r)}}function mk(n,e){return n.replace(gk,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const gk=/\{\$([^}]+)}/g;function _k(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ws(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const i=n[s],o=e[s];if(_g(i)&&_g(o)){if(!ws(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function _g(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wa(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function yo(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function vo(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function yk(n,e){const t=new vk(n,e);return t.subscribe.bind(t)}class vk{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");Ek(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=eh),s.error===void 0&&(s.error=eh),s.complete===void 0&&(s.complete=eh);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ek(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function eh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tt(n){return n&&n._delegate?n._delegate:n}class bs{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const as="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new ik;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(wk(e))try{this.getOrInitializeService({instanceIdentifier:as})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=as){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=as){return this.instances.has(e)}getOptions(e=as){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,t){var r;const s=this.normalizeInstanceIdentifier(t),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Tk(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=as){return this.component?this.component.multipleInstances?e:as:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Tk(n){return n===as?void 0:n}function wk(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Ik(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ie;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ie||(Ie={}));const Ak={debug:Ie.DEBUG,verbose:Ie.VERBOSE,info:Ie.INFO,warn:Ie.WARN,error:Ie.ERROR,silent:Ie.SILENT},Rk=Ie.INFO,Sk={[Ie.DEBUG]:"log",[Ie.VERBOSE]:"log",[Ie.INFO]:"info",[Ie.WARN]:"warn",[Ie.ERROR]:"error"},Pk=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=Sk[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class id{constructor(e){this.name=e,this._logLevel=Rk,this._logHandler=Pk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ie))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Ak[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ie.DEBUG,...e),this._logHandler(this,Ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ie.VERBOSE,...e),this._logHandler(this,Ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ie.INFO,...e),this._logHandler(this,Ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ie.WARN,...e),this._logHandler(this,Ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ie.ERROR,...e),this._logHandler(this,Ie.ERROR,...e)}}const Ck=(n,e)=>e.some(t=>n instanceof t);let yg,vg;function kk(){return yg||(yg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function xk(){return vg||(vg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const jE=new WeakMap,Gh=new WeakMap,$E=new WeakMap,th=new WeakMap,od=new WeakMap;function Dk(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",i),n.removeEventListener("error",o)},i=()=>{t(Nr(n.result)),s()},o=()=>{r(n.error),s()};n.addEventListener("success",i),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&jE.set(t,n)}).catch(()=>{}),od.set(e,n),e}function Vk(n){if(Gh.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",i),n.removeEventListener("error",o),n.removeEventListener("abort",o)},i=()=>{t(),s()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",i),n.addEventListener("error",o),n.addEventListener("abort",o)});Gh.set(n,e)}let Wh={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Gh.get(n);if(e==="objectStoreNames")return n.objectStoreNames||$E.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Nr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Nk(n){Wh=n(Wh)}function Ok(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(nh(this),e,...t);return $E.set(r,e.sort?e.sort():[e]),Nr(r)}:xk().includes(n)?function(...e){return n.apply(nh(this),e),Nr(jE.get(this))}:function(...e){return Nr(n.apply(nh(this),e))}}function Mk(n){return typeof n=="function"?Ok(n):(n instanceof IDBTransaction&&Vk(n),Ck(n,kk())?new Proxy(n,Wh):n)}function Nr(n){if(n instanceof IDBRequest)return Dk(n);if(th.has(n))return th.get(n);const e=Mk(n);return e!==n&&(th.set(n,e),od.set(e,n)),e}const nh=n=>od.get(n);function Lk(n,e,{blocked:t,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(n,e),a=Nr(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Nr(o.result),c.oldVersion,c.newVersion,Nr(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const Fk=["get","getKey","getAll","getAllKeys","count"],Uk=["put","add","delete","clear"],rh=new Map;function Eg(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(rh.get(e))return rh.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=Uk.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Fk.includes(t)))return;const i=async function(o,...a){const c=this.transaction(o,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[t](...a),s&&c.done]))[0]};return rh.set(e,i),i}Nk(n=>({...n,get:(e,t,r)=>Eg(e,t)||n.get(e,t,r),has:(e,t)=>!!Eg(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(jk(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function jk(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Qh="@firebase/app",Ig="0.11.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wn=new id("@firebase/app"),$k="@firebase/app-compat",Hk="@firebase/analytics-compat",qk="@firebase/analytics",Kk="@firebase/app-check-compat",zk="@firebase/app-check",Gk="@firebase/auth",Wk="@firebase/auth-compat",Qk="@firebase/database",Yk="@firebase/data-connect",Jk="@firebase/database-compat",Xk="@firebase/functions",Zk="@firebase/functions-compat",ex="@firebase/installations",tx="@firebase/installations-compat",nx="@firebase/messaging",rx="@firebase/messaging-compat",sx="@firebase/performance",ix="@firebase/performance-compat",ox="@firebase/remote-config",ax="@firebase/remote-config-compat",cx="@firebase/storage",lx="@firebase/storage-compat",ux="@firebase/firestore",hx="@firebase/vertexai",fx="@firebase/firestore-compat",dx="firebase",px="11.6.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yh="[DEFAULT]",mx={[Qh]:"fire-core",[$k]:"fire-core-compat",[qk]:"fire-analytics",[Hk]:"fire-analytics-compat",[zk]:"fire-app-check",[Kk]:"fire-app-check-compat",[Gk]:"fire-auth",[Wk]:"fire-auth-compat",[Qk]:"fire-rtdb",[Yk]:"fire-data-connect",[Jk]:"fire-rtdb-compat",[Xk]:"fire-fn",[Zk]:"fire-fn-compat",[ex]:"fire-iid",[tx]:"fire-iid-compat",[nx]:"fire-fcm",[rx]:"fire-fcm-compat",[sx]:"fire-perf",[ix]:"fire-perf-compat",[ox]:"fire-rc",[ax]:"fire-rc-compat",[cx]:"fire-gcs",[lx]:"fire-gcs-compat",[ux]:"fire-fst",[fx]:"fire-fst-compat",[hx]:"fire-vertex","fire-js":"fire-js",[dx]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const el=new Map,gx=new Map,Jh=new Map;function Tg(n,e){try{n.container.addComponent(e)}catch(t){Wn.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ri(n){const e=n.name;if(Jh.has(e))return Wn.debug(`There were multiple attempts to register component ${e}.`),!1;Jh.set(e,n);for(const t of el.values())Tg(t,n);for(const t of gx.values())Tg(t,n);return!0}function ad(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function en(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _x={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Or=new Ta("app","Firebase",_x);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new bs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Or.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $i=px;function HE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Yh,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Or.create("bad-app-name",{appName:String(s)});if(t||(t=LE()),!t)throw Or.create("no-options");const i=el.get(s);if(i){if(ws(t,i.options)&&ws(r,i.config))return i;throw Or.create("duplicate-app",{appName:s})}const o=new bk(s);for(const c of Jh.values())o.addComponent(c);const a=new yx(t,r,o);return el.set(s,a),a}function qE(n=Yh){const e=el.get(n);if(!e&&n===Yh&&LE())return HE();if(!e)throw Or.create("no-app",{appName:n});return e}function Mr(n,e,t){var r;let s=(r=mx[n])!==null&&r!==void 0?r:n;t&&(s+=`-${t}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Wn.warn(a.join(" "));return}Ri(new bs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vx="firebase-heartbeat-database",Ex=1,Yo="firebase-heartbeat-store";let sh=null;function KE(){return sh||(sh=Lk(vx,Ex,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Yo)}catch(t){console.warn(t)}}}}).catch(n=>{throw Or.create("idb-open",{originalErrorMessage:n.message})})),sh}async function Ix(n){try{const t=(await KE()).transaction(Yo),r=await t.objectStore(Yo).get(zE(n));return await t.done,r}catch(e){if(e instanceof nr)Wn.warn(e.message);else{const t=Or.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Wn.warn(t.message)}}}async function wg(n,e){try{const r=(await KE()).transaction(Yo,"readwrite");await r.objectStore(Yo).put(e,zE(n)),await r.done}catch(t){if(t instanceof nr)Wn.warn(t.message);else{const r=Or.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Wn.warn(r.message)}}}function zE(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tx=1024,wx=30;class bx{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Rx(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=bg();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>wx){const o=Sx(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Wn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=bg(),{heartbeatsToSend:r,unsentEntries:s}=Ax(this._heartbeatsCache.heartbeats),i=Zc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return Wn.warn(t),""}}}function bg(){return new Date().toISOString().substring(0,10)}function Ax(n,e=Tx){const t=[];let r=n.slice();for(const s of n){const i=t.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Ag(t)>e){i.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),Ag(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class Rx{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return BE()?dk().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Ix(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return wg(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return wg(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Ag(n){return Zc(JSON.stringify({version:2,heartbeats:n})).length}function Sx(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Px(n){Ri(new bs("platform-logger",e=>new Bk(e),"PRIVATE")),Ri(new bs("heartbeat",e=>new bx(e),"PRIVATE")),Mr(Qh,Ig,n),Mr(Qh,Ig,"esm2017"),Mr("fire-js","")}Px("");var Cx="firebase",kx="11.6.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Mr(Cx,kx,"app");function cd(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function GE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const xx=GE,WE=new Ta("auth","Firebase",GE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tl=new id("@firebase/auth");function Dx(n,...e){tl.logLevel<=Ie.WARN&&tl.warn(`Auth (${$i}): ${n}`,...e)}function Tc(n,...e){tl.logLevel<=Ie.ERROR&&tl.error(`Auth (${$i}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gn(n,...e){throw ld(n,...e)}function Pn(n,...e){return ld(n,...e)}function QE(n,e,t){const r=Object.assign(Object.assign({},xx()),{[e]:t});return new Ta("auth","Firebase",r).create(e,{appName:n.name})}function zn(n){return QE(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ld(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return WE.create(n,...e)}function pe(n,e,...t){if(!n)throw ld(e,...t)}function Hn(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Tc(e),new Error(e)}function Qn(n,e){n||Hn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xh(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function Vx(){return Rg()==="http:"||Rg()==="https:"}function Rg(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nx(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Vx()||uk()||"connection"in navigator)?navigator.onLine:!0}function Ox(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e,t){this.shortDelay=e,this.longDelay=t,Qn(t>e,"Short delay should be less than long delay!"),this.isMobile=ak()||hk()}get(){return Nx()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ud(n,e){Qn(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Hn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Hn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Hn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mx={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lx=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Fx=new ba(3e4,6e4);function rr(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function sr(n,e,t,r,s={}){return JE(n,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=wa(Object.assign({key:n.config.apiKey},o)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);const u=Object.assign({method:e,headers:c},i);return lk()||(u.referrerPolicy="no-referrer"),YE.fetch()(await XE(n,n.config.apiHost,t,a),u)})}async function JE(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},Mx),e);try{const s=new Bx(n),i=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw lc(n,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw lc(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw lc(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw lc(n,"user-disabled",o);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw QE(n,h,u);gn(n,h)}}catch(s){if(s instanceof nr)throw s;gn(n,"network-request-failed",{message:String(s)})}}async function Aa(n,e,t,r,s={}){const i=await sr(n,e,t,r,s);return"mfaPendingCredential"in i&&gn(n,"multi-factor-auth-required",{_serverResponse:i}),i}async function XE(n,e,t,r){const s=`${e}${t}?${r}`,i=n,o=i.config.emulator?ud(n.config,s):`${n.config.apiScheme}://${s}`;return Lx.includes(t)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function Ux(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Bx{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Pn(this.auth,"network-request-failed")),Fx.get())})}}function lc(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=Pn(n,e,r);return s.customData._tokenResponse=t,s}function Sg(n){return n!==void 0&&n.enterprise!==void 0}class jx{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Ux(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function $x(n,e){return sr(n,"GET","/v2/recaptchaConfig",rr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hx(n,e){return sr(n,"POST","/v1/accounts:delete",e)}async function nl(n,e){return sr(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function No(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function qx(n,e=!1){const t=tt(n),r=await t.getIdToken(e),s=hd(r);pe(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:No(ih(s.auth_time)),issuedAtTime:No(ih(s.iat)),expirationTime:No(ih(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function ih(n){return Number(n)*1e3}function hd(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Tc("JWT malformed, contained fewer than 3 sections"),null;try{const s=NE(t);return s?JSON.parse(s):(Tc("Failed to decode base64 JWT payload"),null)}catch(s){return Tc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Pg(n){const e=hd(n);return pe(e,"internal-error"),pe(typeof e.exp<"u","internal-error"),pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jo(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof nr&&Kx(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function Kx({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=No(this.lastLoginAt),this.creationTime=No(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rl(n){var e;const t=n.auth,r=await n.getIdToken(),s=await Jo(n,nl(t,{idToken:r}));pe(s==null?void 0:s.users.length,t,"internal-error");const i=s.users[0];n._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?ZE(i.providerUserInfo):[],a=Wx(n.providerData,o),c=n.isAnonymous,u=!(n.email&&i.passwordHash)&&!(a!=null&&a.length),h=c?u:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Zh(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(n,f)}async function Gx(n){const e=tt(n);await rl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Wx(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function ZE(n){return n.map(e=>{var{providerId:t}=e,r=cd(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qx(n,e){const t=await JE(n,{},async()=>{const r=wa({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=n.config,o=await XE(n,s,"/v1/token",`key=${i}`),a=await n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",YE.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Yx(n,e){return sr(n,"POST","/v2/accounts:revokeToken",rr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){pe(e.idToken,"internal-error"),pe(typeof e.idToken<"u","internal-error"),pe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Pg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){pe(e.length!==0,"internal-error");const t=Pg(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:i}=await Qx(e,t);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:i}=t,o=new _i;return r&&(pe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(pe(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(pe(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new _i,this.toJSON())}_performRefresh(){return Hn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pr(n,e){pe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class fn{constructor(e){var{uid:t,auth:r,stsTokenManager:s}=e,i=cd(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new zx(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Zh(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Jo(this,this.stsTokenManager.getToken(this.auth,e));return pe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return qx(this,e)}reload(){return Gx(this)}_assign(e){this!==e&&(pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new fn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await rl(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(en(this.auth.app))return Promise.reject(zn(this.auth));const e=await this.getIdToken();return await Jo(this,Hx(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,s,i,o,a,c,u,h;const f=(r=t.displayName)!==null&&r!==void 0?r:void 0,m=(s=t.email)!==null&&s!==void 0?s:void 0,g=(i=t.phoneNumber)!==null&&i!==void 0?i:void 0,E=(o=t.photoURL)!==null&&o!==void 0?o:void 0,T=(a=t.tenantId)!==null&&a!==void 0?a:void 0,x=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,V=(u=t.createdAt)!==null&&u!==void 0?u:void 0,D=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:I,emailVerified:C,isAnonymous:N,providerData:F,stsTokenManager:w}=t;pe(I&&w,e,"internal-error");const y=_i.fromJSON(this.name,w);pe(typeof I=="string",e,"internal-error"),pr(f,e.name),pr(m,e.name),pe(typeof C=="boolean",e,"internal-error"),pe(typeof N=="boolean",e,"internal-error"),pr(g,e.name),pr(E,e.name),pr(T,e.name),pr(x,e.name),pr(V,e.name),pr(D,e.name);const v=new fn({uid:I,auth:e,email:m,emailVerified:C,displayName:f,isAnonymous:N,photoURL:E,phoneNumber:g,tenantId:T,stsTokenManager:y,createdAt:V,lastLoginAt:D});return F&&Array.isArray(F)&&(v.providerData=F.map(b=>Object.assign({},b))),x&&(v._redirectEventId=x),v}static async _fromIdTokenResponse(e,t,r=!1){const s=new _i;s.updateFromServerResponse(t);const i=new fn({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await rl(i),i}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];pe(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?ZE(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new _i;a.updateFromIdToken(r);const c=new fn({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Zh(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cg=new Map;function qn(n){Qn(n instanceof Function,"Expected a class definition");let e=Cg.get(n);return e?(Qn(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Cg.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}eI.type="NONE";const kg=eI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wc(n,e,t){return`firebase:${n}:${e}:${t}`}class yi{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=wc(this.userKey,s.apiKey,i),this.fullPersistenceKey=wc("persistence",s.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await nl(this.auth,{idToken:e}).catch(()=>{});return t?fn._fromGetAccountInfoResponse(this.auth,t,e):null}return fn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new yi(qn(kg),e,r);const s=(await Promise.all(t.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||qn(kg);const o=wc(r,e.config.apiKey,e.name);let a=null;for(const u of t)try{const h=await u._get(o);if(h){let f;if(typeof h=="string"){const m=await nl(e,{idToken:h}).catch(()=>{});if(!m)break;f=await fn._fromGetAccountInfoResponse(e,m,h)}else f=fn._fromJSON(e,h);u!==i&&(a=f),i=u;break}}catch{}const c=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new yi(i,e,r):(i=c[0],a&&await i._set(o,a.toJSON()),await Promise.all(t.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new yi(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xg(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(sI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(tI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(oI(e))return"Blackberry";if(aI(e))return"Webos";if(nI(e))return"Safari";if((e.includes("chrome/")||rI(e))&&!e.includes("edge/"))return"Chrome";if(iI(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function tI(n=ot()){return/firefox\//i.test(n)}function nI(n=ot()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function rI(n=ot()){return/crios\//i.test(n)}function sI(n=ot()){return/iemobile/i.test(n)}function iI(n=ot()){return/android/i.test(n)}function oI(n=ot()){return/blackberry/i.test(n)}function aI(n=ot()){return/webos/i.test(n)}function fd(n=ot()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Jx(n=ot()){var e;return fd(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Xx(){return fk()&&document.documentMode===10}function cI(n=ot()){return fd(n)||iI(n)||aI(n)||oI(n)||/windows phone/i.test(n)||sI(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lI(n,e=[]){let t;switch(n){case"Browser":t=xg(ot());break;case"Worker":t=`${xg(ot())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${$i}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=i=>new Promise((o,a)=>{try{const c=e(i);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eD(n,e={}){return sr(n,"GET","/v2/passwordPolicy",rr(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tD=6;class nD{constructor(e){var t,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:tD,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,s,i,o,a;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsLowercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Dg(this),this.idTokenSubscription=new Dg(this),this.beforeStateQueue=new Zx(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=WE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=qn(t)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await yi.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await nl(this,{idToken:e}),r=await fn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(en(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&(c!=null&&c.user)&&(s=c.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await rl(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Ox()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(en(this.app))return Promise.reject(zn(this));const t=e?tt(e):null;return t&&pe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return en(this.app)?Promise.reject(zn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return en(this.app)?Promise.reject(zn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(qn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await eD(this),t=new nD(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ta("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await Yx(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&qn(e)||this._popupRedirectResolver;pe(t,this,"argument-error"),this.redirectPersistenceManager=await yi.create(this,[qn(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const i=typeof t=="function"?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(pe(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof t=="function"){const c=e.addObserver(t,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(t);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=lI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;if(en(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&Dx(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Gr(n){return tt(n)}class Dg{constructor(e){this.auth=e,this.observer=null,this.addObserver=yk(t=>this.observer=t)}get next(){return pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hl={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function sD(n){Hl=n}function uI(n){return Hl.loadJS(n)}function iD(){return Hl.recaptchaEnterpriseScript}function oD(){return Hl.gapiScript}function aD(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class cD{constructor(){this.enterprise=new lD}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class lD{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const uD="recaptcha-enterprise",hI="NO_RECAPTCHA";class hD{constructor(e){this.type=uD,this.auth=Gr(e)}async verify(e="verify",t=!1){async function r(i){if(!t){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{$x(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new jx(c);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(c=>{a(c)})})}function s(i,o,a){const c=window.grecaptcha;Sg(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(hI)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new cD().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(a=>{if(!t&&Sg(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=iD();c.length!==0&&(c+=a),uI(c).then(()=>{s(a,i,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function Vg(n,e,t,r=!1,s=!1){const i=new hD(n);let o;if(s)o=hI;else try{o=await i.verify(t)}catch{o=await i.verify(t,!0)}const a=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const c=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const c=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function sl(n,e,t,r,s){var i;if(!((i=n._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await Vg(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await Vg(n,e,t,t==="getOobCode");return r(n,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fD(n,e){const t=ad(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),i=t.getOptions();if(ws(i,e??{}))return s;gn(s,"already-initialized")}return t.initialize({options:e})}function dD(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(qn);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function pD(n,e,t){const r=Gr(n);pe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=fI(e),{host:o,port:a}=mD(e),c=a===null?"":`:${a}`,u={url:`${i}//${o}${c}/`},h=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){pe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),pe(ws(u,r.config.emulator)&&ws(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,gD()}function fI(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function mD(n){const e=fI(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Ng(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Ng(o)}}}function Ng(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function gD(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Hn("not implemented")}_getIdTokenResponse(e){return Hn("not implemented")}_linkToIdToken(e,t){return Hn("not implemented")}_getReauthenticationResolver(e){return Hn("not implemented")}}async function _D(n,e){return sr(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yD(n,e){return Aa(n,"POST","/v1/accounts:signInWithPassword",rr(n,e))}async function vD(n,e){return sr(n,"POST","/v1/accounts:sendOobCode",rr(n,e))}async function ED(n,e){return vD(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ID(n,e){return Aa(n,"POST","/v1/accounts:signInWithEmailLink",rr(n,e))}async function TD(n,e){return Aa(n,"POST","/v1/accounts:signInWithEmailLink",rr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo extends dd{constructor(e,t,r,s=null){super("password",r),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new Xo(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Xo(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return sl(e,t,"signInWithPassword",yD);case"emailLink":return ID(e,{email:this._email,oobCode:this._password});default:gn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return sl(e,r,"signUpPassword",_D);case"emailLink":return TD(e,{idToken:t,email:this._email,oobCode:this._password});default:gn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vi(n,e){return Aa(n,"POST","/v1/accounts:signInWithIdp",rr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wD="http://localhost";class As extends dd{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new As(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):gn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=t,i=cd(t,["providerId","signInMethod"]);if(!r||!s)return null;const o=new As(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return vi(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,vi(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,vi(e,t)}buildRequest(){const e={requestUri:wD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=wa(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bD(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function AD(n){const e=yo(vo(n)).link,t=e?yo(vo(e)).deep_link_id:null,r=yo(vo(n)).deep_link_id;return(r?yo(vo(r)).link:null)||r||t||e||n}class pd{constructor(e){var t,r,s,i,o,a;const c=yo(vo(e)),u=(t=c.apiKey)!==null&&t!==void 0?t:null,h=(r=c.oobCode)!==null&&r!==void 0?r:null,f=bD((s=c.mode)!==null&&s!==void 0?s:null);pe(u&&h&&f,"argument-error"),this.apiKey=u,this.operation=f,this.code=h,this.continueUrl=(i=c.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=c.lang)!==null&&o!==void 0?o:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const t=AD(e);try{return new pd(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(){this.providerId=Hi.PROVIDER_ID}static credential(e,t){return Xo._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=pd.parseLink(t);return pe(r,"argument-error"),Xo._fromEmailAndCode(e,r.code,r.tenantId)}}Hi.PROVIDER_ID="password";Hi.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Hi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra extends dI{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br extends Ra{constructor(){super("facebook.com")}static credential(e){return As._fromParams({providerId:br.PROVIDER_ID,signInMethod:br.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return br.credentialFromTaggedObject(e)}static credentialFromError(e){return br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return br.credential(e.oauthAccessToken)}catch{return null}}}br.FACEBOOK_SIGN_IN_METHOD="facebook.com";br.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar extends Ra{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return As._fromParams({providerId:Ar.PROVIDER_ID,signInMethod:Ar.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ar.credentialFromTaggedObject(e)}static credentialFromError(e){return Ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Ar.credential(t,r)}catch{return null}}}Ar.GOOGLE_SIGN_IN_METHOD="google.com";Ar.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr extends Ra{constructor(){super("github.com")}static credential(e){return As._fromParams({providerId:Rr.PROVIDER_ID,signInMethod:Rr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Rr.credentialFromTaggedObject(e)}static credentialFromError(e){return Rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Rr.credential(e.oauthAccessToken)}catch{return null}}}Rr.GITHUB_SIGN_IN_METHOD="github.com";Rr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr extends Ra{constructor(){super("twitter.com")}static credential(e,t){return As._fromParams({providerId:Sr.PROVIDER_ID,signInMethod:Sr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Sr.credentialFromTaggedObject(e)}static credentialFromError(e){return Sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Sr.credential(t,r)}catch{return null}}}Sr.TWITTER_SIGN_IN_METHOD="twitter.com";Sr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RD(n,e){return Aa(n,"POST","/v1/accounts:signUp",rr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const i=await fn._fromIdTokenResponse(e,r,s),o=Og(r);return new Rs({user:i,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=Og(r);return new Rs({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function Og(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il extends nr{constructor(e,t,r,s){var i;super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,il.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new il(e,t,r,s)}}function pI(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?il._fromErrorAndOperation(n,i,e,r):i})}async function SD(n,e,t=!1){const r=await Jo(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Rs._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PD(n,e,t=!1){const{auth:r}=n;if(en(r.app))return Promise.reject(zn(r));const s="reauthenticate";try{const i=await Jo(n,pI(r,s,e,n),t);pe(i.idToken,r,"internal-error");const o=hd(i.idToken);pe(o,r,"internal-error");const{sub:a}=o;return pe(n.uid===a,r,"user-mismatch"),Rs._forOperation(n,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&gn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mI(n,e,t=!1){if(en(n.app))return Promise.reject(zn(n));const r="signIn",s=await pI(n,r,e),i=await Rs._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(i.user),i}async function CD(n,e){return mI(Gr(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gI(n){const e=Gr(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function eL(n,e,t){const r=Gr(n);await sl(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",ED)}async function tL(n,e,t){if(en(n.app))return Promise.reject(zn(n));const r=Gr(n),o=await sl(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",RD).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&gI(n),c}),a=await Rs._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function nL(n,e,t){return en(n.app)?Promise.reject(zn(n)):CD(tt(n),Hi.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&gI(n),r})}function kD(n,e,t,r){return tt(n).onIdTokenChanged(e,t,r)}function xD(n,e,t){return tt(n).beforeAuthStateChanged(e,t)}function rL(n,e,t,r){return tt(n).onAuthStateChanged(e,t,r)}function sL(n){return tt(n).signOut()}const ol="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ol,"1"),this.storage.removeItem(ol),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DD=1e3,VD=10;class yI extends _I{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=cI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,a,c)=>{this.notifyListeners(o,c)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!t&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);Xx()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,VD):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},DD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}yI.type="LOCAL";const ND=yI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI extends _I{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}vI.type="SESSION";const EI=vI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OD(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new ql(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:i}=t.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async u=>u(t.origin,i)),c=await OD(a);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ql.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function md(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,c)=>{const u=md("",20);s.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(f){const m=f;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(m.data.response);break;default:clearTimeout(h),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cn(){return window}function LD(n){Cn().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function II(){return typeof Cn().WorkerGlobalScope<"u"&&typeof Cn().importScripts=="function"}async function FD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function UD(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function BD(){return II()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TI="firebaseLocalStorageDb",jD=1,al="firebaseLocalStorage",wI="fbase_key";class Sa{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Kl(n,e){return n.transaction([al],e?"readwrite":"readonly").objectStore(al)}function $D(){const n=indexedDB.deleteDatabase(TI);return new Sa(n).toPromise()}function ef(){const n=indexedDB.open(TI,jD);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(al,{keyPath:wI})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(al)?e(r):(r.close(),await $D(),e(await ef()))})})}async function Mg(n,e,t){const r=Kl(n,!0).put({[wI]:e,value:t});return new Sa(r).toPromise()}async function HD(n,e){const t=Kl(n,!1).get(e),r=await new Sa(t).toPromise();return r===void 0?null:r.value}function Lg(n,e){const t=Kl(n,!0).delete(e);return new Sa(t).toPromise()}const qD=800,KD=3;class bI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ef(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>KD)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return II()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ql._getInstance(BD()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await FD(),!this.activeServiceWorker)return;this.sender=new MD(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||UD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ef();return await Mg(e,ol,"1"),await Lg(e,ol),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>Mg(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>HD(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Lg(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Kl(s,!1).getAll();return new Sa(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),qD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}bI.type="LOCAL";const zD=bI;new ba(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GD(n,e){return e?qn(e):(pe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd extends dd{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return vi(e,this._buildIdpRequest())}_linkToIdToken(e,t){return vi(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return vi(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function WD(n){return mI(n.auth,new gd(n),n.bypassAuthState)}function QD(n){const{auth:e,user:t}=n;return pe(t,e,"internal-error"),PD(t,new gd(n),n.bypassAuthState)}async function YD(n){const{auth:e,user:t}=n;return pe(t,e,"internal-error"),SD(t,new gd(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(e,t,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:t,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return WD;case"linkViaPopup":case"linkViaRedirect":return YD;case"reauthViaPopup":case"reauthViaRedirect":return QD;default:gn(this.auth,"internal-error")}}resolve(e){Qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JD=new ba(2e3,1e4);class li extends AI{constructor(e,t,r,s,i){super(e,t,s,i),this.provider=r,this.authWindow=null,this.pollId=null,li.currentPopupAction&&li.currentPopupAction.cancel(),li.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return pe(e,this.auth,"internal-error"),e}async onExecution(){Qn(this.filter.length===1,"Popup operations only handle one event");const e=md();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Pn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Pn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,li.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Pn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,JD.get())};e()}}li.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XD="pendingRedirect",bc=new Map;class ZD extends AI{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=bc.get(this.auth._key());if(!e){try{const r=await eV(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}bc.set(this.auth._key(),e)}return this.bypassAuthState||bc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function eV(n,e){const t=rV(e),r=nV(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function tV(n,e){bc.set(n._key(),e)}function nV(n){return qn(n._redirectPersistence)}function rV(n){return wc(XD,n.config.apiKey,n.name)}async function sV(n,e,t=!1){if(en(n.app))return Promise.reject(zn(n));const r=Gr(n),s=GD(r,e),o=await new ZD(r,s,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iV=10*60*1e3;class oV{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!aV(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!RI(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Pn(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=iV&&this.cachedEventUids.clear(),this.cachedEventUids.has(Fg(e))}saveEventToCache(e){this.cachedEventUids.add(Fg(e)),this.lastProcessedEventTime=Date.now()}}function Fg(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function RI({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function aV(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return RI(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cV(n,e={}){return sr(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,uV=/^https?/;async function hV(n){if(n.config.emulator)return;const{authorizedDomains:e}=await cV(n);for(const t of e)try{if(fV(t))return}catch{}gn(n,"unauthorized-domain")}function fV(n){const e=Xh(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!uV.test(t))return!1;if(lV.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dV=new ba(3e4,6e4);function Ug(){const n=Cn().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function pV(n){return new Promise((e,t)=>{var r,s,i;function o(){Ug(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ug(),t(Pn(n,"network-request-failed"))},timeout:dV.get()})}if(!((s=(r=Cn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Cn().gapi)===null||i===void 0)&&i.load)o();else{const a=aD("iframefcb");return Cn()[a]=()=>{gapi.load?o():t(Pn(n,"network-request-failed"))},uI(`${oD()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw Ac=null,e})}let Ac=null;function mV(n){return Ac=Ac||pV(n),Ac}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gV=new ba(5e3,15e3),_V="__/auth/iframe",yV="emulator/auth/iframe",vV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},EV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function IV(n){const e=n.config;pe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?ud(e,yV):`https://${n.config.authDomain}/${_V}`,r={apiKey:e.apiKey,appName:n.name,v:$i},s=EV.get(n.config.apiHost);s&&(r.eid=s);const i=n._getFrameworks();return i.length&&(r.fw=i.join(",")),`${t}?${wa(r).slice(1)}`}async function TV(n){const e=await mV(n),t=Cn().gapi;return pe(t,n,"internal-error"),e.open({where:document.body,url:IV(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:vV,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Pn(n,"network-request-failed"),a=Cn().setTimeout(()=>{i(o)},gV.get());function c(){Cn().clearTimeout(a),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},bV=500,AV=600,RV="_blank",SV="http://localhost";class Bg{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function PV(n,e,t,r=bV,s=AV){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c=Object.assign(Object.assign({},wV),{width:r.toString(),height:s.toString(),top:i,left:o}),u=ot().toLowerCase();t&&(a=rI(u)?RV:t),tI(u)&&(e=e||SV,c.scrollbars="yes");const h=Object.entries(c).reduce((m,[g,E])=>`${m}${g}=${E},`,"");if(Jx(u)&&a!=="_self")return CV(e||"",a),new Bg(null);const f=window.open(e||"",a,h);pe(f,n,"popup-blocked");try{f.focus()}catch{}return new Bg(f)}function CV(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kV="__/auth/handler",xV="emulator/auth/handler",DV=encodeURIComponent("fac");async function jg(n,e,t,r,s,i){pe(n.config.authDomain,n,"auth-domain-config-required"),pe(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:$i,eventId:s};if(e instanceof dI){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",_k(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof Ra){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}n.tenantId&&(o.tid=n.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const c=await n._getAppCheckToken(),u=c?`#${DV}=${encodeURIComponent(c)}`:"";return`${VV(n)}?${wa(a).slice(1)}${u}`}function VV({config:n}){return n.emulator?ud(n,xV):`https://${n.authDomain}/${kV}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oh="webStorageSupport";class NV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=EI,this._completeRedirectFn=sV,this._overrideRedirectResult=tV}async _openPopup(e,t,r,s){var i;Qn((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await jg(e,t,r,Xh(),s);return PV(e,o,md())}async _openRedirect(e,t,r,s){await this._originValidation(e);const i=await jg(e,t,r,Xh(),s);return LD(i),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:i}=this.eventManagers[t];return s?Promise.resolve(s):(Qn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await TV(e),r=new oV(e);return t.register("authEvent",s=>(pe(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(oh,{type:oh},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[oh];o!==void 0&&t(!!o),gn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=hV(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return cI()||nI()||fd()}}const OV=NV;var $g="@firebase/auth",Hg="1.10.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LV(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function FV(n){Ri(new bs("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;pe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:lI(n)},u=new rD(r,s,i,c);return dD(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Ri(new bs("auth-internal",e=>{const t=Gr(e.getProvider("auth").getImmediate());return(r=>new MV(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Mr($g,Hg,LV(n)),Mr($g,Hg,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UV=5*60,BV=FE("authIdTokenMaxAge")||UV;let qg=null;const jV=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>BV)return;const s=t==null?void 0:t.token;qg!==s&&(qg=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function $V(n=qE()){const e=ad(n,"auth");if(e.isInitialized())return e.getImmediate();const t=fD(n,{popupRedirectResolver:OV,persistence:[zD,ND,EI]}),r=FE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=jV(i.toString());xD(t,o,()=>o(t.currentUser)),kD(t,a=>o(a))}}const s=ME("auth");return s&&pD(t,`http://${s}`),t}function HV(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}sD({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const i=Pn("internal-error");i.customData=s,t(i)},r.type="text/javascript",r.charset="UTF-8",HV().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});FV("Browser");var Kg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Lr,SI;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(w,y){function v(){}v.prototype=y.prototype,w.D=y.prototype,w.prototype=new v,w.prototype.constructor=w,w.C=function(b,k,S){for(var A=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)A[ye-2]=arguments[ye];return y.prototype[k].apply(b,A)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(w,y,v){v||(v=0);var b=Array(16);if(typeof y=="string")for(var k=0;16>k;++k)b[k]=y.charCodeAt(v++)|y.charCodeAt(v++)<<8|y.charCodeAt(v++)<<16|y.charCodeAt(v++)<<24;else for(k=0;16>k;++k)b[k]=y[v++]|y[v++]<<8|y[v++]<<16|y[v++]<<24;y=w.g[0],v=w.g[1],k=w.g[2];var S=w.g[3],A=y+(S^v&(k^S))+b[0]+3614090360&4294967295;y=v+(A<<7&4294967295|A>>>25),A=S+(k^y&(v^k))+b[1]+3905402710&4294967295,S=y+(A<<12&4294967295|A>>>20),A=k+(v^S&(y^v))+b[2]+606105819&4294967295,k=S+(A<<17&4294967295|A>>>15),A=v+(y^k&(S^y))+b[3]+3250441966&4294967295,v=k+(A<<22&4294967295|A>>>10),A=y+(S^v&(k^S))+b[4]+4118548399&4294967295,y=v+(A<<7&4294967295|A>>>25),A=S+(k^y&(v^k))+b[5]+1200080426&4294967295,S=y+(A<<12&4294967295|A>>>20),A=k+(v^S&(y^v))+b[6]+2821735955&4294967295,k=S+(A<<17&4294967295|A>>>15),A=v+(y^k&(S^y))+b[7]+4249261313&4294967295,v=k+(A<<22&4294967295|A>>>10),A=y+(S^v&(k^S))+b[8]+1770035416&4294967295,y=v+(A<<7&4294967295|A>>>25),A=S+(k^y&(v^k))+b[9]+2336552879&4294967295,S=y+(A<<12&4294967295|A>>>20),A=k+(v^S&(y^v))+b[10]+4294925233&4294967295,k=S+(A<<17&4294967295|A>>>15),A=v+(y^k&(S^y))+b[11]+2304563134&4294967295,v=k+(A<<22&4294967295|A>>>10),A=y+(S^v&(k^S))+b[12]+1804603682&4294967295,y=v+(A<<7&4294967295|A>>>25),A=S+(k^y&(v^k))+b[13]+4254626195&4294967295,S=y+(A<<12&4294967295|A>>>20),A=k+(v^S&(y^v))+b[14]+2792965006&4294967295,k=S+(A<<17&4294967295|A>>>15),A=v+(y^k&(S^y))+b[15]+1236535329&4294967295,v=k+(A<<22&4294967295|A>>>10),A=y+(k^S&(v^k))+b[1]+4129170786&4294967295,y=v+(A<<5&4294967295|A>>>27),A=S+(v^k&(y^v))+b[6]+3225465664&4294967295,S=y+(A<<9&4294967295|A>>>23),A=k+(y^v&(S^y))+b[11]+643717713&4294967295,k=S+(A<<14&4294967295|A>>>18),A=v+(S^y&(k^S))+b[0]+3921069994&4294967295,v=k+(A<<20&4294967295|A>>>12),A=y+(k^S&(v^k))+b[5]+3593408605&4294967295,y=v+(A<<5&4294967295|A>>>27),A=S+(v^k&(y^v))+b[10]+38016083&4294967295,S=y+(A<<9&4294967295|A>>>23),A=k+(y^v&(S^y))+b[15]+3634488961&4294967295,k=S+(A<<14&4294967295|A>>>18),A=v+(S^y&(k^S))+b[4]+3889429448&4294967295,v=k+(A<<20&4294967295|A>>>12),A=y+(k^S&(v^k))+b[9]+568446438&4294967295,y=v+(A<<5&4294967295|A>>>27),A=S+(v^k&(y^v))+b[14]+3275163606&4294967295,S=y+(A<<9&4294967295|A>>>23),A=k+(y^v&(S^y))+b[3]+4107603335&4294967295,k=S+(A<<14&4294967295|A>>>18),A=v+(S^y&(k^S))+b[8]+1163531501&4294967295,v=k+(A<<20&4294967295|A>>>12),A=y+(k^S&(v^k))+b[13]+2850285829&4294967295,y=v+(A<<5&4294967295|A>>>27),A=S+(v^k&(y^v))+b[2]+4243563512&4294967295,S=y+(A<<9&4294967295|A>>>23),A=k+(y^v&(S^y))+b[7]+1735328473&4294967295,k=S+(A<<14&4294967295|A>>>18),A=v+(S^y&(k^S))+b[12]+2368359562&4294967295,v=k+(A<<20&4294967295|A>>>12),A=y+(v^k^S)+b[5]+4294588738&4294967295,y=v+(A<<4&4294967295|A>>>28),A=S+(y^v^k)+b[8]+2272392833&4294967295,S=y+(A<<11&4294967295|A>>>21),A=k+(S^y^v)+b[11]+1839030562&4294967295,k=S+(A<<16&4294967295|A>>>16),A=v+(k^S^y)+b[14]+4259657740&4294967295,v=k+(A<<23&4294967295|A>>>9),A=y+(v^k^S)+b[1]+2763975236&4294967295,y=v+(A<<4&4294967295|A>>>28),A=S+(y^v^k)+b[4]+1272893353&4294967295,S=y+(A<<11&4294967295|A>>>21),A=k+(S^y^v)+b[7]+4139469664&4294967295,k=S+(A<<16&4294967295|A>>>16),A=v+(k^S^y)+b[10]+3200236656&4294967295,v=k+(A<<23&4294967295|A>>>9),A=y+(v^k^S)+b[13]+681279174&4294967295,y=v+(A<<4&4294967295|A>>>28),A=S+(y^v^k)+b[0]+3936430074&4294967295,S=y+(A<<11&4294967295|A>>>21),A=k+(S^y^v)+b[3]+3572445317&4294967295,k=S+(A<<16&4294967295|A>>>16),A=v+(k^S^y)+b[6]+76029189&4294967295,v=k+(A<<23&4294967295|A>>>9),A=y+(v^k^S)+b[9]+3654602809&4294967295,y=v+(A<<4&4294967295|A>>>28),A=S+(y^v^k)+b[12]+3873151461&4294967295,S=y+(A<<11&4294967295|A>>>21),A=k+(S^y^v)+b[15]+530742520&4294967295,k=S+(A<<16&4294967295|A>>>16),A=v+(k^S^y)+b[2]+3299628645&4294967295,v=k+(A<<23&4294967295|A>>>9),A=y+(k^(v|~S))+b[0]+4096336452&4294967295,y=v+(A<<6&4294967295|A>>>26),A=S+(v^(y|~k))+b[7]+1126891415&4294967295,S=y+(A<<10&4294967295|A>>>22),A=k+(y^(S|~v))+b[14]+2878612391&4294967295,k=S+(A<<15&4294967295|A>>>17),A=v+(S^(k|~y))+b[5]+4237533241&4294967295,v=k+(A<<21&4294967295|A>>>11),A=y+(k^(v|~S))+b[12]+1700485571&4294967295,y=v+(A<<6&4294967295|A>>>26),A=S+(v^(y|~k))+b[3]+2399980690&4294967295,S=y+(A<<10&4294967295|A>>>22),A=k+(y^(S|~v))+b[10]+4293915773&4294967295,k=S+(A<<15&4294967295|A>>>17),A=v+(S^(k|~y))+b[1]+2240044497&4294967295,v=k+(A<<21&4294967295|A>>>11),A=y+(k^(v|~S))+b[8]+1873313359&4294967295,y=v+(A<<6&4294967295|A>>>26),A=S+(v^(y|~k))+b[15]+4264355552&4294967295,S=y+(A<<10&4294967295|A>>>22),A=k+(y^(S|~v))+b[6]+2734768916&4294967295,k=S+(A<<15&4294967295|A>>>17),A=v+(S^(k|~y))+b[13]+1309151649&4294967295,v=k+(A<<21&4294967295|A>>>11),A=y+(k^(v|~S))+b[4]+4149444226&4294967295,y=v+(A<<6&4294967295|A>>>26),A=S+(v^(y|~k))+b[11]+3174756917&4294967295,S=y+(A<<10&4294967295|A>>>22),A=k+(y^(S|~v))+b[2]+718787259&4294967295,k=S+(A<<15&4294967295|A>>>17),A=v+(S^(k|~y))+b[9]+3951481745&4294967295,w.g[0]=w.g[0]+y&4294967295,w.g[1]=w.g[1]+(k+(A<<21&4294967295|A>>>11))&4294967295,w.g[2]=w.g[2]+k&4294967295,w.g[3]=w.g[3]+S&4294967295}r.prototype.u=function(w,y){y===void 0&&(y=w.length);for(var v=y-this.blockSize,b=this.B,k=this.h,S=0;S<y;){if(k==0)for(;S<=v;)s(this,w,S),S+=this.blockSize;if(typeof w=="string"){for(;S<y;)if(b[k++]=w.charCodeAt(S++),k==this.blockSize){s(this,b),k=0;break}}else for(;S<y;)if(b[k++]=w[S++],k==this.blockSize){s(this,b),k=0;break}}this.h=k,this.o+=y},r.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var y=1;y<w.length-8;++y)w[y]=0;var v=8*this.o;for(y=w.length-8;y<w.length;++y)w[y]=v&255,v/=256;for(this.u(w),w=Array(16),y=v=0;4>y;++y)for(var b=0;32>b;b+=8)w[v++]=this.g[y]>>>b&255;return w};function i(w,y){var v=a;return Object.prototype.hasOwnProperty.call(v,w)?v[w]:v[w]=y(w)}function o(w,y){this.h=y;for(var v=[],b=!0,k=w.length-1;0<=k;k--){var S=w[k]|0;b&&S==y||(v[k]=S,b=!1)}this.g=v}var a={};function c(w){return-128<=w&&128>w?i(w,function(y){return new o([y|0],0>y?-1:0)}):new o([w|0],0>w?-1:0)}function u(w){if(isNaN(w)||!isFinite(w))return f;if(0>w)return x(u(-w));for(var y=[],v=1,b=0;w>=v;b++)y[b]=w/v|0,v*=4294967296;return new o(y,0)}function h(w,y){if(w.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(w.charAt(0)=="-")return x(h(w.substring(1),y));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var v=u(Math.pow(y,8)),b=f,k=0;k<w.length;k+=8){var S=Math.min(8,w.length-k),A=parseInt(w.substring(k,k+S),y);8>S?(S=u(Math.pow(y,S)),b=b.j(S).add(u(A))):(b=b.j(v),b=b.add(u(A)))}return b}var f=c(0),m=c(1),g=c(16777216);n=o.prototype,n.m=function(){if(T(this))return-x(this).m();for(var w=0,y=1,v=0;v<this.g.length;v++){var b=this.i(v);w+=(0<=b?b:4294967296+b)*y,y*=4294967296}return w},n.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(E(this))return"0";if(T(this))return"-"+x(this).toString(w);for(var y=u(Math.pow(w,6)),v=this,b="";;){var k=C(v,y).g;v=V(v,k.j(y));var S=((0<v.g.length?v.g[0]:v.h)>>>0).toString(w);if(v=k,E(v))return S+b;for(;6>S.length;)S="0"+S;b=S+b}},n.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function E(w){if(w.h!=0)return!1;for(var y=0;y<w.g.length;y++)if(w.g[y]!=0)return!1;return!0}function T(w){return w.h==-1}n.l=function(w){return w=V(this,w),T(w)?-1:E(w)?0:1};function x(w){for(var y=w.g.length,v=[],b=0;b<y;b++)v[b]=~w.g[b];return new o(v,~w.h).add(m)}n.abs=function(){return T(this)?x(this):this},n.add=function(w){for(var y=Math.max(this.g.length,w.g.length),v=[],b=0,k=0;k<=y;k++){var S=b+(this.i(k)&65535)+(w.i(k)&65535),A=(S>>>16)+(this.i(k)>>>16)+(w.i(k)>>>16);b=A>>>16,S&=65535,A&=65535,v[k]=A<<16|S}return new o(v,v[v.length-1]&-2147483648?-1:0)};function V(w,y){return w.add(x(y))}n.j=function(w){if(E(this)||E(w))return f;if(T(this))return T(w)?x(this).j(x(w)):x(x(this).j(w));if(T(w))return x(this.j(x(w)));if(0>this.l(g)&&0>w.l(g))return u(this.m()*w.m());for(var y=this.g.length+w.g.length,v=[],b=0;b<2*y;b++)v[b]=0;for(b=0;b<this.g.length;b++)for(var k=0;k<w.g.length;k++){var S=this.i(b)>>>16,A=this.i(b)&65535,ye=w.i(k)>>>16,Ee=w.i(k)&65535;v[2*b+2*k]+=A*Ee,D(v,2*b+2*k),v[2*b+2*k+1]+=S*Ee,D(v,2*b+2*k+1),v[2*b+2*k+1]+=A*ye,D(v,2*b+2*k+1),v[2*b+2*k+2]+=S*ye,D(v,2*b+2*k+2)}for(b=0;b<y;b++)v[b]=v[2*b+1]<<16|v[2*b];for(b=y;b<2*y;b++)v[b]=0;return new o(v,0)};function D(w,y){for(;(w[y]&65535)!=w[y];)w[y+1]+=w[y]>>>16,w[y]&=65535,y++}function I(w,y){this.g=w,this.h=y}function C(w,y){if(E(y))throw Error("division by zero");if(E(w))return new I(f,f);if(T(w))return y=C(x(w),y),new I(x(y.g),x(y.h));if(T(y))return y=C(w,x(y)),new I(x(y.g),y.h);if(30<w.g.length){if(T(w)||T(y))throw Error("slowDivide_ only works with positive integers.");for(var v=m,b=y;0>=b.l(w);)v=N(v),b=N(b);var k=F(v,1),S=F(b,1);for(b=F(b,2),v=F(v,2);!E(b);){var A=S.add(b);0>=A.l(w)&&(k=k.add(v),S=A),b=F(b,1),v=F(v,1)}return y=V(w,k.j(y)),new I(k,y)}for(k=f;0<=w.l(y);){for(v=Math.max(1,Math.floor(w.m()/y.m())),b=Math.ceil(Math.log(v)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),S=u(v),A=S.j(y);T(A)||0<A.l(w);)v-=b,S=u(v),A=S.j(y);E(S)&&(S=m),k=k.add(S),w=V(w,A)}return new I(k,w)}n.A=function(w){return C(this,w).h},n.and=function(w){for(var y=Math.max(this.g.length,w.g.length),v=[],b=0;b<y;b++)v[b]=this.i(b)&w.i(b);return new o(v,this.h&w.h)},n.or=function(w){for(var y=Math.max(this.g.length,w.g.length),v=[],b=0;b<y;b++)v[b]=this.i(b)|w.i(b);return new o(v,this.h|w.h)},n.xor=function(w){for(var y=Math.max(this.g.length,w.g.length),v=[],b=0;b<y;b++)v[b]=this.i(b)^w.i(b);return new o(v,this.h^w.h)};function N(w){for(var y=w.g.length+1,v=[],b=0;b<y;b++)v[b]=w.i(b)<<1|w.i(b-1)>>>31;return new o(v,w.h)}function F(w,y){var v=y>>5;y%=32;for(var b=w.g.length-v,k=[],S=0;S<b;S++)k[S]=0<y?w.i(S+v)>>>y|w.i(S+v+1)<<32-y:w.i(S+v);return new o(k,w.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,SI=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,Lr=o}).apply(typeof Kg<"u"?Kg:typeof self<"u"?self:typeof window<"u"?window:{});var uc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var PI,Eo,CI,Rc,tf,kI,xI,DI;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,d,p){return l==Array.prototype||l==Object.prototype||(l[d]=p.value),l};function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof uc=="object"&&uc];for(var d=0;d<l.length;++d){var p=l[d];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=t(this);function s(l,d){if(d)e:{var p=r;l=l.split(".");for(var _=0;_<l.length-1;_++){var M=l[_];if(!(M in p))break e;p=p[M]}l=l[l.length-1],_=p[l],d=d(_),d!=_&&d!=null&&e(p,l,{configurable:!0,writable:!0,value:d})}}function i(l,d){l instanceof String&&(l+="");var p=0,_=!1,M={next:function(){if(!_&&p<l.length){var U=p++;return{value:d(U,l[U]),done:!1}}return _=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}s("Array.prototype.values",function(l){return l||function(){return i(this,function(d,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function c(l){var d=typeof l;return d=d!="object"?d:l?Array.isArray(l)?"array":d:"null",d=="array"||d=="object"&&typeof l.length=="number"}function u(l){var d=typeof l;return d=="object"&&l!=null||d=="function"}function h(l,d,p){return l.call.apply(l.bind,arguments)}function f(l,d,p){if(!l)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,_),l.apply(d,M)}}return function(){return l.apply(d,arguments)}}function m(l,d,p){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,m.apply(null,arguments)}function g(l,d){var p=Array.prototype.slice.call(arguments,1);return function(){var _=p.slice();return _.push.apply(_,arguments),l.apply(this,_)}}function E(l,d){function p(){}p.prototype=d.prototype,l.aa=d.prototype,l.prototype=new p,l.prototype.constructor=l,l.Qb=function(_,M,U){for(var Q=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)Q[Oe-2]=arguments[Oe];return d.prototype[M].apply(_,Q)}}function T(l){const d=l.length;if(0<d){const p=Array(d);for(let _=0;_<d;_++)p[_]=l[_];return p}return[]}function x(l,d){for(let p=1;p<arguments.length;p++){const _=arguments[p];if(c(_)){const M=l.length||0,U=_.length||0;l.length=M+U;for(let Q=0;Q<U;Q++)l[M+Q]=_[Q]}else l.push(_)}}class V{constructor(d,p){this.i=d,this.j=p,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function D(l){return/^[\s\xa0]*$/.test(l)}function I(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function C(l){return C[" "](l),l}C[" "]=function(){};var N=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function F(l,d,p){for(const _ in l)d.call(p,l[_],_,l)}function w(l,d){for(const p in l)d.call(void 0,l[p],p,l)}function y(l){const d={};for(const p in l)d[p]=l[p];return d}const v="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(l,d){let p,_;for(let M=1;M<arguments.length;M++){_=arguments[M];for(p in _)l[p]=_[p];for(let U=0;U<v.length;U++)p=v[U],Object.prototype.hasOwnProperty.call(_,p)&&(l[p]=_[p])}}function k(l){var d=1;l=l.split(":");const p=[];for(;0<d&&l.length;)p.push(l.shift()),d--;return l.length&&p.push(l.join(":")),p}function S(l){a.setTimeout(()=>{throw l},0)}function A(){var l=Ke;let d=null;return l.g&&(d=l.g,l.g=l.g.next,l.g||(l.h=null),d.next=null),d}class ye{constructor(){this.h=this.g=null}add(d,p){const _=Ee.get();_.set(d,p),this.h?this.h.next=_:this.g=_,this.h=_}}var Ee=new V(()=>new se,l=>l.reset());class se{constructor(){this.next=this.g=this.h=null}set(d,p){this.h=d,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let de,ne=!1,Ke=new ye,an=()=>{const l=a.Promise.resolve(void 0);de=()=>{l.then(Qt)}};var Qt=()=>{for(var l;l=A();){try{l.h.call(l.g)}catch(p){S(p)}var d=Ee;d.j(l),100>d.h&&(d.h++,l.next=d.g,d.g=l)}ne=!1};function ze(){this.s=this.s,this.C=this.C}ze.prototype.s=!1,ze.prototype.ma=function(){this.s||(this.s=!0,this.N())},ze.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ge(l,d){this.type=l,this.g=this.target=d,this.defaultPrevented=!1}Ge.prototype.h=function(){this.defaultPrevented=!0};var ar=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,d=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const p=()=>{};a.addEventListener("test",p,d),a.removeEventListener("test",p,d)}catch{}return l}();function yn(l,d){if(Ge.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var p=this.type=l.type,_=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=d,d=l.relatedTarget){if(N){e:{try{C(d.nodeName);var M=!0;break e}catch{}M=!1}M||(d=null)}}else p=="mouseover"?d=l.fromElement:p=="mouseout"&&(d=l.toElement);this.relatedTarget=d,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Lt[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&yn.aa.h.call(this)}}E(yn,Ge);var Lt={2:"touch",3:"pen",4:"mouse"};yn.prototype.h=function(){yn.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var $="closure_listenable_"+(1e6*Math.random()|0),te=0;function X(l,d,p,_,M){this.listener=l,this.proxy=null,this.src=d,this.type=p,this.capture=!!_,this.ha=M,this.key=++te,this.da=this.fa=!1}function ie(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function we(l){this.src=l,this.g={},this.h=0}we.prototype.add=function(l,d,p,_,M){var U=l.toString();l=this.g[U],l||(l=this.g[U]=[],this.h++);var Q=R(l,d,_,M);return-1<Q?(d=l[Q],p||(d.fa=!1)):(d=new X(d,this.src,U,!!_,M),d.fa=p,l.push(d)),d};function Ne(l,d){var p=d.type;if(p in l.g){var _=l.g[p],M=Array.prototype.indexOf.call(_,d,void 0),U;(U=0<=M)&&Array.prototype.splice.call(_,M,1),U&&(ie(d),l.g[p].length==0&&(delete l.g[p],l.h--))}}function R(l,d,p,_){for(var M=0;M<l.length;++M){var U=l[M];if(!U.da&&U.listener==d&&U.capture==!!p&&U.ha==_)return M}return-1}var P="closure_lm_"+(1e6*Math.random()|0),L={};function H(l,d,p,_,M){if(Array.isArray(d)){for(var U=0;U<d.length;U++)H(l,d[U],p,_,M);return null}return p=ae(p),l&&l[$]?l.K(d,p,u(_)?!!_.capture:!1,M):j(l,d,p,!1,_,M)}function j(l,d,p,_,M,U){if(!d)throw Error("Invalid event type");var Q=u(M)?!!M.capture:!!M,Oe=ue(l);if(Oe||(l[P]=Oe=new we(l)),p=Oe.add(d,p,_,Q,U),p.proxy)return p;if(_=q(),p.proxy=_,_.src=l,_.listener=p,l.addEventListener)ar||(M=Q),M===void 0&&(M=!1),l.addEventListener(d.toString(),_,M);else if(l.attachEvent)l.attachEvent(G(d.toString()),_);else if(l.addListener&&l.removeListener)l.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return p}function q(){function l(p){return d.call(l.src,l.listener,p)}const d=K;return l}function J(l,d,p,_,M){if(Array.isArray(d))for(var U=0;U<d.length;U++)J(l,d[U],p,_,M);else _=u(_)?!!_.capture:!!_,p=ae(p),l&&l[$]?(l=l.i,d=String(d).toString(),d in l.g&&(U=l.g[d],p=R(U,p,_,M),-1<p&&(ie(U[p]),Array.prototype.splice.call(U,p,1),U.length==0&&(delete l.g[d],l.h--)))):l&&(l=ue(l))&&(d=l.g[d.toString()],l=-1,d&&(l=R(d,p,_,M)),(p=-1<l?d[l]:null)&&W(p))}function W(l){if(typeof l!="number"&&l&&!l.da){var d=l.src;if(d&&d[$])Ne(d.i,l);else{var p=l.type,_=l.proxy;d.removeEventListener?d.removeEventListener(p,_,l.capture):d.detachEvent?d.detachEvent(G(p),_):d.addListener&&d.removeListener&&d.removeListener(_),(p=ue(d))?(Ne(p,l),p.h==0&&(p.src=null,d[P]=null)):ie(l)}}}function G(l){return l in L?L[l]:L[l]="on"+l}function K(l,d){if(l.da)l=!0;else{d=new yn(d,this);var p=l.listener,_=l.ha||l.src;l.fa&&W(l),l=p.call(_,d)}return l}function ue(l){return l=l[P],l instanceof we?l:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function ae(l){return typeof l=="function"?l:(l[ee]||(l[ee]=function(d){return l.handleEvent(d)}),l[ee])}function oe(){ze.call(this),this.i=new we(this),this.M=this,this.F=null}E(oe,ze),oe.prototype[$]=!0,oe.prototype.removeEventListener=function(l,d,p,_){J(this,l,d,p,_)};function he(l,d){var p,_=l.F;if(_)for(p=[];_;_=_.F)p.push(_);if(l=l.M,_=d.type||d,typeof d=="string")d=new Ge(d,l);else if(d instanceof Ge)d.target=d.target||l;else{var M=d;d=new Ge(_,l),b(d,M)}if(M=!0,p)for(var U=p.length-1;0<=U;U--){var Q=d.g=p[U];M=Pe(Q,_,!0,d)&&M}if(Q=d.g=l,M=Pe(Q,_,!0,d)&&M,M=Pe(Q,_,!1,d)&&M,p)for(U=0;U<p.length;U++)Q=d.g=p[U],M=Pe(Q,_,!1,d)&&M}oe.prototype.N=function(){if(oe.aa.N.call(this),this.i){var l=this.i,d;for(d in l.g){for(var p=l.g[d],_=0;_<p.length;_++)ie(p[_]);delete l.g[d],l.h--}}this.F=null},oe.prototype.K=function(l,d,p,_){return this.i.add(String(l),d,!1,p,_)},oe.prototype.L=function(l,d,p,_){return this.i.add(String(l),d,!0,p,_)};function Pe(l,d,p,_){if(d=l.i.g[String(d)],!d)return!0;d=d.concat();for(var M=!0,U=0;U<d.length;++U){var Q=d[U];if(Q&&!Q.da&&Q.capture==p){var Oe=Q.listener,dt=Q.ha||Q.src;Q.fa&&Ne(l.i,Q),M=Oe.call(dt,_)!==!1&&M}}return M&&!_.defaultPrevented}function Ae(l,d,p){if(typeof l=="function")p&&(l=m(l,p));else if(l&&typeof l.handleEvent=="function")l=m(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(l,d||0)}function _t(l){l.g=Ae(()=>{l.g=null,l.i&&(l.i=!1,_t(l))},l.l);const d=l.h;l.h=null,l.m.apply(null,d)}class ct extends ze{constructor(d,p){super(),this.m=d,this.l=p,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:_t(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ft(l){ze.call(this),this.h=l,this.g={}}E(ft,ze);var yt=[];function cr(l){F(l.g,function(d,p){this.g.hasOwnProperty(p)&&W(d)},l),l.g={}}ft.prototype.N=function(){ft.aa.N.call(this),cr(this)},ft.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Bs=a.JSON.stringify,kt=a.JSON.parse,Yt=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function js(){}js.prototype.h=null;function ip(l){return l.h||(l.h=l.i())}function op(){}var Wi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function _u(){Ge.call(this,"d")}E(_u,Ge);function yu(){Ge.call(this,"c")}E(yu,Ge);var Jr={},ap=null;function Fa(){return ap=ap||new oe}Jr.La="serverreachability";function cp(l){Ge.call(this,Jr.La,l)}E(cp,Ge);function Qi(l){const d=Fa();he(d,new cp(d))}Jr.STAT_EVENT="statevent";function lp(l,d){Ge.call(this,Jr.STAT_EVENT,l),this.stat=d}E(lp,Ge);function xt(l){const d=Fa();he(d,new lp(d,l))}Jr.Ma="timingevent";function up(l,d){Ge.call(this,Jr.Ma,l),this.size=d}E(up,Ge);function Yi(l,d){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},d)}function Ji(){this.g=!0}Ji.prototype.xa=function(){this.g=!1};function Qw(l,d,p,_,M,U){l.info(function(){if(l.g)if(U)for(var Q="",Oe=U.split("&"),dt=0;dt<Oe.length;dt++){var Re=Oe[dt].split("=");if(1<Re.length){var vt=Re[0];Re=Re[1];var Et=vt.split("_");Q=2<=Et.length&&Et[1]=="type"?Q+(vt+"="+Re+"&"):Q+(vt+"=redacted&")}}else Q=null;else Q=U;return"XMLHTTP REQ ("+_+") [attempt "+M+"]: "+d+`
`+p+`
`+Q})}function Yw(l,d,p,_,M,U,Q){l.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+M+"]: "+d+`
`+p+`
`+U+" "+Q})}function $s(l,d,p,_){l.info(function(){return"XMLHTTP TEXT ("+d+"): "+Xw(l,p)+(_?" "+_:"")})}function Jw(l,d){l.info(function(){return"TIMEOUT: "+d})}Ji.prototype.info=function(){};function Xw(l,d){if(!l.g)return d;if(!d)return null;try{var p=JSON.parse(d);if(p){for(l=0;l<p.length;l++)if(Array.isArray(p[l])){var _=p[l];if(!(2>_.length)){var M=_[1];if(Array.isArray(M)&&!(1>M.length)){var U=M[0];if(U!="noop"&&U!="stop"&&U!="close")for(var Q=1;Q<M.length;Q++)M[Q]=""}}}}return Bs(p)}catch{return d}}var Ua={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},hp={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},vu;function Ba(){}E(Ba,js),Ba.prototype.g=function(){return new XMLHttpRequest},Ba.prototype.i=function(){return{}},vu=new Ba;function lr(l,d,p,_){this.j=l,this.i=d,this.l=p,this.R=_||1,this.U=new ft(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new fp}function fp(){this.i=null,this.g="",this.h=!1}var dp={},Eu={};function Iu(l,d,p){l.L=1,l.v=qa(Dn(d)),l.m=p,l.P=!0,pp(l,null)}function pp(l,d){l.F=Date.now(),ja(l),l.A=Dn(l.v);var p=l.A,_=l.R;Array.isArray(_)||(_=[String(_)]),Pp(p.i,"t",_),l.C=0,p=l.j.J,l.h=new fp,l.g=zp(l.j,p?d:null,!l.m),0<l.O&&(l.M=new ct(m(l.Y,l,l.g),l.O)),d=l.U,p=l.g,_=l.ca;var M="readystatechange";Array.isArray(M)||(M&&(yt[0]=M.toString()),M=yt);for(var U=0;U<M.length;U++){var Q=H(p,M[U],_||d.handleEvent,!1,d.h||d);if(!Q)break;d.g[Q.key]=Q}d=l.H?y(l.H):{},l.m?(l.u||(l.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,d)):(l.u="GET",l.g.ea(l.A,l.u,null,d)),Qi(),Qw(l.i,l.u,l.A,l.l,l.R,l.m)}lr.prototype.ca=function(l){l=l.target;const d=this.M;d&&Vn(l)==3?d.j():this.Y(l)},lr.prototype.Y=function(l){try{if(l==this.g)e:{const Et=Vn(this.g);var d=this.g.Ba();const Ks=this.g.Z();if(!(3>Et)&&(Et!=3||this.g&&(this.h.h||this.g.oa()||Op(this.g)))){this.J||Et!=4||d==7||(d==8||0>=Ks?Qi(3):Qi(2)),Tu(this);var p=this.g.Z();this.X=p;t:if(mp(this)){var _=Op(this.g);l="";var M=_.length,U=Vn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Xr(this),Xi(this);var Q="";break t}this.h.i=new a.TextDecoder}for(d=0;d<M;d++)this.h.h=!0,l+=this.h.i.decode(_[d],{stream:!(U&&d==M-1)});_.length=0,this.h.g+=l,this.C=0,Q=this.h.g}else Q=this.g.oa();if(this.o=p==200,Yw(this.i,this.u,this.A,this.l,this.R,Et,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Oe,dt=this.g;if((Oe=dt.g?dt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(Oe)){var Re=Oe;break t}}Re=null}if(p=Re)$s(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,wu(this,p);else{this.o=!1,this.s=3,xt(12),Xr(this),Xi(this);break e}}if(this.P){p=!0;let cn;for(;!this.J&&this.C<Q.length;)if(cn=Zw(this,Q),cn==Eu){Et==4&&(this.s=4,xt(14),p=!1),$s(this.i,this.l,null,"[Incomplete Response]");break}else if(cn==dp){this.s=4,xt(15),$s(this.i,this.l,Q,"[Invalid Chunk]"),p=!1;break}else $s(this.i,this.l,cn,null),wu(this,cn);if(mp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Et!=4||Q.length!=0||this.h.h||(this.s=1,xt(16),p=!1),this.o=this.o&&p,!p)$s(this.i,this.l,Q,"[Invalid Chunked Response]"),Xr(this),Xi(this);else if(0<Q.length&&!this.W){this.W=!0;var vt=this.j;vt.g==this&&vt.ba&&!vt.M&&(vt.j.info("Great, no buffering proxy detected. Bytes received: "+Q.length),Cu(vt),vt.M=!0,xt(11))}}else $s(this.i,this.l,Q,null),wu(this,Q);Et==4&&Xr(this),this.o&&!this.J&&(Et==4?$p(this.j,this):(this.o=!1,ja(this)))}else gb(this.g),p==400&&0<Q.indexOf("Unknown SID")?(this.s=3,xt(12)):(this.s=0,xt(13)),Xr(this),Xi(this)}}}catch{}finally{}};function mp(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function Zw(l,d){var p=l.C,_=d.indexOf(`
`,p);return _==-1?Eu:(p=Number(d.substring(p,_)),isNaN(p)?dp:(_+=1,_+p>d.length?Eu:(d=d.slice(_,_+p),l.C=_+p,d)))}lr.prototype.cancel=function(){this.J=!0,Xr(this)};function ja(l){l.S=Date.now()+l.I,gp(l,l.I)}function gp(l,d){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Yi(m(l.ba,l),d)}function Tu(l){l.B&&(a.clearTimeout(l.B),l.B=null)}lr.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(Jw(this.i,this.A),this.L!=2&&(Qi(),xt(17)),Xr(this),this.s=2,Xi(this)):gp(this,this.S-l)};function Xi(l){l.j.G==0||l.J||$p(l.j,l)}function Xr(l){Tu(l);var d=l.M;d&&typeof d.ma=="function"&&d.ma(),l.M=null,cr(l.U),l.g&&(d=l.g,l.g=null,d.abort(),d.ma())}function wu(l,d){try{var p=l.j;if(p.G!=0&&(p.g==l||bu(p.h,l))){if(!l.K&&bu(p.h,l)&&p.G==3){try{var _=p.Da.g.parse(d)}catch{_=null}if(Array.isArray(_)&&_.length==3){var M=_;if(M[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<l.F)Ya(p),Wa(p);else break e;Pu(p),xt(18)}}else p.za=M[1],0<p.za-p.T&&37500>M[2]&&p.F&&p.v==0&&!p.C&&(p.C=Yi(m(p.Za,p),6e3));if(1>=vp(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else es(p,11)}else if((l.K||p.g==l)&&Ya(p),!D(d))for(M=p.Da.g.parse(d),d=0;d<M.length;d++){let Re=M[d];if(p.T=Re[0],Re=Re[1],p.G==2)if(Re[0]=="c"){p.K=Re[1],p.ia=Re[2];const vt=Re[3];vt!=null&&(p.la=vt,p.j.info("VER="+p.la));const Et=Re[4];Et!=null&&(p.Aa=Et,p.j.info("SVER="+p.Aa));const Ks=Re[5];Ks!=null&&typeof Ks=="number"&&0<Ks&&(_=1.5*Ks,p.L=_,p.j.info("backChannelRequestTimeoutMs_="+_)),_=p;const cn=l.g;if(cn){const Xa=cn.g?cn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xa){var U=_.h;U.g||Xa.indexOf("spdy")==-1&&Xa.indexOf("quic")==-1&&Xa.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(Au(U,U.h),U.h=null))}if(_.D){const ku=cn.g?cn.g.getResponseHeader("X-HTTP-Session-Id"):null;ku&&(_.ya=ku,Ue(_.I,_.D,ku))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-l.F,p.j.info("Handshake RTT: "+p.R+"ms")),_=p;var Q=l;if(_.qa=Kp(_,_.J?_.ia:null,_.W),Q.K){Ep(_.h,Q);var Oe=Q,dt=_.L;dt&&(Oe.I=dt),Oe.B&&(Tu(Oe),ja(Oe)),_.g=Q}else Bp(_);0<p.i.length&&Qa(p)}else Re[0]!="stop"&&Re[0]!="close"||es(p,7);else p.G==3&&(Re[0]=="stop"||Re[0]=="close"?Re[0]=="stop"?es(p,7):Su(p):Re[0]!="noop"&&p.l&&p.l.ta(Re),p.v=0)}}Qi(4)}catch{}}var eb=class{constructor(l,d){this.g=l,this.map=d}};function _p(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function yp(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function vp(l){return l.h?1:l.g?l.g.size:0}function bu(l,d){return l.h?l.h==d:l.g?l.g.has(d):!1}function Au(l,d){l.g?l.g.add(d):l.h=d}function Ep(l,d){l.h&&l.h==d?l.h=null:l.g&&l.g.has(d)&&l.g.delete(d)}_p.prototype.cancel=function(){if(this.i=Ip(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Ip(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let d=l.i;for(const p of l.g.values())d=d.concat(p.D);return d}return T(l.i)}function tb(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(c(l)){for(var d=[],p=l.length,_=0;_<p;_++)d.push(l[_]);return d}d=[],p=0;for(_ in l)d[p++]=l[_];return d}function nb(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||typeof l=="string"){var d=[];l=l.length;for(var p=0;p<l;p++)d.push(p);return d}d=[],p=0;for(const _ in l)d[p++]=_;return d}}}function Tp(l,d){if(l.forEach&&typeof l.forEach=="function")l.forEach(d,void 0);else if(c(l)||typeof l=="string")Array.prototype.forEach.call(l,d,void 0);else for(var p=nb(l),_=tb(l),M=_.length,U=0;U<M;U++)d.call(void 0,_[U],p&&p[U],l)}var wp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function rb(l,d){if(l){l=l.split("&");for(var p=0;p<l.length;p++){var _=l[p].indexOf("="),M=null;if(0<=_){var U=l[p].substring(0,_);M=l[p].substring(_+1)}else U=l[p];d(U,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function Zr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Zr){this.h=l.h,$a(this,l.j),this.o=l.o,this.g=l.g,Ha(this,l.s),this.l=l.l;var d=l.i,p=new to;p.i=d.i,d.g&&(p.g=new Map(d.g),p.h=d.h),bp(this,p),this.m=l.m}else l&&(d=String(l).match(wp))?(this.h=!1,$a(this,d[1]||"",!0),this.o=Zi(d[2]||""),this.g=Zi(d[3]||"",!0),Ha(this,d[4]),this.l=Zi(d[5]||"",!0),bp(this,d[6]||"",!0),this.m=Zi(d[7]||"")):(this.h=!1,this.i=new to(null,this.h))}Zr.prototype.toString=function(){var l=[],d=this.j;d&&l.push(eo(d,Ap,!0),":");var p=this.g;return(p||d=="file")&&(l.push("//"),(d=this.o)&&l.push(eo(d,Ap,!0),"@"),l.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&l.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&l.push("/"),l.push(eo(p,p.charAt(0)=="/"?ob:ib,!0))),(p=this.i.toString())&&l.push("?",p),(p=this.m)&&l.push("#",eo(p,cb)),l.join("")};function Dn(l){return new Zr(l)}function $a(l,d,p){l.j=p?Zi(d,!0):d,l.j&&(l.j=l.j.replace(/:$/,""))}function Ha(l,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);l.s=d}else l.s=null}function bp(l,d,p){d instanceof to?(l.i=d,lb(l.i,l.h)):(p||(d=eo(d,ab)),l.i=new to(d,l.h))}function Ue(l,d,p){l.i.set(d,p)}function qa(l){return Ue(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Zi(l,d){return l?d?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function eo(l,d,p){return typeof l=="string"?(l=encodeURI(l).replace(d,sb),p&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function sb(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Ap=/[#\/\?@]/g,ib=/[#\?:]/g,ob=/[#\?]/g,ab=/[#\?@]/g,cb=/#/g;function to(l,d){this.h=this.g=null,this.i=l||null,this.j=!!d}function ur(l){l.g||(l.g=new Map,l.h=0,l.i&&rb(l.i,function(d,p){l.add(decodeURIComponent(d.replace(/\+/g," ")),p)}))}n=to.prototype,n.add=function(l,d){ur(this),this.i=null,l=Hs(this,l);var p=this.g.get(l);return p||this.g.set(l,p=[]),p.push(d),this.h+=1,this};function Rp(l,d){ur(l),d=Hs(l,d),l.g.has(d)&&(l.i=null,l.h-=l.g.get(d).length,l.g.delete(d))}function Sp(l,d){return ur(l),d=Hs(l,d),l.g.has(d)}n.forEach=function(l,d){ur(this),this.g.forEach(function(p,_){p.forEach(function(M){l.call(d,M,_,this)},this)},this)},n.na=function(){ur(this);const l=Array.from(this.g.values()),d=Array.from(this.g.keys()),p=[];for(let _=0;_<d.length;_++){const M=l[_];for(let U=0;U<M.length;U++)p.push(d[_])}return p},n.V=function(l){ur(this);let d=[];if(typeof l=="string")Sp(this,l)&&(d=d.concat(this.g.get(Hs(this,l))));else{l=Array.from(this.g.values());for(let p=0;p<l.length;p++)d=d.concat(l[p])}return d},n.set=function(l,d){return ur(this),this.i=null,l=Hs(this,l),Sp(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[d]),this.h+=1,this},n.get=function(l,d){return l?(l=this.V(l),0<l.length?String(l[0]):d):d};function Pp(l,d,p){Rp(l,d),0<p.length&&(l.i=null,l.g.set(Hs(l,d),T(p)),l.h+=p.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],d=Array.from(this.g.keys());for(var p=0;p<d.length;p++){var _=d[p];const U=encodeURIComponent(String(_)),Q=this.V(_);for(_=0;_<Q.length;_++){var M=U;Q[_]!==""&&(M+="="+encodeURIComponent(String(Q[_]))),l.push(M)}}return this.i=l.join("&")};function Hs(l,d){return d=String(d),l.j&&(d=d.toLowerCase()),d}function lb(l,d){d&&!l.j&&(ur(l),l.i=null,l.g.forEach(function(p,_){var M=_.toLowerCase();_!=M&&(Rp(this,_),Pp(this,M,p))},l)),l.j=d}function ub(l,d){const p=new Ji;if(a.Image){const _=new Image;_.onload=g(hr,p,"TestLoadImage: loaded",!0,d,_),_.onerror=g(hr,p,"TestLoadImage: error",!1,d,_),_.onabort=g(hr,p,"TestLoadImage: abort",!1,d,_),_.ontimeout=g(hr,p,"TestLoadImage: timeout",!1,d,_),a.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=l}else d(!1)}function hb(l,d){const p=new Ji,_=new AbortController,M=setTimeout(()=>{_.abort(),hr(p,"TestPingServer: timeout",!1,d)},1e4);fetch(l,{signal:_.signal}).then(U=>{clearTimeout(M),U.ok?hr(p,"TestPingServer: ok",!0,d):hr(p,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(M),hr(p,"TestPingServer: error",!1,d)})}function hr(l,d,p,_,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),_(p)}catch{}}function fb(){this.g=new Yt}function db(l,d,p){const _=p||"";try{Tp(l,function(M,U){let Q=M;u(M)&&(Q=Bs(M)),d.push(_+U+"="+encodeURIComponent(Q))})}catch(M){throw d.push(_+"type="+encodeURIComponent("_badmap")),M}}function Ka(l){this.l=l.Ub||null,this.j=l.eb||!1}E(Ka,js),Ka.prototype.g=function(){return new za(this.l,this.j)},Ka.prototype.i=function(l){return function(){return l}}({});function za(l,d){oe.call(this),this.D=l,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(za,oe),n=za.prototype,n.open=function(l,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=d,this.readyState=1,ro(this)},n.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(d.body=l),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,no(this)),this.readyState=0},n.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,ro(this)),this.g&&(this.readyState=3,ro(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Cp(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Cp(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}n.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var d=l.value?l.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!l.done}))&&(this.response=this.responseText+=d)}l.done?no(this):ro(this),this.readyState==3&&Cp(this)}},n.Ra=function(l){this.g&&(this.response=this.responseText=l,no(this))},n.Qa=function(l){this.g&&(this.response=l,no(this))},n.ga=function(){this.g&&no(this)};function no(l){l.readyState=4,l.l=null,l.j=null,l.v=null,ro(l)}n.setRequestHeader=function(l,d){this.u.append(l,d)},n.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],d=this.h.entries();for(var p=d.next();!p.done;)p=p.value,l.push(p[0]+": "+p[1]),p=d.next();return l.join(`\r
`)};function ro(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(za.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function kp(l){let d="";return F(l,function(p,_){d+=_,d+=":",d+=p,d+=`\r
`}),d}function Ru(l,d,p){e:{for(_ in p){var _=!1;break e}_=!0}_||(p=kp(p),typeof l=="string"?p!=null&&encodeURIComponent(String(p)):Ue(l,d,p))}function Ye(l){oe.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(Ye,oe);var pb=/^https?$/i,mb=["POST","PUT"];n=Ye.prototype,n.Ha=function(l){this.J=l},n.ea=function(l,d,p,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);d=d?d.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():vu.g(),this.v=this.o?ip(this.o):ip(vu),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(l),!0),this.B=!1}catch(U){xp(this,U);return}if(l=p||"",p=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var M in _)p.set(M,_[M]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const U of _.keys())p.set(U,_.get(U));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(p.keys()).find(U=>U.toLowerCase()=="content-type"),M=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(mb,d,void 0))||_||M||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,Q]of p)this.g.setRequestHeader(U,Q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Np(this),this.u=!0,this.g.send(l),this.u=!1}catch(U){xp(this,U)}};function xp(l,d){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=d,l.m=5,Dp(l),Ga(l)}function Dp(l){l.A||(l.A=!0,he(l,"complete"),he(l,"error"))}n.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,he(this,"complete"),he(this,"abort"),Ga(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ga(this,!0)),Ye.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Vp(this):this.bb())},n.bb=function(){Vp(this)};function Vp(l){if(l.h&&typeof o<"u"&&(!l.v[1]||Vn(l)!=4||l.Z()!=2)){if(l.u&&Vn(l)==4)Ae(l.Ea,0,l);else if(he(l,"readystatechange"),Vn(l)==4){l.h=!1;try{const Q=l.Z();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var p;if(!(p=d)){var _;if(_=Q===0){var M=String(l.D).match(wp)[1]||null;!M&&a.self&&a.self.location&&(M=a.self.location.protocol.slice(0,-1)),_=!pb.test(M?M.toLowerCase():"")}p=_}if(p)he(l,"complete"),he(l,"success");else{l.m=6;try{var U=2<Vn(l)?l.g.statusText:""}catch{U=""}l.l=U+" ["+l.Z()+"]",Dp(l)}}finally{Ga(l)}}}}function Ga(l,d){if(l.g){Np(l);const p=l.g,_=l.v[0]?()=>{}:null;l.g=null,l.v=null,d||he(l,"ready");try{p.onreadystatechange=_}catch{}}}function Np(l){l.I&&(a.clearTimeout(l.I),l.I=null)}n.isActive=function(){return!!this.g};function Vn(l){return l.g?l.g.readyState:0}n.Z=function(){try{return 2<Vn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(l){if(this.g){var d=this.g.responseText;return l&&d.indexOf(l)==0&&(d=d.substring(l.length)),kt(d)}};function Op(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function gb(l){const d={};l=(l.g&&2<=Vn(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<l.length;_++){if(D(l[_]))continue;var p=k(l[_]);const M=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const U=d[M]||[];d[M]=U,U.push(p)}w(d,function(_){return _.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function so(l,d,p){return p&&p.internalChannelParams&&p.internalChannelParams[l]||d}function Mp(l){this.Aa=0,this.i=[],this.j=new Ji,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=so("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=so("baseRetryDelayMs",5e3,l),this.cb=so("retryDelaySeedMs",1e4,l),this.Wa=so("forwardChannelMaxRetries",2,l),this.wa=so("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new _p(l&&l.concurrentRequestLimit),this.Da=new fb,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Mp.prototype,n.la=8,n.G=1,n.connect=function(l,d,p,_){xt(0),this.W=l,this.H=d||{},p&&_!==void 0&&(this.H.OSID=p,this.H.OAID=_),this.F=this.X,this.I=Kp(this,null,this.W),Qa(this)};function Su(l){if(Lp(l),l.G==3){var d=l.U++,p=Dn(l.I);if(Ue(p,"SID",l.K),Ue(p,"RID",d),Ue(p,"TYPE","terminate"),io(l,p),d=new lr(l,l.j,d),d.L=2,d.v=qa(Dn(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=d.v,p=!0),p||(d.g=zp(d.j,null),d.g.ea(d.v)),d.F=Date.now(),ja(d)}qp(l)}function Wa(l){l.g&&(Cu(l),l.g.cancel(),l.g=null)}function Lp(l){Wa(l),l.u&&(a.clearTimeout(l.u),l.u=null),Ya(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function Qa(l){if(!yp(l.h)&&!l.s){l.s=!0;var d=l.Ga;de||an(),ne||(de(),ne=!0),Ke.add(d,l),l.B=0}}function _b(l,d){return vp(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=d.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Yi(m(l.Ga,l,d),Hp(l,l.B)),l.B++,!0)}n.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const M=new lr(this,this.j,l);let U=this.o;if(this.S&&(U?(U=y(U),b(U,this.S)):U=this.S),this.m!==null||this.O||(M.H=U,U=null),this.P)e:{for(var d=0,p=0;p<this.i.length;p++){t:{var _=this.i[p];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(d+=_,4096<d){d=p;break e}if(d===4096||p===this.i.length-1){d=p+1;break e}}d=1e3}else d=1e3;d=Up(this,M,d),p=Dn(this.I),Ue(p,"RID",l),Ue(p,"CVER",22),this.D&&Ue(p,"X-HTTP-Session-Id",this.D),io(this,p),U&&(this.O?d="headers="+encodeURIComponent(String(kp(U)))+"&"+d:this.m&&Ru(p,this.m,U)),Au(this.h,M),this.Ua&&Ue(p,"TYPE","init"),this.P?(Ue(p,"$req",d),Ue(p,"SID","null"),M.T=!0,Iu(M,p,null)):Iu(M,p,d),this.G=2}}else this.G==3&&(l?Fp(this,l):this.i.length==0||yp(this.h)||Fp(this))};function Fp(l,d){var p;d?p=d.l:p=l.U++;const _=Dn(l.I);Ue(_,"SID",l.K),Ue(_,"RID",p),Ue(_,"AID",l.T),io(l,_),l.m&&l.o&&Ru(_,l.m,l.o),p=new lr(l,l.j,p,l.B+1),l.m===null&&(p.H=l.o),d&&(l.i=d.D.concat(l.i)),d=Up(l,p,1e3),p.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Au(l.h,p),Iu(p,_,d)}function io(l,d){l.H&&F(l.H,function(p,_){Ue(d,_,p)}),l.l&&Tp({},function(p,_){Ue(d,_,p)})}function Up(l,d,p){p=Math.min(l.i.length,p);var _=l.l?m(l.l.Na,l.l,l):null;e:{var M=l.i;let U=-1;for(;;){const Q=["count="+p];U==-1?0<p?(U=M[0].g,Q.push("ofs="+U)):U=0:Q.push("ofs="+U);let Oe=!0;for(let dt=0;dt<p;dt++){let Re=M[dt].g;const vt=M[dt].map;if(Re-=U,0>Re)U=Math.max(0,M[dt].g-100),Oe=!1;else try{db(vt,Q,"req"+Re+"_")}catch{_&&_(vt)}}if(Oe){_=Q.join("&");break e}}}return l=l.i.splice(0,p),d.D=l,_}function Bp(l){if(!l.g&&!l.u){l.Y=1;var d=l.Fa;de||an(),ne||(de(),ne=!0),Ke.add(d,l),l.v=0}}function Pu(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Yi(m(l.Fa,l),Hp(l,l.v)),l.v++,!0)}n.Fa=function(){if(this.u=null,jp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Yi(m(this.ab,this),l)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,xt(10),Wa(this),jp(this))};function Cu(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function jp(l){l.g=new lr(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var d=Dn(l.qa);Ue(d,"RID","rpc"),Ue(d,"SID",l.K),Ue(d,"AID",l.T),Ue(d,"CI",l.F?"0":"1"),!l.F&&l.ja&&Ue(d,"TO",l.ja),Ue(d,"TYPE","xmlhttp"),io(l,d),l.m&&l.o&&Ru(d,l.m,l.o),l.L&&(l.g.I=l.L);var p=l.g;l=l.ia,p.L=1,p.v=qa(Dn(d)),p.m=null,p.P=!0,pp(p,l)}n.Za=function(){this.C!=null&&(this.C=null,Wa(this),Pu(this),xt(19))};function Ya(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function $p(l,d){var p=null;if(l.g==d){Ya(l),Cu(l),l.g=null;var _=2}else if(bu(l.h,d))p=d.D,Ep(l.h,d),_=1;else return;if(l.G!=0){if(d.o)if(_==1){p=d.m?d.m.length:0,d=Date.now()-d.F;var M=l.B;_=Fa(),he(_,new up(_,p)),Qa(l)}else Bp(l);else if(M=d.s,M==3||M==0&&0<d.X||!(_==1&&_b(l,d)||_==2&&Pu(l)))switch(p&&0<p.length&&(d=l.h,d.i=d.i.concat(p)),M){case 1:es(l,5);break;case 4:es(l,10);break;case 3:es(l,6);break;default:es(l,2)}}}function Hp(l,d){let p=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(p*=2),p*d}function es(l,d){if(l.j.info("Error code "+d),d==2){var p=m(l.fb,l),_=l.Xa;const M=!_;_=new Zr(_||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||$a(_,"https"),qa(_),M?ub(_.toString(),p):hb(_.toString(),p)}else xt(2);l.G=0,l.l&&l.l.sa(d),qp(l),Lp(l)}n.fb=function(l){l?(this.j.info("Successfully pinged google.com"),xt(2)):(this.j.info("Failed to ping google.com"),xt(1))};function qp(l){if(l.G=0,l.ka=[],l.l){const d=Ip(l.h);(d.length!=0||l.i.length!=0)&&(x(l.ka,d),x(l.ka,l.i),l.h.i.length=0,T(l.i),l.i.length=0),l.l.ra()}}function Kp(l,d,p){var _=p instanceof Zr?Dn(p):new Zr(p);if(_.g!="")d&&(_.g=d+"."+_.g),Ha(_,_.s);else{var M=a.location;_=M.protocol,d=d?d+"."+M.hostname:M.hostname,M=+M.port;var U=new Zr(null);_&&$a(U,_),d&&(U.g=d),M&&Ha(U,M),p&&(U.l=p),_=U}return p=l.D,d=l.ya,p&&d&&Ue(_,p,d),Ue(_,"VER",l.la),io(l,_),_}function zp(l,d,p){if(d&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=l.Ca&&!l.pa?new Ye(new Ka({eb:p})):new Ye(l.pa),d.Ha(l.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Gp(){}n=Gp.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Ja(){}Ja.prototype.g=function(l,d){return new Ht(l,d)};function Ht(l,d){oe.call(this),this.g=new Mp(d),this.l=l,this.h=d&&d.messageUrlParams||null,l=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(l?l["X-WebChannel-Content-Type"]=d.messageContentType:l={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(l?l["X-WebChannel-Client-Profile"]=d.va:l={"X-WebChannel-Client-Profile":d.va}),this.g.S=l,(l=d&&d.Sb)&&!D(l)&&(this.g.m=l),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!D(d)&&(this.g.D=d,l=this.h,l!==null&&d in l&&(l=this.h,d in l&&delete l[d])),this.j=new qs(this)}E(Ht,oe),Ht.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ht.prototype.close=function(){Su(this.g)},Ht.prototype.o=function(l){var d=this.g;if(typeof l=="string"){var p={};p.__data__=l,l=p}else this.u&&(p={},p.__data__=Bs(l),l=p);d.i.push(new eb(d.Ya++,l)),d.G==3&&Qa(d)},Ht.prototype.N=function(){this.g.l=null,delete this.j,Su(this.g),delete this.g,Ht.aa.N.call(this)};function Wp(l){_u.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var d=l.__sm__;if(d){e:{for(const p in d){l=p;break e}l=void 0}(this.i=l)&&(l=this.i,d=d!==null&&l in d?d[l]:void 0),this.data=d}else this.data=l}E(Wp,_u);function Qp(){yu.call(this),this.status=1}E(Qp,yu);function qs(l){this.g=l}E(qs,Gp),qs.prototype.ua=function(){he(this.g,"a")},qs.prototype.ta=function(l){he(this.g,new Wp(l))},qs.prototype.sa=function(l){he(this.g,new Qp)},qs.prototype.ra=function(){he(this.g,"b")},Ja.prototype.createWebChannel=Ja.prototype.g,Ht.prototype.send=Ht.prototype.o,Ht.prototype.open=Ht.prototype.m,Ht.prototype.close=Ht.prototype.close,DI=function(){return new Ja},xI=function(){return Fa()},kI=Jr,tf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ua.NO_ERROR=0,Ua.TIMEOUT=8,Ua.HTTP_ERROR=6,Rc=Ua,hp.COMPLETE="complete",CI=hp,op.EventType=Wi,Wi.OPEN="a",Wi.CLOSE="b",Wi.ERROR="c",Wi.MESSAGE="d",oe.prototype.listen=oe.prototype.K,Eo=op,Ye.prototype.listenOnce=Ye.prototype.L,Ye.prototype.getLastError=Ye.prototype.Ka,Ye.prototype.getLastErrorCode=Ye.prototype.Ba,Ye.prototype.getStatus=Ye.prototype.Z,Ye.prototype.getResponseJson=Ye.prototype.Oa,Ye.prototype.getResponseText=Ye.prototype.oa,Ye.prototype.send=Ye.prototype.ea,Ye.prototype.setWithCredentials=Ye.prototype.Ha,PI=Ye}).apply(typeof uc<"u"?uc:typeof self<"u"?self:typeof window<"u"?window:{});const zg="@firebase/firestore",Gg="4.7.11";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}mt.UNAUTHENTICATED=new mt(null),mt.GOOGLE_CREDENTIALS=new mt("google-credentials-uid"),mt.FIRST_PARTY=new mt("first-party-uid"),mt.MOCK_USER=new mt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qi="11.6.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ss=new id("@firebase/firestore");function ri(){return Ss.logLevel}function z(n,...e){if(Ss.logLevel<=Ie.DEBUG){const t=e.map(_d);Ss.debug(`Firestore (${qi}): ${n}`,...t)}}function Ot(n,...e){if(Ss.logLevel<=Ie.ERROR){const t=e.map(_d);Ss.error(`Firestore (${qi}): ${n}`,...t)}}function Ps(n,...e){if(Ss.logLevel<=Ie.WARN){const t=e.map(_d);Ss.warn(`Firestore (${qi}): ${n}`,...t)}}function _d(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function re(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,VI(n,r,t)}function VI(n,e,t){let r=`FIRESTORE (${qi}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Ot(r),new Error(r)}function ce(n,e,t,r){let s="Unexpected state";typeof t=="string"?s=t:r=t,n||VI(e,s,r)}function _e(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Y extends nr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(mt.UNAUTHENTICATED))}shutdown(){}}class KV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class zV{constructor(e){this.t=e,this.currentUser=mt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ce(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve();let i=new kn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new kn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},a=c=>{z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(z("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new kn)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ce(typeof r.accessToken=="string",31837,{l:r}),new NI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ce(e===null||typeof e=="string",2055,{h:e}),new mt(e)}}class GV{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=mt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class WV{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new GV(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(mt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Wg{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class QV{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,en(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ce(this.o===void 0,3512);const r=i=>{i.error!=null&&z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,z("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Wg(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ce(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Wg(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YV(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OI(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=YV(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<t&&(r+=e.charAt(s[i]%62))}return r}}function ge(n,e){return n<e?-1:n>e?1:0}function nf(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),s=e.codePointAt(t);if(r!==s){if(r<128&&s<128)return ge(r,s);{const i=OI(),o=JV(i.encode(Qg(n,t)),i.encode(Qg(e,t)));return o!==0?o:ge(r,s)}}t+=r>65535?2:1}return ge(n.length,e.length)}function Qg(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function JV(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return ge(n[t],e[t]);return ge(n.length,e.length)}function Si(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}function LI(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yg=-62135596800,Jg=1e6;class Qe{static now(){return Qe.fromMillis(Date.now())}static fromDate(e){return Qe.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Jg);return new Qe(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Y(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Y(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Yg)throw new Y(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Y(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Jg}_compareTo(e){return this.seconds===e.seconds?ge(this.nanoseconds,e.nanoseconds):ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Yg;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{static fromTimestamp(e){return new le(e)}static min(){return new le(new Qe(0,0))}static max(){return new le(new Qe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xg="__name__";class In{constructor(e,t,r){t===void 0?t=0:t>e.length&&re(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&re(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return In.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof In?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const i=In.compareSegments(e.get(s),t.get(s));if(i!==0)return i}return ge(e.length,t.length)}static compareSegments(e,t){const r=In.isNumericId(e),s=In.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?In.extractNumericId(e).compare(In.extractNumericId(t)):nf(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Lr.fromString(e.substring(4,e.length-2))}}class xe extends In{construct(e,t,r){return new xe(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Y(B.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new xe(t)}static emptyPath(){return new xe([])}}const XV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class We extends In{construct(e,t,r){return new We(e,t,r)}static isValidIdentifier(e){return XV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),We.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Xg}static keyField(){return new We([Xg])}static fromServerFormat(e){const t=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Y(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new Y(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Y(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new Y(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new We(t)}static emptyPath(){return new We([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.path=e}static fromPath(e){return new Z(xe.fromString(e))}static fromName(e){return new Z(xe.fromString(e).popFirst(5))}static empty(){return new Z(xe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&xe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return xe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Z(new xe(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zo=-1;class cl{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function rf(n){return n.fields.find(e=>e.kind===2)}function cs(n){return n.fields.filter(e=>e.kind!==2)}cl.UNKNOWN_ID=-1;class Sc{constructor(e,t){this.fieldPath=e,this.kind=t}}class ea{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ea(0,Wt.min())}}function ZV(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=le.fromTimestamp(r===1e9?new Qe(t+1,0):new Qe(t,r));return new Wt(s,Z.empty(),e)}function FI(n){return new Wt(n.readTime,n.key,Zo)}class Wt{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Wt(le.min(),Z.empty(),Zo)}static max(){return new Wt(le.max(),Z.empty(),Zo)}}function yd(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Z.comparator(n.documentKey,e.documentKey),t!==0?t:ge(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class BI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ls(n){if(n.code!==B.FAILED_PRECONDITION||n.message!==UI)throw n;z("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&re(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new O((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(t,i).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof O?t:O.resolve(t)}catch(t){return O.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):O.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):O.reject(t)}static resolve(e){return new O((t,r)=>{t(e)})}static reject(e){return new O((t,r)=>{r(e)})}static waitFor(e){return new O((t,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&t()},c=>r(c))}),o=!0,i===s&&t()})}static or(e){let t=O.resolve(!1);for(const r of e)t=t.next(s=>s?O.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,i)=>{r.push(t.call(this,s,i))}),this.waitFor(r)}static mapArray(e,t){return new O((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let c=0;c<i;c++){const u=c;t(e[u]).next(h=>{o[u]=h,++a,a===i&&r(o)},h=>s(h))}})}static doWhile(e,t){return new O((r,s)=>{const i=()=>{e()===!0?t().next(()=>{i()},s):r()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qt="SimpleDb";class zl{static open(e,t,r,s){try{return new zl(t,e.transaction(s,r))}catch(i){throw new Oo(t,i)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new kn,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Oo(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const s=vd(r.target.error);this.S.reject(new Oo(e,s))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(z(qt,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}v(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new tN(t)}}class Fr{static delete(e){return z(qt,"Removing database:",e),us(OE().indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!BE())return!1;if(Fr.F())return!0;const e=ot(),t=Fr.M(e),r=0<t&&t<10,s=jI(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.O)==="YES"}static N(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.B=r,this.L=null,Fr.M(ot())===12.2&&Ot("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async k(e){return this.db||(z(qt,"Opening database:",this.name),this.db=await new Promise((t,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;t(o)},s.onblocked=()=>{r(new Oo(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new Y(B.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new Y(B.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Oo(e,o))},s.onupgradeneeded=i=>{z(qt,'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;if(this.L!==null&&this.L!==i.oldVersion)throw new Error(`refusing to open IndexedDB database due to potential corruption of the IndexedDB database data; this corruption could be caused by clicking the "clear site data" button in a web browser; try reloading the web page to re-initialize the IndexedDB database: lastClosedDbVersion=${this.L}, event.oldVersion=${i.oldVersion}, event.newVersion=${i.newVersion}, db.version=${o.version}`);this.B.q(o,s.transaction,i.oldVersion,this.version).next(()=>{z(qt,"Database upgrade to version "+this.version+" complete")})}}),this.db.addEventListener("close",t=>{const r=t.target;this.L=r.version},{passive:!0})),this.$&&(this.db.onversionchange=t=>this.$(t)),this.db}U(e){this.$=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,s){const i=t==="readonly";let o=0;for(;;){++o;try{this.db=await this.k(e);const a=zl.open(this.db,e,i?"readonly":"readwrite",r),c=s(a).next(u=>(a.v(),u)).catch(u=>(a.abort(u),O.reject(u))).toPromise();return c.catch(()=>{}),await a.D,c}catch(a){const c=a,u=c.name!=="FirebaseError"&&o<3;if(z(qt,"Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}function jI(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class eN{constructor(e){this.K=e,this.W=!1,this.G=null}get isDone(){return this.W}get j(){return this.G}set cursor(e){this.K=e}done(){this.W=!0}H(e){this.G=e}delete(){return us(this.K.delete())}}class Oo extends Y{constructor(e,t){super(B.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Wr(n){return n.name==="IndexedDbTransactionError"}class tN{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(z(qt,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(z(qt,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),us(r)}add(e){return z(qt,"ADD",this.store.name,e,e),us(this.store.add(e))}get(e){return us(this.store.get(e)).next(t=>(t===void 0&&(t=null),z(qt,"GET",this.store.name,e,t),t))}delete(e){return z(qt,"DELETE",this.store.name,e),us(this.store.delete(e))}count(){return z(qt,"COUNT",this.store.name),us(this.store.count())}J(e,t){const r=this.options(e,t),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new O((o,a)=>{i.onerror=c=>{a(c.target.error)},i.onsuccess=c=>{o(c.target.result)}})}{const i=this.cursor(r),o=[];return this.Y(i,(a,c)=>{o.push(c)}).next(()=>o)}}Z(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new O((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}})}X(e,t){z(qt,"DELETE ALL",this.store.name);const r=this.options(e,t);r.ee=!1;const s=this.cursor(r);return this.Y(s,(i,o,a)=>a.delete())}te(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.Y(s,t)}ne(e){const t=this.cursor({});return new O((r,s)=>{t.onerror=i=>{const o=vd(i.target.error);s(o)},t.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}Y(e,t){const r=[];return new O((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const c=new eN(a),u=t(a.primaryKey,a.value,c);if(u instanceof O){const h=u.catch(f=>(c.done(),O.reject(f)));r.push(h)}c.isDone?s():c.j===null?a.continue():a.continue(c.j)}}).next(()=>O.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.ee?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function us(n){return new O((e,t)=>{n.onsuccess=r=>{const s=r.target.result;e(s)},n.onerror=r=>{const s=vd(r.target.error);t(s)}})}let Zg=!1;function vd(n){const e=Fr.M(ot());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Y("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Zg||(Zg=!0,setTimeout(()=>{throw r},0)),r}}return n}const Mo="IndexBackfiller";class nN{constructor(e,t){this.asyncQueue=e,this.re=t,this.task=null}start(){this.ie(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ie(e){z(Mo,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const t=await this.re.se();z(Mo,`Documents written: ${t}`)}catch(t){Wr(t)?z(Mo,"Ignoring IndexedDB error during index backfill: ",t):await Ls(t)}await this.ie(6e4)})}}class rN{constructor(e,t){this.localStore=e,this.persistence=t}async se(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.oe(t,e))}oe(e,t){const r=new Set;let s=t,i=!0;return O.doWhile(()=>i===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return z(Mo,`Processing collection: ${o}`),this._e(e,o,s).next(a=>{s-=a,r.add(o)});i=!1})).next(()=>t-s)}_e(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(s=>this.localStore.localDocuments.getNextDocuments(e,t,s,r).next(i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.ae(s,i)).next(a=>(z(Mo,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}ae(e,t){let r=e;return t.changes.forEach((s,i)=>{const o=FI(i);yd(o,r)>0&&(r=o)}),new Wt(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>t.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}tn.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs=-1;function Gl(n){return n==null}function ta(n){return n===0&&1/n==-1/0}function sN(n){return typeof n=="number"&&Number.isInteger(n)&&!ta(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ll="";function Ct(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=e_(e)),e=iN(n.get(t),e);return e_(e)}function iN(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const i=n.charAt(s);switch(i){case"\0":t+="";break;case ll:t+="";break;default:t+=i}}return t}function e_(n){return n+ll+""}function wn(n){const e=n.length;if(ce(e>=2,64408,{path:n}),e===2)return ce(n.charAt(0)===ll&&n.charAt(1)==="",56145,{path:n}),xe.emptyPath();const t=e-2,r=[];let s="";for(let i=0;i<e;){const o=n.indexOf(ll,i);switch((o<0||o>t)&&re(50515,{path:n}),n.charAt(o+1)){case"":const a=n.substring(i,o);let c;s.length===0?c=a:(s+=a,c=s,s=""),r.push(c);break;case"":s+=n.substring(i,o),s+="\0";break;case"":s+=n.substring(i,o+1);break;default:re(61167,{path:n})}i=o+2}return new xe(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ls="remoteDocuments",Pa="owner",Ws="owner",na="mutationQueues",oN="userId",un="mutations",t_="batchId",ps="userMutationsIndex",n_=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pc(n,e){return[n,Ct(e)]}function $I(n,e,t){return[n,Ct(e),t]}const aN={},Pi="documentMutations",ul="remoteDocumentsV14",cN=["prefixPath","collectionGroup","readTime","documentId"],Cc="documentKeyIndex",lN=["prefixPath","collectionGroup","documentId"],HI="collectionGroupIndex",uN=["collectionGroup","readTime","prefixPath","documentId"],ra="remoteDocumentGlobal",sf="remoteDocumentGlobalKey",Ci="targets",qI="queryTargetsIndex",hN=["canonicalId","targetId"],ki="targetDocuments",fN=["targetId","path"],Ed="documentTargetsIndex",dN=["path","targetId"],hl="targetGlobalKey",Es="targetGlobal",sa="collectionParents",pN=["collectionId","parent"],xi="clientMetadata",mN="clientId",Wl="bundles",gN="bundleId",Ql="namedQueries",_N="name",Id="indexConfiguration",yN="indexId",of="collectionGroupIndex",vN="collectionGroup",fl="indexState",EN=["indexId","uid"],KI="sequenceNumberIndex",IN=["uid","sequenceNumber"],dl="indexEntries",TN=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],zI="documentKeyIndex",wN=["indexId","uid","orderedDocumentKey"],Yl="documentOverlays",bN=["userId","collectionPath","documentId"],af="collectionPathOverlayIndex",AN=["userId","collectionPath","largestBatchId"],GI="collectionGroupOverlayIndex",RN=["userId","collectionGroup","largestBatchId"],Td="globals",SN="name",WI=[na,un,Pi,ls,Ci,Pa,Es,ki,xi,ra,sa,Wl,Ql],PN=[...WI,Yl],QI=[na,un,Pi,ul,Ci,Pa,Es,ki,xi,ra,sa,Wl,Ql,Yl],YI=QI,wd=[...YI,Id,fl,dl],CN=wd,kN=[...wd,Td];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf extends BI{constructor(e,t){super(),this.he=e,this.currentSequenceNumber=t}}function at(n,e){const t=_e(n);return Fr.N(t.he,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r_(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Qr(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function JI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e,t){this.comparator=e,this.root=t||gt.EMPTY}insert(e,t){return new qe(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,gt.BLACK,null,null))}remove(e){return new qe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,gt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new hc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new hc(this.root,e,this.comparator,!1)}getReverseIterator(){return new hc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new hc(this.root,e,this.comparator,!0)}}class hc{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?r(e.key,t):1,t&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class gt{constructor(e,t,r,s,i){this.key=e,this.value=t,this.color=r??gt.RED,this.left=s??gt.EMPTY,this.right=i??gt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,i){return new gt(e??this.key,t??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,t,r),null):i===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return gt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return gt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,gt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,gt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw re(43730,{key:this.key,value:this.value});if(this.right.isRed())throw re(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw re(27949);return e+(this.isRed()?0:1)}}gt.EMPTY=null,gt.RED=!0,gt.BLACK=!1;gt.EMPTY=new class{constructor(){this.size=0}get key(){throw re(57766)}get value(){throw re(16141)}get color(){throw re(16727)}get left(){throw re(29726)}get right(){throw re(36894)}copy(e,t,r,s,i){return this}insert(e,t,r){return new gt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e){this.comparator=e,this.data=new qe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new s_(this.data.getIterator())}getIteratorFrom(e){return new s_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Ve)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ve(this.comparator);return t.data=e,t}}class s_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Qs(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.fields=e,e.sort(We.comparator)}static empty(){return new Bt([])}unionWith(e){let t=new Ve(We.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Bt(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Si(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new XI("Invalid base64 string: "+i):i}}(e);return new nt(t)}static fromUint8Array(e){const t=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new nt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nt.EMPTY_BYTE_STRING=new nt("");const xN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yn(n){if(ce(!!n,39018),typeof n=="string"){let e=0;const t=xN.exec(n);if(ce(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:je(n.seconds),nanos:je(n.nanos)}}function je(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Jn(n){return typeof n=="string"?nt.fromBase64String(n):nt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZI="server_timestamp",eT="__type__",tT="__previous_value__",nT="__local_write_time__";function bd(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[eT])===null||t===void 0?void 0:t.stringValue)===ZI}function Jl(n){const e=n.mapValue.fields[tT];return bd(e)?Jl(e):e}function ia(n){const e=Yn(n.mapValue.fields[nT].timestampValue);return new Qe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(e,t,r,s,i,o,a,c,u){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u}}const pl="(default)";class Cs{constructor(e,t){this.projectId=e,this.database=t||pl}static empty(){return new Cs("","")}get isDefaultDatabase(){return this.database===pl}isEqual(e){return e instanceof Cs&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ad="__type__",rT="__max__",kr={mapValue:{fields:{__type__:{stringValue:rT}}}},Rd="__vector__",Di="value",kc={nullValue:"NULL_VALUE"};function jr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?bd(n)?4:sT(n)?9007199254740991:Xl(n)?10:11:re(28295,{value:n})}function xn(n,e){if(n===e)return!0;const t=jr(n);if(t!==jr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ia(n).isEqual(ia(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Yn(s.timestampValue),a=Yn(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(s,i){return Jn(s.bytesValue).isEqual(Jn(i.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,i){return je(s.geoPointValue.latitude)===je(i.geoPointValue.latitude)&&je(s.geoPointValue.longitude)===je(i.geoPointValue.longitude)}(n,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return je(s.integerValue)===je(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=je(s.doubleValue),a=je(i.doubleValue);return o===a?ta(o)===ta(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return Si(n.arrayValue.values||[],e.arrayValue.values||[],xn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(r_(o)!==r_(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!xn(o[c],a[c])))return!1;return!0}(n,e);default:return re(52216,{left:n})}}function oa(n,e){return(n.values||[]).find(t=>xn(t,e))!==void 0}function $r(n,e){if(n===e)return 0;const t=jr(n),r=jr(e);if(t!==r)return ge(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ge(n.booleanValue,e.booleanValue);case 2:return function(i,o){const a=je(i.integerValue||i.doubleValue),c=je(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return i_(n.timestampValue,e.timestampValue);case 4:return i_(ia(n),ia(e));case 5:return nf(n.stringValue,e.stringValue);case 6:return function(i,o){const a=Jn(i),c=Jn(o);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),c=o.split("/");for(let u=0;u<a.length&&u<c.length;u++){const h=ge(a[u],c[u]);if(h!==0)return h}return ge(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,o){const a=ge(je(i.latitude),je(o.latitude));return a!==0?a:ge(je(i.longitude),je(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return o_(n.arrayValue,e.arrayValue);case 10:return function(i,o){var a,c,u,h;const f=i.fields||{},m=o.fields||{},g=(a=f[Di])===null||a===void 0?void 0:a.arrayValue,E=(c=m[Di])===null||c===void 0?void 0:c.arrayValue,T=ge(((u=g==null?void 0:g.values)===null||u===void 0?void 0:u.length)||0,((h=E==null?void 0:E.values)===null||h===void 0?void 0:h.length)||0);return T!==0?T:o_(g,E)}(n.mapValue,e.mapValue);case 11:return function(i,o){if(i===kr.mapValue&&o===kr.mapValue)return 0;if(i===kr.mapValue)return 1;if(o===kr.mapValue)return-1;const a=i.fields||{},c=Object.keys(a),u=o.fields||{},h=Object.keys(u);c.sort(),h.sort();for(let f=0;f<c.length&&f<h.length;++f){const m=nf(c[f],h[f]);if(m!==0)return m;const g=$r(a[c[f]],u[h[f]]);if(g!==0)return g}return ge(c.length,h.length)}(n.mapValue,e.mapValue);default:throw re(23264,{Pe:t})}}function i_(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ge(n,e);const t=Yn(n),r=Yn(e),s=ge(t.seconds,r.seconds);return s!==0?s:ge(t.nanos,r.nanos)}function o_(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const i=$r(t[s],r[s]);if(i)return i}return ge(t.length,r.length)}function Vi(n){return lf(n)}function lf(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Yn(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Jn(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Z.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",s=!0;for(const i of t.values||[])s?s=!1:r+=",",r+=lf(i);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${lf(t.fields[o])}`;return s+"}"}(n.mapValue):re(61005,{value:n})}function xc(n){switch(jr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Jl(n);return e?16+xc(e):16;case 5:return 2*n.stringValue.length;case 6:return Jn(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+xc(i),0)}(n.arrayValue);case 10:case 11:return function(r){let s=0;return Qr(r.fields,(i,o)=>{s+=i.length+xc(o)}),s}(n.mapValue);default:throw re(13486,{value:n})}}function aa(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function uf(n){return!!n&&"integerValue"in n}function ca(n){return!!n&&"arrayValue"in n}function a_(n){return!!n&&"nullValue"in n}function c_(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Dc(n){return!!n&&"mapValue"in n}function Xl(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[Ad])===null||t===void 0?void 0:t.stringValue)===Rd}function Lo(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Qr(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Lo(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Lo(n.arrayValue.values[t]);return e}return Object.assign({},n)}function sT(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===rT}const iT={mapValue:{fields:{[Ad]:{stringValue:Rd},[Di]:{arrayValue:{}}}}};function VN(n){return"nullValue"in n?kc:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?aa(Cs.empty(),Z.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Xl(n)?iT:{mapValue:{}}:re(35942,{value:n})}function NN(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?aa(Cs.empty(),Z.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?iT:"mapValue"in n?Xl(n)?{mapValue:{}}:kr:re(61959,{value:n})}function l_(n,e){const t=$r(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function u_(n,e){const t=$r(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.value=e}static empty(){return new Rt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Dc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Lo(t)}setAll(e){let t=We.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const c=this.getFieldsMap(t);this.applyChanges(c,r,s),r={},s=[],t=a.popLast()}o?r[a.lastSegment()]=Lo(o):s.push(a.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,r,s)}delete(e){const t=this.field(e.popLast());Dc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return xn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];Dc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){Qr(t,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Rt(Lo(this.value))}}function oT(n){const e=[];return Qr(n.fields,(t,r)=>{const s=new We([t]);if(Dc(r)){const i=oT(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Bt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e,t,r,s,i,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Je(e,0,le.min(),le.min(),le.min(),Rt.empty(),0)}static newFoundDocument(e,t,r,s){return new Je(e,1,t,le.min(),r,s,0)}static newNoDocument(e,t){return new Je(e,2,t,le.min(),le.min(),Rt.empty(),0)}static newUnknownDocument(e,t){return new Je(e,3,t,le.min(),le.min(),Rt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Rt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Rt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Je&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Je(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e,t){this.position=e,this.inclusive=t}}function h_(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const i=e[s],o=n.position[s];if(i.field.isKeyField()?r=Z.comparator(Z.fromName(o.referenceValue),t.key):r=$r(o,t.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function f_(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!xn(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(e,t="asc"){this.field=e,this.dir=t}}function ON(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{}class Te extends aT{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new MN(e,t,r):t==="array-contains"?new UN(e,r):t==="in"?new dT(e,r):t==="not-in"?new BN(e,r):t==="array-contains-any"?new jN(e,r):new Te(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new LN(e,r):new FN(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison($r(t,this.value)):t!==null&&jr(this.value)===jr(t)&&this.matchesComparison($r(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return re(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class De extends aT{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new De(e,t)}matches(e){return Oi(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function Oi(n){return n.op==="and"}function hf(n){return n.op==="or"}function Sd(n){return cT(n)&&Oi(n)}function cT(n){for(const e of n.filters)if(e instanceof De)return!1;return!0}function ff(n){if(n instanceof Te)return n.field.canonicalString()+n.op.toString()+Vi(n.value);if(Sd(n))return n.filters.map(e=>ff(e)).join(",");{const e=n.filters.map(t=>ff(t)).join(",");return`${n.op}(${e})`}}function lT(n,e){return n instanceof Te?function(r,s){return s instanceof Te&&r.op===s.op&&r.field.isEqual(s.field)&&xn(r.value,s.value)}(n,e):n instanceof De?function(r,s){return s instanceof De&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&lT(o,s.filters[a]),!0):!1}(n,e):void re(19439)}function uT(n,e){const t=n.filters.concat(e);return De.create(t,n.op)}function hT(n){return n instanceof Te?function(t){return`${t.field.canonicalString()} ${t.op} ${Vi(t.value)}`}(n):n instanceof De?function(t){return t.op.toString()+" {"+t.getFilters().map(hT).join(" ,")+"}"}(n):"Filter"}class MN extends Te{constructor(e,t,r){super(e,t,r),this.key=Z.fromName(r.referenceValue)}matches(e){const t=Z.comparator(e.key,this.key);return this.matchesComparison(t)}}class LN extends Te{constructor(e,t){super(e,"in",t),this.keys=fT("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class FN extends Te{constructor(e,t){super(e,"not-in",t),this.keys=fT("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function fT(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Z.fromName(r.referenceValue))}class UN extends Te{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ca(t)&&oa(t.arrayValue,this.value)}}class dT extends Te{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&oa(this.value.arrayValue,t)}}class BN extends Te{constructor(e,t){super(e,"not-in",t)}matches(e){if(oa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!oa(this.value.arrayValue,t)}}class jN extends Te{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ca(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>oa(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(e,t=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.Ie=null}}function df(n,e=null,t=[],r=[],s=null,i=null,o=null){return new $N(n,e,t,r,s,i,o)}function ks(n){const e=_e(n);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>ff(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Gl(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Vi(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Vi(r)).join(",")),e.Ie=t}return e.Ie}function Ca(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!ON(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!lT(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!f_(n.startAt,e.startAt)&&f_(n.endAt,e.endAt)}function ml(n){return Z.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function gl(n,e){return n.filters.filter(t=>t instanceof Te&&t.field.isEqual(e))}function d_(n,e,t){let r=kc,s=!0;for(const i of gl(n,e)){let o=kc,a=!0;switch(i.op){case"<":case"<=":o=VN(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,a=!1;break;case"!=":case"not-in":o=kc}l_({value:r,inclusive:s},{value:o,inclusive:a})<0&&(r=o,s=a)}if(t!==null){for(let i=0;i<n.orderBy.length;++i)if(n.orderBy[i].field.isEqual(e)){const o=t.position[i];l_({value:r,inclusive:s},{value:o,inclusive:t.inclusive})<0&&(r=o,s=t.inclusive);break}}return{value:r,inclusive:s}}function p_(n,e,t){let r=kr,s=!0;for(const i of gl(n,e)){let o=kr,a=!0;switch(i.op){case">=":case">":o=NN(i.value),a=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,a=!1;break;case"!=":case"not-in":o=kr}u_({value:r,inclusive:s},{value:o,inclusive:a})>0&&(r=o,s=a)}if(t!==null){for(let i=0;i<n.orderBy.length;++i)if(n.orderBy[i].field.isEqual(e)){const o=t.position[i];u_({value:r,inclusive:s},{value:o,inclusive:t.inclusive})>0&&(r=o,s=t.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e,t=null,r=[],s=[],i=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=c,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function HN(n,e,t,r,s,i,o,a){return new Ki(n,e,t,r,s,i,o,a)}function Zl(n){return new Ki(n)}function m_(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function pT(n){return n.collectionGroup!==null}function Fo(n){const e=_e(n);if(e.Ee===null){e.Ee=[];const t=new Set;for(const i of e.explicitOrderBy)e.Ee.push(i),t.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ve(We.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(i=>{t.has(i.canonicalString())||i.isKeyField()||e.Ee.push(new la(i,r))}),t.has(We.keyField().canonicalString())||e.Ee.push(new la(We.keyField(),r))}return e.Ee}function rn(n){const e=_e(n);return e.de||(e.de=qN(e,Fo(n))),e.de}function qN(n,e){if(n.limitType==="F")return df(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new la(s.field,i)});const t=n.endAt?new Ni(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ni(n.startAt.position,n.startAt.inclusive):null;return df(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function pf(n,e){const t=n.filters.concat([e]);return new Ki(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function mf(n,e,t){return new Ki(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function eu(n,e){return Ca(rn(n),rn(e))&&n.limitType===e.limitType}function mT(n){return`${ks(rn(n))}|lt:${n.limitType}`}function si(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(s=>hT(s)).join(", ")}]`),Gl(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(s=>Vi(s)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(s=>Vi(s)).join(",")),`Target(${r})`}(rn(n))}; limitType=${n.limitType})`}function ka(n,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Z.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(n,e)&&function(r,s){for(const i of Fo(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(n,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(n,e)&&function(r,s){return!(r.startAt&&!function(o,a,c){const u=h_(o,a,c);return o.inclusive?u<=0:u<0}(r.startAt,Fo(r),s)||r.endAt&&!function(o,a,c){const u=h_(o,a,c);return o.inclusive?u>=0:u>0}(r.endAt,Fo(r),s))}(n,e)}function KN(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function gT(n){return(e,t)=>{let r=!1;for(const s of Fo(n)){const i=zN(s,e,t);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function zN(n,e,t){const r=n.field.isKeyField()?Z.comparator(e.key,t.key):function(i,o,a){const c=o.data.field(i),u=a.data.field(i);return c!==null&&u!==null?$r(c,u):re(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return re(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Qr(this.inner,(t,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return JI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GN=new qe(Z.comparator);function Gt(){return GN}const _T=new qe(Z.comparator);function Io(...n){let e=_T;for(const t of n)e=e.insert(t.key,t);return e}function yT(n){let e=_T;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function bn(){return Uo()}function vT(){return Uo()}function Uo(){return new ir(n=>n.toString(),(n,e)=>n.isEqual(e))}const WN=new qe(Z.comparator),QN=new Ve(Z.comparator);function ve(...n){let e=QN;for(const t of n)e=e.add(t);return e}const YN=new Ve(ge);function JN(){return YN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pd(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ta(e)?"-0":e}}function ET(n){return{integerValue:""+n}}function XN(n,e){return sN(e)?ET(e):Pd(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(){this._=void 0}}function ZN(n,e,t){return n instanceof ua?function(s,i){const o={fields:{[eT]:{stringValue:ZI},[nT]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&bd(i)&&(i=Jl(i)),i&&(o.fields[tT]=i),{mapValue:o}}(t,e):n instanceof Mi?TT(n,e):n instanceof Li?wT(n,e):function(s,i){const o=IT(s,i),a=g_(o)+g_(s.Re);return uf(o)&&uf(s.Re)?ET(a):Pd(s.serializer,a)}(n,e)}function eO(n,e,t){return n instanceof Mi?TT(n,e):n instanceof Li?wT(n,e):t}function IT(n,e){return n instanceof ha?function(r){return uf(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class ua extends tu{}class Mi extends tu{constructor(e){super(),this.elements=e}}function TT(n,e){const t=bT(e);for(const r of n.elements)t.some(s=>xn(s,r))||t.push(r);return{arrayValue:{values:t}}}class Li extends tu{constructor(e){super(),this.elements=e}}function wT(n,e){let t=bT(e);for(const r of n.elements)t=t.filter(s=>!xn(s,r));return{arrayValue:{values:t}}}class ha extends tu{constructor(e,t){super(),this.serializer=e,this.Re=t}}function g_(n){return je(n.integerValue||n.doubleValue)}function bT(n){return ca(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(e,t){this.field=e,this.transform=t}}function nO(n,e){return n.field.isEqual(e.field)&&function(r,s){return r instanceof Mi&&s instanceof Mi||r instanceof Li&&s instanceof Li?Si(r.elements,s.elements,xn):r instanceof ha&&s instanceof ha?xn(r.Re,s.Re):r instanceof ua&&s instanceof ua}(n.transform,e.transform)}class rO{constructor(e,t){this.version=e,this.transformResults=t}}class ut{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ut}static exists(e){return new ut(void 0,e)}static updateTime(e){return new ut(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Vc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class nu{}function AT(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new xa(n.key,ut.none()):new zi(n.key,n.data,ut.none());{const t=n.data,r=Rt.empty();let s=new Ve(We.comparator);for(let i of e.fields)if(!s.has(i)){let o=t.field(i);o===null&&i.length>1&&(i=i.popLast(),o=t.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new or(n.key,r,new Bt(s.toArray()),ut.none())}}function sO(n,e,t){n instanceof zi?function(s,i,o){const a=s.value.clone(),c=y_(s.fieldTransforms,i,o.transformResults);a.setAll(c),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof or?function(s,i,o){if(!Vc(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=y_(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(RT(s)),c.setAll(a),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function Bo(n,e,t,r){return n instanceof zi?function(i,o,a,c){if(!Vc(i.precondition,o))return a;const u=i.value.clone(),h=v_(i.fieldTransforms,c,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(n,e,t,r):n instanceof or?function(i,o,a,c){if(!Vc(i.precondition,o))return a;const u=v_(i.fieldTransforms,c,o),h=o.data;return h.setAll(RT(i)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(n,e,t,r):function(i,o,a){return Vc(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function iO(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),i=IT(r.transform,s||null);i!=null&&(t===null&&(t=Rt.empty()),t.set(r.field,i))}return t||null}function __(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Si(r,s,(i,o)=>nO(i,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class zi extends nu{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class or extends nu{constructor(e,t,r,s,i=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function RT(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function y_(n,e,t){const r=new Map;ce(n.length===t.length,32656,{Ve:t.length,me:n.length});for(let s=0;s<t.length;s++){const i=n[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,eO(o,a,t[s]))}return r}function v_(n,e,t){const r=new Map;for(const s of n){const i=s.transform,o=t.data.field(s.field);r.set(s.field,ZN(i,o,e))}return r}class xa extends nu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ST extends nu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&sO(i,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Bo(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Bo(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=vT();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=t.has(s.key)?null:a;const c=AT(o,a);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(le.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ve())}isEqual(e){return this.batchId===e.batchId&&Si(this.mutations,e.mutations,(t,r)=>__(t,r))&&Si(this.baseMutations,e.baseMutations,(t,r)=>__(t,r))}}class kd{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){ce(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let s=function(){return WN}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new kd(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oO{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ze,be;function aO(n){switch(n){case B.OK:return re(64938);case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0;default:return re(15467,{code:n})}}function PT(n){if(n===void 0)return Ot("GRPC error has no .code"),B.UNKNOWN;switch(n){case Ze.OK:return B.OK;case Ze.CANCELLED:return B.CANCELLED;case Ze.UNKNOWN:return B.UNKNOWN;case Ze.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case Ze.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case Ze.INTERNAL:return B.INTERNAL;case Ze.UNAVAILABLE:return B.UNAVAILABLE;case Ze.UNAUTHENTICATED:return B.UNAUTHENTICATED;case Ze.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case Ze.NOT_FOUND:return B.NOT_FOUND;case Ze.ALREADY_EXISTS:return B.ALREADY_EXISTS;case Ze.PERMISSION_DENIED:return B.PERMISSION_DENIED;case Ze.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case Ze.ABORTED:return B.ABORTED;case Ze.OUT_OF_RANGE:return B.OUT_OF_RANGE;case Ze.UNIMPLEMENTED:return B.UNIMPLEMENTED;case Ze.DATA_LOSS:return B.DATA_LOSS;default:return re(39323,{code:n})}}(be=Ze||(Ze={}))[be.OK=0]="OK",be[be.CANCELLED=1]="CANCELLED",be[be.UNKNOWN=2]="UNKNOWN",be[be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",be[be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",be[be.NOT_FOUND=5]="NOT_FOUND",be[be.ALREADY_EXISTS=6]="ALREADY_EXISTS",be[be.PERMISSION_DENIED=7]="PERMISSION_DENIED",be[be.UNAUTHENTICATED=16]="UNAUTHENTICATED",be[be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",be[be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",be[be.ABORTED=10]="ABORTED",be[be.OUT_OF_RANGE=11]="OUT_OF_RANGE",be[be.UNIMPLEMENTED=12]="UNIMPLEMENTED",be[be.INTERNAL=13]="INTERNAL",be[be.UNAVAILABLE=14]="UNAVAILABLE",be[be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cO=new Lr([4294967295,4294967295],0);function E_(n){const e=OI().encode(n),t=new SI;return t.update(e),new Uint8Array(t.digest())}function I_(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Lr([t,r],0),new Lr([s,i],0)]}class Dd{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new To(`Invalid padding: ${t}`);if(r<0)throw new To(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new To(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new To(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=Lr.fromNumber(this.pe)}we(e,t,r){let s=e.add(t.multiply(Lr.fromNumber(r)));return s.compare(cO)===1&&(s=new Lr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=E_(e),[r,s]=I_(t);for(let i=0;i<this.hashCount;i++){const o=this.we(r,s,i);if(!this.be(o))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Dd(i,s,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.pe===0)return;const t=E_(e),[r,s]=I_(t);for(let i=0;i<this.hashCount;i++){const o=this.we(r,s,i);this.Se(o)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class To extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(e,t,r,s,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,Da.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new ru(le.min(),s,new qe(ge),Gt(),ve())}}class Da{constructor(e,t,r,s,i){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Da(r,t,ve(),ve(),ve())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e,t,r,s){this.De=e,this.removedTargetIds=t,this.key=r,this.ve=s}}class CT{constructor(e,t){this.targetId=e,this.Ce=t}}class kT{constructor(e,t,r=nt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class T_{constructor(){this.Fe=0,this.Me=w_(),this.xe=nt.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=ve(),t=ve(),r=ve();return this.Me.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:re(38017,{changeType:i})}}),new Da(this.xe,this.Oe,e,t,r)}Qe(){this.Ne=!1,this.Me=w_()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,ce(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class lO{constructor(e){this.ze=e,this.je=new Map,this.He=Gt(),this.Je=fc(),this.Ye=fc(),this.Ze=new qe(ge)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const r=this.rt(t);switch(e.state){case 0:this.it(t)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(t);break;case 3:this.it(t)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),r.ke(e.resumeToken));break;default:re(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((r,s)=>{this.it(s)&&t(s)})}ot(e){const t=e.targetId,r=e.Ce.count,s=this._t(t);if(s){const i=s.target;if(ml(i))if(r===0){const o=new Z(i.path);this.tt(t,o,Je.newNoDocument(o,le.min()))}else ce(r===1,20013,{expectedCount:r});else{const o=this.ut(t);if(o!==r){const a=this.ct(e),c=a?this.lt(a,e,o):1;if(c!==0){this.st(t);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,u)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=t;let o,a;try{o=Jn(r).toUint8Array()}catch(c){if(c instanceof XI)return Ps("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Dd(o,s,i)}catch(c){return Ps(c instanceof To?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.pe===0?null:a}lt(e,t,r){return t.Ce.count===r-this.Tt(e,t.targetId)?0:2}Tt(e,t){const r=this.ze.getRemoteKeysForTarget(t);let s=0;return r.forEach(i=>{const o=this.ze.Pt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.tt(t,i,null),s++)}),s}It(e){const t=new Map;this.je.forEach((i,o)=>{const a=this._t(o);if(a){if(i.current&&ml(a.target)){const c=new Z(a.target.path);this.Et(c).has(o)||this.dt(o,c)||this.tt(o,c,Je.newNoDocument(c,e))}i.Le&&(t.set(o,i.qe()),i.Qe())}});let r=ve();this.Ye.forEach((i,o)=>{let a=!0;o.forEachWhile(c=>{const u=this._t(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.He.forEach((i,o)=>o.setReadTime(e));const s=new ru(e,t,this.Ze,this.He,r);return this.He=Gt(),this.Je=fc(),this.Ye=fc(),this.Ze=new qe(ge),s}et(e,t){if(!this.it(e))return;const r=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,r),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,r){if(!this.it(e))return;const s=this.rt(e);this.dt(e,t)?s.$e(t,1):s.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),r&&(this.He=this.He.insert(t,r))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new T_,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new Ve(ge),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new Ve(ge),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||z("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new T_),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function fc(){return new qe(Z.comparator)}function w_(){return new qe(Z.comparator)}const uO={asc:"ASCENDING",desc:"DESCENDING"},hO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},fO={and:"AND",or:"OR"};class dO{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function gf(n,e){return n.useProto3Json||Gl(e)?e:{value:e}}function Fi(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function xT(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function pO(n,e){return Fi(n,e.toTimestamp())}function Mt(n){return ce(!!n,49232),le.fromTimestamp(function(t){const r=Yn(t);return new Qe(r.seconds,r.nanos)}(n))}function Vd(n,e){return _f(n,e).canonicalString()}function _f(n,e){const t=function(s){return new xe(["projects",s.projectId,"databases",s.database])}(n).child("documents");return e===void 0?t:t.child(e)}function DT(n){const e=xe.fromString(n);return ce(jT(e),10190,{key:e.toString()}),e}function _l(n,e){return Vd(n.databaseId,e.path)}function Is(n,e){const t=DT(e);if(t.get(1)!==n.databaseId.projectId)throw new Y(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Y(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Z(OT(t))}function VT(n,e){return Vd(n.databaseId,e)}function NT(n){const e=DT(n);return e.length===4?xe.emptyPath():OT(e)}function yf(n){return new xe(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function OT(n){return ce(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function b_(n,e,t){return{name:_l(n,e),fields:t.value.mapValue.fields}}function mO(n,e,t){const r=Is(n,e.name),s=Mt(e.updateTime),i=e.createTime?Mt(e.createTime):le.min(),o=new Rt({mapValue:{fields:e.fields}}),a=Je.newFoundDocument(r,s,i,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function gO(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:re(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(u,h){return u.useProto3Json?(ce(h===void 0||typeof h=="string",58123),nt.fromBase64String(h||"")):(ce(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),nt.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const h=u.code===void 0?B.UNKNOWN:PT(u.code);return new Y(h,u.message||"")}(o);t=new kT(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Is(n,r.document.name),i=Mt(r.document.updateTime),o=r.document.createTime?Mt(r.document.createTime):le.min(),a=new Rt({mapValue:{fields:r.document.fields}}),c=Je.newFoundDocument(s,i,o,a),u=r.targetIds||[],h=r.removedTargetIds||[];t=new Nc(u,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Is(n,r.document),i=r.readTime?Mt(r.readTime):le.min(),o=Je.newNoDocument(s,i),a=r.removedTargetIds||[];t=new Nc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Is(n,r.document),i=r.removedTargetIds||[];t=new Nc([],i,s,null)}else{if(!("filter"in e))return re(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new oO(s,i),a=r.targetId;t=new CT(a,o)}}return t}function yl(n,e){let t;if(e instanceof zi)t={update:b_(n,e.key,e.value)};else if(e instanceof xa)t={delete:_l(n,e.key)};else if(e instanceof or)t={update:b_(n,e.key,e.data),updateMask:TO(e.fieldMask)};else{if(!(e instanceof ST))return re(16599,{ft:e.type});t={verify:_l(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof ua)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Mi)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Li)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ha)return{fieldPath:o.field.canonicalString(),increment:a.Re};throw re(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:pO(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:re(27497)}(n,e.precondition)),t}function vf(n,e){const t=e.currentDocument?function(i){return i.updateTime!==void 0?ut.updateTime(Mt(i.updateTime)):i.exists!==void 0?ut.exists(i.exists):ut.none()}(e.currentDocument):ut.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(o,a){let c=null;if("setToServerValue"in a)ce(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),c=new ua;else if("appendMissingElements"in a){const h=a.appendMissingElements.values||[];c=new Mi(h)}else if("removeAllFromArray"in a){const h=a.removeAllFromArray.values||[];c=new Li(h)}else"increment"in a?c=new ha(o,a.increment):re(16584,{proto:a});const u=We.fromServerFormat(a.fieldPath);return new tO(u,c)}(n,s)):[];if(e.update){e.update.name;const s=Is(n,e.update.name),i=new Rt({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(c){const u=c.fieldPaths||[];return new Bt(u.map(h=>We.fromServerFormat(h)))}(e.updateMask);return new or(s,i,o,t,r)}return new zi(s,i,t,r)}if(e.delete){const s=Is(n,e.delete);return new xa(s,t)}if(e.verify){const s=Is(n,e.verify);return new ST(s,t)}return re(1463,{proto:e})}function _O(n,e){return n&&n.length>0?(ce(e!==void 0,14353),n.map(t=>function(s,i){let o=s.updateTime?Mt(s.updateTime):Mt(i);return o.isEqual(le.min())&&(o=Mt(i)),new rO(o,s.transformResults||[])}(t,e))):[]}function MT(n,e){return{documents:[VT(n,e.path)]}}function LT(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=VT(n,s);const i=function(u){if(u.length!==0)return BT(De.create(u,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(h=>function(m){return{field:ii(m.field),direction:vO(m.dir)}}(h))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=gf(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{gt:t,parent:s}}function FT(n){let e=NT(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){ce(r===1,65062);const h=t.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];t.where&&(i=function(f){const m=UT(f);return m instanceof De&&Sd(m)?m.getFilters():[m]}(t.where));let o=[];t.orderBy&&(o=function(f){return f.map(m=>function(E){return new la(oi(E.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(m))}(t.orderBy));let a=null;t.limit&&(a=function(f){let m;return m=typeof f=="object"?f.value:f,Gl(m)?null:m}(t.limit));let c=null;t.startAt&&(c=function(f){const m=!!f.before,g=f.values||[];return new Ni(g,m)}(t.startAt));let u=null;return t.endAt&&(u=function(f){const m=!f.before,g=f.values||[];return new Ni(g,m)}(t.endAt)),HN(e,s,o,i,a,"F",c,u)}function yO(n,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return re(28987,{purpose:s})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function UT(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=oi(t.unaryFilter.field);return Te.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=oi(t.unaryFilter.field);return Te.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=oi(t.unaryFilter.field);return Te.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=oi(t.unaryFilter.field);return Te.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return re(61313);default:return re(60726)}}(n):n.fieldFilter!==void 0?function(t){return Te.create(oi(t.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return re(58110);default:return re(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return De.create(t.compositeFilter.filters.map(r=>UT(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return re(1026)}}(t.compositeFilter.op))}(n):re(30097,{filter:n})}function vO(n){return uO[n]}function EO(n){return hO[n]}function IO(n){return fO[n]}function ii(n){return{fieldPath:n.canonicalString()}}function oi(n){return We.fromServerFormat(n.fieldPath)}function BT(n){return n instanceof Te?function(t){if(t.op==="=="){if(c_(t.value))return{unaryFilter:{field:ii(t.field),op:"IS_NAN"}};if(a_(t.value))return{unaryFilter:{field:ii(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(c_(t.value))return{unaryFilter:{field:ii(t.field),op:"IS_NOT_NAN"}};if(a_(t.value))return{unaryFilter:{field:ii(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ii(t.field),op:EO(t.op),value:t.value}}}(n):n instanceof De?function(t){const r=t.getFilters().map(s=>BT(s));return r.length===1?r[0]:{compositeFilter:{op:IO(t.op),filters:r}}}(n):re(54877,{filter:n})}function TO(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function jT(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e,t,r,s,i=le.min(),o=le.min(),a=nt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new Kn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Kn(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Kn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Kn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{constructor(e){this.wt=e}}function wO(n,e){let t;if(e.document)t=mO(n.wt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Z.fromSegments(e.noDocument.path),s=Ds(e.noDocument.readTime);t=Je.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return re(56709);{const r=Z.fromSegments(e.unknownDocument.path),s=Ds(e.unknownDocument.version);t=Je.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime(function(s){const i=new Qe(s[0],s[1]);return le.fromTimestamp(i)}(e.readTime)),t}function A_(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:vl(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(i,o){return{name:_l(i,o.key),fields:o.data.value.mapValue.fields,updateTime:Fi(i,o.version.toTimestamp()),createTime:Fi(i,o.createTime.toTimestamp())}}(n.wt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:xs(e.version)};else{if(!e.isUnknownDocument())return re(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:xs(e.version)}}return r}function vl(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function xs(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ds(n){const e=new Qe(n.seconds,n.nanoseconds);return le.fromTimestamp(e)}function hs(n,e){const t=(e.baseMutations||[]).map(i=>vf(n.wt,i));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const a=e.mutations[i+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const r=e.mutations.map(i=>vf(n.wt,i)),s=Qe.fromMillis(e.localWriteTimeMs);return new Cd(e.batchId,s,t,r)}function wo(n){const e=Ds(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Ds(n.lastLimboFreeSnapshotVersion):le.min();let r;return r=function(i){return i.documents!==void 0}(n.query)?function(i){const o=i.documents.length;return ce(o===1,1966,{count:o}),rn(Zl(NT(i.documents[0])))}(n.query):function(i){return rn(FT(i))}(n.query),new Kn(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,nt.fromBase64String(n.resumeToken))}function HT(n,e){const t=xs(e.snapshotVersion),r=xs(e.lastLimboFreeSnapshotVersion);let s;s=ml(e.target)?MT(n.wt,e.target):LT(n.wt,e.target).gt;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ks(e.target),readTime:t,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function qT(n){const e=FT({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?mf(e,e.limit,"L"):e}function ah(n,e){return new xd(e.largestBatchId,vf(n.wt,e.overlayMutation))}function R_(n,e){const t=e.path.lastSegment();return[n,Ct(e.path.popLast()),t]}function S_(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:xs(r.readTime),documentKey:Ct(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bO{getBundleMetadata(e,t){return P_(e).get(t).next(r=>{if(r)return function(i){return{id:i.bundleId,createTime:Ds(i.createTime),version:i.version}}(r)})}saveBundleMetadata(e,t){return P_(e).put(function(s){return{bundleId:s.id,createTime:xs(Mt(s.createTime)),version:s.version}}(t))}getNamedQuery(e,t){return C_(e).get(t).next(r=>{if(r)return function(i){return{name:i.name,query:qT(i.bundledQuery),readTime:Ds(i.readTime)}}(r)})}saveNamedQuery(e,t){return C_(e).put(function(s){return{name:s.name,readTime:xs(Mt(s.readTime)),bundledQuery:s.bundledQuery}}(t))}}function P_(n){return at(n,Wl)}function C_(n){return at(n,Ql)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(e,t){this.serializer=e,this.userId=t}static bt(e,t){const r=t.uid||"";return new su(e,r)}getOverlay(e,t){return uo(e).get(R_(this.userId,t)).next(r=>r?ah(this.serializer,r):null)}getOverlays(e,t){const r=bn();return O.forEach(t,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,t,r){const s=[];return r.forEach((i,o)=>{const a=new xd(t,o);s.push(this.St(e,a))}),O.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach(o=>s.add(Ct(o.getCollectionPath())));const i=[];return s.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);i.push(uo(e).X(af,a))}),O.waitFor(i)}getOverlaysForCollection(e,t,r){const s=bn(),i=Ct(t),o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return uo(e).J(af,o).next(a=>{for(const c of a){const u=ah(this.serializer,c);s.set(u.getKey(),u)}return s})}getOverlaysForCollectionGroup(e,t,r,s){const i=bn();let o;const a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return uo(e).te({index:GI,range:a},(c,u,h)=>{const f=ah(this.serializer,u);i.size()<s||f.largestBatchId===o?(i.set(f.getKey(),f),o=f.largestBatchId):h.done()}).next(()=>i)}St(e,t){return uo(e).put(function(s,i,o){const[a,c,u]=R_(i,o.mutation.key);return{userId:i,collectionPath:c,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:yl(s.wt,o.mutation)}}(this.serializer,this.userId,t))}}function uo(n){return at(n,Yl)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO{Dt(e){return at(e,Td)}getSessionToken(e){return this.Dt(e).get("sessionToken").next(t=>{const r=t==null?void 0:t.value;return r?nt.fromUint8Array(r):nt.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Dt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(){}vt(e,t){this.Ct(e,t),t.Ft()}Ct(e,t){if("nullValue"in e)this.Mt(t,5);else if("booleanValue"in e)this.Mt(t,10),t.xt(e.booleanValue?1:0);else if("integerValue"in e)this.Mt(t,15),t.xt(je(e.integerValue));else if("doubleValue"in e){const r=je(e.doubleValue);isNaN(r)?this.Mt(t,13):(this.Mt(t,15),ta(r)?t.xt(0):t.xt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Mt(t,20),typeof r=="string"&&(r=Yn(r)),t.Ot(`${r.seconds||""}`),t.xt(r.nanos||0)}else if("stringValue"in e)this.Nt(e.stringValue,t),this.Bt(t);else if("bytesValue"in e)this.Mt(t,30),t.Lt(Jn(e.bytesValue)),this.Bt(t);else if("referenceValue"in e)this.kt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Mt(t,45),t.xt(r.latitude||0),t.xt(r.longitude||0)}else"mapValue"in e?sT(e)?this.Mt(t,Number.MAX_SAFE_INTEGER):Xl(e)?this.qt(e.mapValue,t):(this.Qt(e.mapValue,t),this.Bt(t)):"arrayValue"in e?(this.$t(e.arrayValue,t),this.Bt(t)):re(19022,{Ut:e})}Nt(e,t){this.Mt(t,25),this.Kt(e,t)}Kt(e,t){t.Ot(e)}Qt(e,t){const r=e.fields||{};this.Mt(t,55);for(const s of Object.keys(r))this.Nt(s,t),this.Ct(r[s],t)}qt(e,t){var r,s;const i=e.fields||{};this.Mt(t,53);const o=Di,a=((s=(r=i[o].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.length)||0;this.Mt(t,15),t.xt(je(a)),this.Nt(o,t),this.Ct(i[o],t)}$t(e,t){const r=e.values||[];this.Mt(t,50);for(const s of r)this.Ct(s,t)}kt(e,t){this.Mt(t,37),Z.fromName(e).path.forEach(r=>{this.Mt(t,60),this.Kt(r,t)})}Mt(e,t){e.xt(t)}Bt(e){e.xt(2)}}fs.Wt=new fs;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ys=255;function RO(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function k_(n){const e=64-function(r){let s=0;for(let i=0;i<8;++i){const o=RO(255&r[i]);if(s+=o,o!==8)break}return s}(n);return Math.ceil(e/8)}class SO{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Gt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.zt(r.value),r=t.next();this.jt()}Ht(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Jt(r.value),r=t.next();this.Yt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.zt(r);else if(r<2048)this.zt(960|r>>>6),this.zt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.zt(480|r>>>12),this.zt(128|63&r>>>6),this.zt(128|63&r);else{const s=t.codePointAt(0);this.zt(240|s>>>18),this.zt(128|63&s>>>12),this.zt(128|63&s>>>6),this.zt(128|63&s)}}this.jt()}Xt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const s=t.codePointAt(0);this.Jt(240|s>>>18),this.Jt(128|63&s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s)}}this.Yt()}en(e){const t=this.tn(e),r=k_(t);this.nn(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}rn(e){const t=this.tn(e),r=k_(t);this.nn(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}sn(){this._n(Ys),this._n(255)}an(){this.un(Ys),this.un(255)}reset(){this.position=0}seed(e){this.nn(e.length),this.buffer.set(e,this.position),this.position+=e.length}cn(){return this.buffer.slice(0,this.position)}tn(e){const t=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}zt(e){const t=255&e;t===0?(this._n(0),this._n(255)):t===Ys?(this._n(Ys),this._n(0)):this._n(t)}Jt(e){const t=255&e;t===0?(this.un(0),this.un(255)):t===Ys?(this.un(Ys),this.un(0)):this.un(e)}jt(){this._n(0),this._n(1)}Yt(){this.un(0),this.un(1)}_n(e){this.nn(1),this.buffer[this.position++]=e}un(e){this.nn(1),this.buffer[this.position++]=~e}nn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class PO{constructor(e){this.ln=e}Lt(e){this.ln.Gt(e)}Ot(e){this.ln.Zt(e)}xt(e){this.ln.en(e)}Ft(){this.ln.sn()}}class CO{constructor(e){this.ln=e}Lt(e){this.ln.Ht(e)}Ot(e){this.ln.Xt(e)}xt(e){this.ln.rn(e)}Ft(){this.ln.an()}}class ho{constructor(){this.ln=new SO,this.hn=new PO(this.ln),this.Pn=new CO(this.ln)}seed(e){this.ln.seed(e)}Tn(e){return e===0?this.hn:this.Pn}cn(){return this.ln.cn()}reset(){this.ln.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e,t,r,s){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=s}In(){const e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new ds(this.indexId,this.documentKey,this.arrayValue,r)}}function mr(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=x_(n.arrayValue,e.arrayValue),t!==0?t:(t=x_(n.directionalValue,e.directionalValue),t!==0?t:Z.comparator(n.documentKey,e.documentKey)))}function x_(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D_{constructor(e){this.En=new Ve((t,r)=>We.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.dn=e.orderBy,this.An=[];for(const t of e.filters){const r=t;r.isInequality()?this.En=this.En.add(r):this.An.push(r)}}get Rn(){return this.En.size>1}Vn(e){if(ce(e.collectionGroup===this.collectionId,49279),this.Rn)return!1;const t=rf(e);if(t!==void 0&&!this.mn(t))return!1;const r=cs(e);let s=new Set,i=0,o=0;for(;i<r.length&&this.mn(r[i]);++i)s=s.add(r[i].fieldPath.canonicalString());if(i===r.length)return!0;if(this.En.size>0){const a=this.En.getIterator().getNext();if(!s.has(a.field.canonicalString())){const c=r[i];if(!this.fn(a,c)||!this.gn(this.dn[o++],c))return!1}++i}for(;i<r.length;++i){const a=r[i];if(o>=this.dn.length||!this.gn(this.dn[o++],a))return!1}return!0}pn(){if(this.Rn)return null;let e=new Ve(We.comparator);const t=[];for(const r of this.An)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Sc(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Sc(r.field,0))}for(const r of this.dn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Sc(r.field,r.dir==="asc"?0:1)));return new cl(cl.UNKNOWN_ID,this.collectionId,t,ea.empty())}mn(e){for(const t of this.An)if(this.fn(t,e))return!0;return!1}fn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}gn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KT(n){var e,t;if(ce(n instanceof Te||n instanceof De,20012),n instanceof Te){if(n instanceof dT){const s=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(i=>Te.create(n.field,"==",i)))||[];return De.create(s,"or")}return n}const r=n.filters.map(s=>KT(s));return De.create(r,n.op)}function kO(n){if(n.getFilters().length===0)return[];const e=Tf(KT(n));return ce(zT(e),7391),Ef(e)||If(e)?[e]:e.getFilters()}function Ef(n){return n instanceof Te}function If(n){return n instanceof De&&Sd(n)}function zT(n){return Ef(n)||If(n)||function(t){if(t instanceof De&&hf(t)){for(const r of t.getFilters())if(!Ef(r)&&!If(r))return!1;return!0}return!1}(n)}function Tf(n){if(ce(n instanceof Te||n instanceof De,34018),n instanceof Te)return n;if(n.filters.length===1)return Tf(n.filters[0]);const e=n.filters.map(r=>Tf(r));let t=De.create(e,n.op);return t=El(t),zT(t)?t:(ce(t instanceof De,64498),ce(Oi(t),40251),ce(t.filters.length>1,57927),t.filters.reduce((r,s)=>Nd(r,s)))}function Nd(n,e){let t;return ce(n instanceof Te||n instanceof De,38388),ce(e instanceof Te||e instanceof De,25473),t=n instanceof Te?e instanceof Te?function(s,i){return De.create([s,i],"and")}(n,e):V_(n,e):e instanceof Te?V_(e,n):function(s,i){if(ce(s.filters.length>0&&i.filters.length>0,48005),Oi(s)&&Oi(i))return uT(s,i.getFilters());const o=hf(s)?s:i,a=hf(s)?i:s,c=o.filters.map(u=>Nd(u,a));return De.create(c,"or")}(n,e),El(t)}function V_(n,e){if(Oi(e))return uT(e,n.getFilters());{const t=e.filters.map(r=>Nd(n,r));return De.create(t,"or")}}function El(n){if(ce(n instanceof Te||n instanceof De,11850),n instanceof Te)return n;const e=n.getFilters();if(e.length===1)return El(e[0]);if(cT(n))return n;const t=e.map(s=>El(s)),r=[];return t.forEach(s=>{s instanceof Te?r.push(s):s instanceof De&&(s.op===n.op?r.push(...s.filters):r.push(s))}),r.length===1?r[0]:De.create(r,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{constructor(){this.yn=new Od}addToCollectionParentIndex(e,t){return this.yn.add(t),O.resolve()}getCollectionParents(e,t){return O.resolve(this.yn.getEntries(t))}addFieldIndex(e,t){return O.resolve()}deleteFieldIndex(e,t){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,t){return O.resolve()}getDocumentsMatchingTarget(e,t){return O.resolve(null)}getIndexType(e,t){return O.resolve(0)}getFieldIndexes(e,t){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,t){return O.resolve(Wt.min())}getMinOffsetFromCollectionGroup(e,t){return O.resolve(Wt.min())}updateCollectionGroup(e,t,r){return O.resolve()}updateIndexEntries(e,t){return O.resolve()}}class Od{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Ve(xe.comparator),i=!s.has(r);return this.index[t]=s.add(r),i}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ve(xe.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N_="IndexedDbIndexManager",dc=new Uint8Array(0);class DO{constructor(e,t){this.databaseId=t,this.wn=new Od,this.bn=new ir(r=>ks(r),(r,s)=>Ca(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.wn.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener(()=>{this.wn.add(t)});const i={collectionId:r,parent:Ct(s)};return O_(e).put(i)}return O.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[LI(t),""],!1,!0);return O_(e).J(s).next(i=>{for(const o of i){if(o.collectionId!==t)break;r.push(wn(o.parent))}return r})}addFieldIndex(e,t){const r=fo(e),s=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(t);delete s.indexId;const i=r.add(s);if(t.indexState){const o=Xs(e);return i.next(a=>{o.put(S_(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return i.next()}deleteFieldIndex(e,t){const r=fo(e),s=Xs(e),i=Js(e);return r.delete(t.indexId).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=fo(e),r=Js(e),s=Xs(e);return t.X().next(()=>r.X()).next(()=>s.X())}createTargetIndexes(e,t){return O.forEach(this.Sn(t),r=>this.getIndexType(e,r).next(s=>{if(s===0||s===1){const i=new D_(r).pn();if(i!=null)return this.addFieldIndex(e,i)}}))}getDocumentsMatchingTarget(e,t){const r=Js(e);let s=!0;const i=new Map;return O.forEach(this.Sn(t),o=>this.Dn(e,o).next(a=>{s&&(s=!!a),i.set(o,a)})).next(()=>{if(s){let o=ve();const a=[];return O.forEach(i,(c,u)=>{z(N_,`Using index ${function(I){return`id=${I.indexId}|cg=${I.collectionGroup}|f=${I.fields.map(C=>`${C.fieldPath}:${C.kind}`).join(",")}`}(c)} to execute ${ks(t)}`);const h=function(I,C){const N=rf(C);if(N===void 0)return null;for(const F of gl(I,N.fieldPath))switch(F.op){case"array-contains-any":return F.value.arrayValue.values||[];case"array-contains":return[F.value]}return null}(u,c),f=function(I,C){const N=new Map;for(const F of cs(C))for(const w of gl(I,F.fieldPath))switch(w.op){case"==":case"in":N.set(F.fieldPath.canonicalString(),w.value);break;case"not-in":case"!=":return N.set(F.fieldPath.canonicalString(),w.value),Array.from(N.values())}return null}(u,c),m=function(I,C){const N=[];let F=!0;for(const w of cs(C)){const y=w.kind===0?d_(I,w.fieldPath,I.startAt):p_(I,w.fieldPath,I.startAt);N.push(y.value),F&&(F=y.inclusive)}return new Ni(N,F)}(u,c),g=function(I,C){const N=[];let F=!0;for(const w of cs(C)){const y=w.kind===0?p_(I,w.fieldPath,I.endAt):d_(I,w.fieldPath,I.endAt);N.push(y.value),F&&(F=y.inclusive)}return new Ni(N,F)}(u,c),E=this.vn(c,u,m),T=this.vn(c,u,g),x=this.Cn(c,u,f),V=this.Fn(c.indexId,h,E,m.inclusive,T,g.inclusive,x);return O.forEach(V,D=>r.Z(D,t.limit).next(I=>{I.forEach(C=>{const N=Z.fromSegments(C.documentKey);o.has(N)||(o=o.add(N),a.push(N))})}))}).next(()=>a)}return O.resolve(null)})}Sn(e){let t=this.bn.get(e);return t||(e.filters.length===0?t=[e]:t=kO(De.create(e.filters,"and")).map(r=>df(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.bn.set(e,t),t)}Fn(e,t,r,s,i,o,a){const c=(t!=null?t.length:1)*Math.max(r.length,i.length),u=c/(t!=null?t.length:1),h=[];for(let f=0;f<c;++f){const m=t?this.Mn(t[f/u]):dc,g=this.xn(e,m,r[f%u],s),E=this.On(e,m,i[f%u],o),T=a.map(x=>this.xn(e,m,x,!0));h.push(...this.createRange(g,E,T))}return h}xn(e,t,r,s){const i=new ds(e,Z.empty(),t,r);return s?i:i.In()}On(e,t,r,s){const i=new ds(e,Z.empty(),t,r);return s?i.In():i}Dn(e,t){const r=new D_(t),s=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next(i=>{let o=null;for(const a of i)r.Vn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let r=2;const s=this.Sn(t);return O.forEach(s,i=>this.Dn(e,i).next(o=>{o?r!==0&&o.fields.length<function(c){let u=new Ve(We.comparator),h=!1;for(const f of c.filters)for(const m of f.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?h=!0:u=u.add(m.field));for(const f of c.orderBy)f.field.isKeyField()||(u=u.add(f.field));return u.size+(h?1:0)}(i)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(t)&&s.length>1&&r===2?1:r)}Nn(e,t){const r=new ho;for(const s of cs(e)){const i=t.data.field(s.fieldPath);if(i==null)return null;const o=r.Tn(s.kind);fs.Wt.vt(i,o)}return r.cn()}Mn(e){const t=new ho;return fs.Wt.vt(e,t.Tn(0)),t.cn()}Bn(e,t){const r=new ho;return fs.Wt.vt(aa(this.databaseId,t),r.Tn(function(i){const o=cs(i);return o.length===0?0:o[o.length-1].kind}(e))),r.cn()}Cn(e,t,r){if(r===null)return[];let s=[];s.push(new ho);let i=0;for(const o of cs(e)){const a=r[i++];for(const c of s)if(this.Ln(t,o.fieldPath)&&ca(a))s=this.kn(s,o,a);else{const u=c.Tn(o.kind);fs.Wt.vt(a,u)}}return this.qn(s)}vn(e,t,r){return this.Cn(e,t,r.position)}qn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].cn();return t}kn(e,t,r){const s=[...e],i=[];for(const o of r.arrayValue.values||[])for(const a of s){const c=new ho;c.seed(a.cn()),fs.Wt.vt(o,c.Tn(t.kind)),i.push(c)}return i}Ln(e,t){return!!e.filters.find(r=>r instanceof Te&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){const r=fo(e),s=Xs(e);return(t?r.J(of,IDBKeyRange.bound(t,t)):r.J()).next(i=>{const o=[];return O.forEach(i,a=>s.get([a.indexId,this.uid]).next(c=>{o.push(function(h,f){const m=f?new ea(f.sequenceNumber,new Wt(Ds(f.readTime),new Z(wn(f.documentKey)),f.largestBatchId)):ea.empty(),g=h.fields.map(([E,T])=>new Sc(We.fromServerFormat(E),T));return new cl(h.indexId,h.collectionGroup,g,m)}(a,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,s)=>{const i=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:ge(r.collectionGroup,s.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const s=fo(e),i=Xs(e);return this.Qn(e).next(o=>s.J(of,IDBKeyRange.bound(t,t)).next(a=>O.forEach(a,c=>i.put(S_(c.indexId,this.uid,o,r)))))}updateIndexEntries(e,t){const r=new Map;return O.forEach(t,(s,i)=>{const o=r.get(s.collectionGroup);return(o?O.resolve(o):this.getFieldIndexes(e,s.collectionGroup)).next(a=>(r.set(s.collectionGroup,a),O.forEach(a,c=>this.$n(e,s,c).next(u=>{const h=this.Un(i,c);return u.isEqual(h)?O.resolve():this.Kn(e,i,c,u,h)}))))})}Wn(e,t,r,s){return Js(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.Bn(r,t.key),documentKey:t.key.path.toArray()})}Gn(e,t,r,s){return Js(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.Bn(r,t.key),t.key.path.toArray()])}$n(e,t,r){const s=Js(e);let i=new Ve(mr);return s.te({index:zI,range:IDBKeyRange.only([r.indexId,this.uid,this.Bn(r,t)])},(o,a)=>{i=i.add(new ds(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>i)}Un(e,t){let r=new Ve(mr);const s=this.Nn(t,e);if(s==null)return r;const i=rf(t);if(i!=null){const o=e.data.field(i.fieldPath);if(ca(o))for(const a of o.arrayValue.values||[])r=r.add(new ds(t.indexId,e.key,this.Mn(a),s))}else r=r.add(new ds(t.indexId,e.key,dc,s));return r}Kn(e,t,r,s,i){z(N_,"Updating index entries for document '%s'",t.key);const o=[];return function(c,u,h,f,m){const g=c.getIterator(),E=u.getIterator();let T=Qs(g),x=Qs(E);for(;T||x;){let V=!1,D=!1;if(T&&x){const I=h(T,x);I<0?D=!0:I>0&&(V=!0)}else T!=null?D=!0:V=!0;V?(f(x),x=Qs(E)):D?(m(T),T=Qs(g)):(T=Qs(g),x=Qs(E))}}(s,i,mr,a=>{o.push(this.Wn(e,t,r,a))},a=>{o.push(this.Gn(e,t,r,a))}),O.waitFor(o)}Qn(e){let t=1;return Xs(e).te({index:KI,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,i)=>{i.done(),t=s.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,a)=>mr(o,a)).filter((o,a,c)=>!a||mr(o,c[a-1])!==0);const s=[];s.push(e);for(const o of r){const a=mr(o,e),c=mr(o,t);if(a===0)s[0]=e.In();else if(a>0&&c<0)s.push(o),s.push(o.In());else if(c>0)break}s.push(t);const i=[];for(let o=0;o<s.length;o+=2){if(this.zn(s[o],s[o+1]))return[];const a=[s[o].indexId,this.uid,s[o].arrayValue,s[o].directionalValue,dc,[]],c=[s[o+1].indexId,this.uid,s[o+1].arrayValue,s[o+1].directionalValue,dc,[]];i.push(IDBKeyRange.bound(a,c))}return i}zn(e,t){return mr(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(M_)}getMinOffset(e,t){return O.mapArray(this.Sn(t),r=>this.Dn(e,r).next(s=>s||re(44426))).next(M_)}}function O_(n){return at(n,sa)}function Js(n){return at(n,dl)}function fo(n){return at(n,Id)}function Xs(n){return at(n,fl)}function M_(n){ce(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;yd(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new Wt(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},GT=41943040;class Tt{static withCacheSize(e){return new Tt(e,Tt.DEFAULT_COLLECTION_PERCENTILE,Tt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WT(n,e,t){const r=n.store(un),s=n.store(Pi),i=[],o=IDBKeyRange.only(t.batchId);let a=0;const c=r.te({range:o},(h,f,m)=>(a++,m.delete()));i.push(c.next(()=>{ce(a===1,47070,{batchId:t.batchId})}));const u=[];for(const h of t.mutations){const f=$I(e,h.key.path,t.batchId);i.push(s.delete(f)),u.push(h.key)}return O.waitFor(i).next(()=>u)}function Il(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw re(14731);e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Tt.DEFAULT_COLLECTION_PERCENTILE=10,Tt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Tt.DEFAULT=new Tt(GT,Tt.DEFAULT_COLLECTION_PERCENTILE,Tt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Tt.DISABLED=new Tt(-1,0,0);class iu{constructor(e,t,r,s){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=s,this.jn={}}static bt(e,t,r,s){ce(e.uid!=="",64387);const i=e.isAuthenticated()?e.uid:"";return new iu(i,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return gr(e).te({index:ps,range:r},(s,i,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,s){const i=ai(e),o=gr(e);return o.add({}).next(a=>{ce(typeof a=="number",49019);const c=new Cd(a,t,r,s),u=function(g,E,T){const x=T.baseMutations.map(D=>yl(g.wt,D)),V=T.mutations.map(D=>yl(g.wt,D));return{userId:E,batchId:T.batchId,localWriteTimeMs:T.localWriteTime.toMillis(),baseMutations:x,mutations:V}}(this.serializer,this.userId,c),h=[];let f=new Ve((m,g)=>ge(m.canonicalString(),g.canonicalString()));for(const m of s){const g=$I(this.userId,m.key.path,a);f=f.add(m.key.path.popLast()),h.push(o.put(u)),h.push(i.put(g,aN))}return f.forEach(m=>{h.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.jn[a]=c.keys()}),O.waitFor(h).next(()=>c)})}lookupMutationBatch(e,t){return gr(e).get(t).next(r=>r?(ce(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),hs(this.serializer,r)):null)}Hn(e,t){return this.jn[t]?O.resolve(this.jn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const s=r.keys();return this.jn[t]=s,s}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let i=null;return gr(e).te({index:ps,range:s},(o,a,c)=>{a.userId===this.userId&&(ce(a.batchId>=r,47524,{Jn:r}),i=hs(this.serializer,a)),c.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=vs;return gr(e).te({index:ps,range:t,reverse:!0},(s,i,o)=>{r=i.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,vs],[this.userId,Number.POSITIVE_INFINITY]);return gr(e).J(ps,t).next(r=>r.map(s=>hs(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Pc(this.userId,t.path),s=IDBKeyRange.lowerBound(r),i=[];return ai(e).te({range:s},(o,a,c)=>{const[u,h,f]=o,m=wn(h);if(u===this.userId&&t.path.isEqual(m))return gr(e).get(f).next(g=>{if(!g)throw re(61480,{Yn:o,batchId:f});ce(g.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:g.userId,batchId:f}),i.push(hs(this.serializer,g))});c.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ve(ge);const s=[];return t.forEach(i=>{const o=Pc(this.userId,i.path),a=IDBKeyRange.lowerBound(o),c=ai(e).te({range:a},(u,h,f)=>{const[m,g,E]=u,T=wn(g);m===this.userId&&i.path.isEqual(T)?r=r.add(E):f.done()});s.push(c)}),O.waitFor(s).next(()=>this.Zn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,i=Pc(this.userId,r),o=IDBKeyRange.lowerBound(i);let a=new Ve(ge);return ai(e).te({range:o},(c,u,h)=>{const[f,m,g]=c,E=wn(m);f===this.userId&&r.isPrefixOf(E)?E.length===s&&(a=a.add(g)):h.done()}).next(()=>this.Zn(e,a))}Zn(e,t){const r=[],s=[];return t.forEach(i=>{s.push(gr(e).get(i).next(o=>{if(o===null)throw re(35274,{batchId:i});ce(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:i}),r.push(hs(this.serializer,o))}))}),O.waitFor(s).next(()=>r)}removeMutationBatch(e,t){return WT(e.he,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Xn(t.batchId)}),O.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}Xn(e){delete this.jn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return O.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),s=[];return ai(e).te({range:r},(i,o,a)=>{if(i[0]===this.userId){const c=wn(i[1]);s.push(c)}else a.done()}).next(()=>{ce(s.length===0,56720,{er:s.map(i=>i.canonicalString())})})})}containsKey(e,t){return QT(e,this.userId,t)}tr(e){return YT(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:vs,lastStreamToken:""})}}function QT(n,e,t){const r=Pc(e,t.path),s=r[1],i=IDBKeyRange.lowerBound(r);let o=!1;return ai(n).te({range:i,ee:!0},(a,c,u)=>{const[h,f,m]=a;h===e&&f===s&&(o=!0),u.done()}).next(()=>o)}function gr(n){return at(n,un)}function ai(n){return at(n,Pi)}function YT(n){return at(n,na)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e){this.nr=e}next(){return this.nr+=2,this.nr}static rr(){return new Vs(0)}static ir(){return new Vs(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VO{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.sr(e).next(t=>{const r=new Vs(t.highestTargetId);return t.highestTargetId=r.next(),this._r(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.sr(e).next(t=>le.fromTimestamp(new Qe(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.sr(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.sr(e).next(s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this._r(e,s)))}addTargetData(e,t){return this.ar(e,t).next(()=>this.sr(e).next(r=>(r.targetCount+=1,this.ur(t,r),this._r(e,r))))}updateTargetData(e,t){return this.ar(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Zs(e).delete(t.targetId)).next(()=>this.sr(e)).next(r=>(ce(r.targetCount>0,8065),r.targetCount-=1,this._r(e,r)))}removeTargets(e,t,r){let s=0;const i=[];return Zs(e).te((o,a)=>{const c=wo(a);c.sequenceNumber<=t&&r.get(c.targetId)===null&&(s++,i.push(this.removeTargetData(e,c)))}).next(()=>O.waitFor(i)).next(()=>s)}forEachTarget(e,t){return Zs(e).te((r,s)=>{const i=wo(s);t(i)})}sr(e){return F_(e).get(hl).next(t=>(ce(t!==null,2888),t))}_r(e,t){return F_(e).put(hl,t)}ar(e,t){return Zs(e).put(HT(this.serializer,t))}ur(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.sr(e).next(t=>t.targetCount)}getTargetData(e,t){const r=ks(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let i=null;return Zs(e).te({range:s,index:qI},(o,a,c)=>{const u=wo(a);Ca(t,u.target)&&(i=u,c.done())}).next(()=>i)}addMatchingKeys(e,t,r){const s=[],i=Pr(e);return t.forEach(o=>{const a=Ct(o.path);s.push(i.put({targetId:r,path:a})),s.push(this.referenceDelegate.addReference(e,r,o))}),O.waitFor(s)}removeMatchingKeys(e,t,r){const s=Pr(e);return O.forEach(t,i=>{const o=Ct(i.path);return O.waitFor([s.delete([r,o]),this.referenceDelegate.removeReference(e,r,i)])})}removeMatchingKeysForTargetId(e,t){const r=Pr(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=Pr(e);let i=ve();return s.te({range:r,ee:!0},(o,a,c)=>{const u=wn(o[1]),h=new Z(u);i=i.add(h)}).next(()=>i)}containsKey(e,t){const r=Ct(t.path),s=IDBKeyRange.bound([r],[LI(r)],!1,!0);let i=0;return Pr(e).te({index:Ed,ee:!0,range:s},([o,a],c,u)=>{o!==0&&(i++,u.done())}).next(()=>i>0)}Rt(e,t){return Zs(e).get(t).next(r=>r?wo(r):null)}}function Zs(n){return at(n,Ci)}function F_(n){return at(n,Es)}function Pr(n){return at(n,ki)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U_="LruGarbageCollector",NO=1048576;function B_([n,e],[t,r]){const s=ge(n,t);return s===0?ge(e,r):s}class OO{constructor(e){this.cr=e,this.buffer=new Ve(B_),this.lr=0}hr(){return++this.lr}Pr(e){const t=[e,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();B_(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class JT{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Tr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return this.Tr!==null}Ir(e){z(U_,`Garbage collection scheduled in ${e}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Tr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Wr(t)?z(U_,"Ignoring IndexedDB error during garbage collection: ",t):await Ls(t)}await this.Ir(3e5)})}}class MO{constructor(e,t){this.Er=e,this.params=t}calculateTargetCount(e,t){return this.Er.dr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return O.resolve(tn.le);const r=new OO(t);return this.Er.forEachTarget(e,s=>r.Pr(s.sequenceNumber)).next(()=>this.Er.Ar(e,s=>r.Pr(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Er.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Er.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(z("LruGarbageCollector","Garbage collection skipped; disabled"),O.resolve(L_)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(z("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),L_):this.Rr(e,t))}getCacheSize(e){return this.Er.getCacheSize(e)}Rr(e,t){let r,s,i,o,a,c,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(z("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,o=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,t))).next(f=>(i=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(u=Date.now(),ri()<=Ie.DEBUG&&z("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(c-a)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-h}ms`),O.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f})))}}function XT(n,e){return new MO(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LO{constructor(e,t){this.db=e,this.garbageCollector=XT(this,t)}dr(e){const t=this.Vr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}Vr(e){let t=0;return this.Ar(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ar(e,t){return this.mr(e,(r,s)=>t(s))}addReference(e,t,r){return pc(e,r)}removeReference(e,t,r){return pc(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return pc(e,t)}gr(e,t){return function(s,i){let o=!1;return YT(s).ne(a=>QT(s,a,i).next(c=>(c&&(o=!0),O.resolve(!c)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.mr(e,(o,a)=>{if(a<=t){const c=this.gr(e,o).next(u=>{if(!u)return i++,r.getEntry(e,o).next(()=>(r.removeEntry(o,le.min()),Pr(e).delete(function(f){return[0,Ct(f.path)]}(o))))});s.push(c)}}).next(()=>O.waitFor(s)).next(()=>r.apply(e)).next(()=>i)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return pc(e,t)}mr(e,t){const r=Pr(e);let s,i=tn.le;return r.te({index:Ed},([o,a],{path:c,sequenceNumber:u})=>{o===0?(i!==tn.le&&t(new Z(wn(s)),i),i=u,s=c):i=tn.le}).next(()=>{i!==tn.le&&t(new Z(wn(s)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function pc(n,e){return Pr(n).put(function(r,s){return{targetId:0,path:Ct(r.path),sequenceNumber:s}}(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{constructor(){this.changes=new ir(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Je.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?O.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FO{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return is(e).put(r)}removeEntry(e,t,r){return is(e).delete(function(i,o){const a=i.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],vl(o),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.pr(e,r)))}getEntry(e,t){let r=Je.newInvalidDocument(t);return is(e).te({index:Cc,range:IDBKeyRange.only(po(t))},(s,i)=>{r=this.yr(t,i)}).next(()=>r)}wr(e,t){let r={size:0,document:Je.newInvalidDocument(t)};return is(e).te({index:Cc,range:IDBKeyRange.only(po(t))},(s,i)=>{r={document:this.yr(t,i),size:Il(i)}}).next(()=>r)}getEntries(e,t){let r=Gt();return this.br(e,t,(s,i)=>{const o=this.yr(s,i);r=r.insert(s,o)}).next(()=>r)}Sr(e,t){let r=Gt(),s=new qe(Z.comparator);return this.br(e,t,(i,o)=>{const a=this.yr(i,o);r=r.insert(i,a),s=s.insert(i,Il(o))}).next(()=>({documents:r,Dr:s}))}br(e,t,r){if(t.isEmpty())return O.resolve();let s=new Ve(H_);t.forEach(c=>s=s.add(c));const i=IDBKeyRange.bound(po(s.first()),po(s.last())),o=s.getIterator();let a=o.getNext();return is(e).te({index:Cc,range:i},(c,u,h)=>{const f=Z.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&H_(a,f)<0;)r(a,null),a=o.getNext();a&&a.isEqual(f)&&(r(a,u),a=o.hasNext()?o.getNext():null),a?h.H(po(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,s,i){const o=t.path,a=[o.popLast().toArray(),o.lastSegment(),vl(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return is(e).J(IDBKeyRange.bound(a,c,!0)).next(u=>{i==null||i.incrementDocumentReadCount(u.length);let h=Gt();for(const f of u){const m=this.yr(Z.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);m.isFoundDocument()&&(ka(t,m)||s.has(m.key))&&(h=h.insert(m.key,m))}return h})}getAllFromCollectionGroup(e,t,r,s){let i=Gt();const o=$_(t,r),a=$_(t,Wt.max());return is(e).te({index:HI,range:IDBKeyRange.bound(o,a,!0)},(c,u,h)=>{const f=this.yr(Z.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);i=i.insert(f.key,f),i.size===s&&h.done()}).next(()=>i)}newChangeBuffer(e){return new UO(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return j_(e).get(sf).next(t=>(ce(!!t,20021),t))}pr(e,t){return j_(e).put(sf,t)}yr(e,t){if(t){const r=wO(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(le.min())))return r}return Je.newInvalidDocument(e)}}function ew(n){return new FO(n)}class UO extends ZT{constructor(e,t){super(),this.vr=e,this.trackRemovals=t,this.Cr=new ir(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const t=[];let r=0,s=new Ve((i,o)=>ge(i.canonicalString(),o.canonicalString()));return this.changes.forEach((i,o)=>{const a=this.Cr.get(i);if(t.push(this.vr.removeEntry(e,i,a.readTime)),o.isValidDocument()){const c=A_(this.vr.serializer,o);s=s.add(i.path.popLast());const u=Il(c);r+=u-a.size,t.push(this.vr.addEntry(e,i,c))}else if(r-=a.size,this.trackRemovals){const c=A_(this.vr.serializer,o.convertToNoDocument(le.min()));t.push(this.vr.addEntry(e,i,c))}}),s.forEach(i=>{t.push(this.vr.indexManager.addToCollectionParentIndex(e,i))}),t.push(this.vr.updateMetadata(e,r)),O.waitFor(t)}getFromCache(e,t){return this.vr.wr(e,t).next(r=>(this.Cr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.vr.Sr(e,t).next(({documents:r,Dr:s})=>(s.forEach((i,o)=>{this.Cr.set(i,{size:o,readTime:r.get(i).readTime})}),r))}}function j_(n){return at(n,ra)}function is(n){return at(n,ul)}function po(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function $_(n,e){const t=e.documentKey.path.toArray();return[n,vl(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function H_(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let i=0;i<t.length-2&&i<r.length-2;++i)if(s=ge(t[i],r[i]),s)return s;return s=ge(t.length,r.length),s||(s=ge(t[t.length-2],r[r.length-2]),s||ge(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BO{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(r!==null&&Bo(r.mutation,s,Bt.empty(),Qe.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ve()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ve()){const s=bn();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(i=>{let o=Io();return i.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=bn();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ve()))}populateOverlays(e,t,r){const s=[];return r.forEach(i=>{t.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,s){let i=Gt();const o=Uo(),a=function(){return Uo()}();return t.forEach((c,u)=>{const h=r.get(u.key);s.has(u.key)&&(h===void 0||h.mutation instanceof or)?i=i.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),Bo(h.mutation,u,h.mutation.getFieldMask(),Qe.now())):o.set(u.key,Bt.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((u,h)=>o.set(u,h)),t.forEach((u,h)=>{var f;return a.set(u,new BO(h,(f=o.get(u))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,t){const r=Uo();let s=new qe((o,a)=>o-a),i=ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(c=>{const u=t.get(c);if(u===null)return;let h=r.get(c)||Bt.empty();h=a.applyToLocalView(u,h),r.set(c,h);const f=(s.get(a.batchId)||ve()).add(c);s=s.insert(a.batchId,f)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),u=c.key,h=c.value,f=vT();h.forEach(m=>{if(!i.has(m)){const g=AT(t.get(m),r.get(m));g!==null&&f.set(m,g),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return O.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,s){return function(o){return Z.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):pT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-i.size):O.resolve(bn());let a=Zo,c=i;return o.next(u=>O.forEach(u,(h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(h)?O.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{c=c.insert(h,m)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,c,u,ve())).next(h=>({batchId:a,changes:yT(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Z(t)).next(r=>{let s=Io();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const i=t.collectionGroup;let o=Io();return this.indexManager.getCollectionParents(e,i).next(a=>O.forEach(a,c=>{const u=function(f,m){return new Ki(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(t,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next(h=>{h.forEach((f,m)=>{o=o.insert(f,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i,s))).next(o=>{i.forEach((c,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,Je.newInvalidDocument(h)))});let a=Io();return o.forEach((c,u)=>{const h=i.get(c);h!==void 0&&Bo(h.mutation,u,Bt.empty(),Qe.now()),ka(t,u)&&(a=a.insert(c,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jO{constructor(e){this.serializer=e,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(e,t){return O.resolve(this.Fr.get(t))}saveBundleMetadata(e,t){return this.Fr.set(t.id,function(s){return{id:s.id,version:s.version,createTime:Mt(s.createTime)}}(t)),O.resolve()}getNamedQuery(e,t){return O.resolve(this.Mr.get(t))}saveNamedQuery(e,t){return this.Mr.set(t.name,function(s){return{name:s.name,query:qT(s.bundledQuery),readTime:Mt(s.readTime)}}(t)),O.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $O{constructor(){this.overlays=new qe(Z.comparator),this.Or=new Map}getOverlay(e,t){return O.resolve(this.overlays.get(t))}getOverlays(e,t){const r=bn();return O.forEach(t,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,i)=>{this.St(e,t,i)}),O.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.Or.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Or.delete(r)),O.resolve()}getOverlaysForCollection(e,t,r){const s=bn(),i=t.length+1,o=new Z(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,u=c.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return O.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let i=new qe((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let h=i.get(u.largestBatchId);h===null&&(h=bn(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=bn(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=s)););return O.resolve(a)}St(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Or.get(s.largestBatchId).delete(r.key);this.Or.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new xd(t,r));let i=this.Or.get(t);i===void 0&&(i=ve(),this.Or.set(t,i)),this.Or.set(t,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HO{constructor(){this.sessionToken=nt.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,O.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(){this.Nr=new Ve(lt.Br),this.Lr=new Ve(lt.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(e,t){const r=new lt(e,t);this.Nr=this.Nr.add(r),this.Lr=this.Lr.add(r)}qr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Qr(new lt(e,t))}$r(e,t){e.forEach(r=>this.removeReference(r,t))}Ur(e){const t=new Z(new xe([])),r=new lt(t,e),s=new lt(t,e+1),i=[];return this.Lr.forEachInRange([r,s],o=>{this.Qr(o),i.push(o.key)}),i}Kr(){this.Nr.forEach(e=>this.Qr(e))}Qr(e){this.Nr=this.Nr.delete(e),this.Lr=this.Lr.delete(e)}Wr(e){const t=new Z(new xe([])),r=new lt(t,e),s=new lt(t,e+1);let i=ve();return this.Lr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const t=new lt(e,0),r=this.Nr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class lt{constructor(e,t){this.key=e,this.Gr=t}static Br(e,t){return Z.comparator(e.key,t.key)||ge(e.Gr,t.Gr)}static kr(e,t){return ge(e.Gr,t.Gr)||Z.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qO{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Jn=1,this.zr=new Ve(lt.Br)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const i=this.Jn;this.Jn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Cd(i,t,r,s);this.mutationQueue.push(o);for(const a of s)this.zr=this.zr.add(new lt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return O.resolve(o)}lookupMutationBatch(e,t){return O.resolve(this.jr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.Hr(r),i=s<0?0:s;return O.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?vs:this.Jn-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new lt(t,0),s=new lt(t,Number.POSITIVE_INFINITY),i=[];return this.zr.forEachInRange([r,s],o=>{const a=this.jr(o.Gr);i.push(a)}),O.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ve(ge);return t.forEach(s=>{const i=new lt(s,0),o=new lt(s,Number.POSITIVE_INFINITY);this.zr.forEachInRange([i,o],a=>{r=r.add(a.Gr)})}),O.resolve(this.Jr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let i=r;Z.isDocumentKey(i)||(i=i.child(""));const o=new lt(new Z(i),0);let a=new Ve(ge);return this.zr.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(a=a.add(c.Gr)),!0)},o),O.resolve(this.Jr(a))}Jr(e){const t=[];return e.forEach(r=>{const s=this.jr(r);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){ce(this.Yr(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.zr;return O.forEach(t.mutations,s=>{const i=new lt(s.key,t.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.zr=r})}Xn(e){}containsKey(e,t){const r=new lt(t,0),s=this.zr.firstAfterOrEqual(r);return O.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}Yr(e,t){return this.Hr(e)}Hr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}jr(e){const t=this.Hr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{constructor(e){this.Zr=e,this.docs=function(){return new qe(Z.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),i=s?s.size:0,o=this.Zr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return O.resolve(r?r.document.mutableCopy():Je.newInvalidDocument(t))}getEntries(e,t){let r=Gt();return t.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Je.newInvalidDocument(s))}),O.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let i=Gt();const o=t.path,a=new Z(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:u,value:{document:h}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||yd(FI(h),r)<=0||(s.has(h.key)||ka(t,h))&&(i=i.insert(h.key,h.mutableCopy()))}return O.resolve(i)}getAllFromCollectionGroup(e,t,r,s){re(9500)}Xr(e,t){return O.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new zO(this)}getSize(e){return O.resolve(this.size)}}class zO extends ZT{constructor(e){super(),this.vr=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.vr.addEntry(e,s)):this.vr.removeEntry(r)}),O.waitFor(t)}getFromCache(e,t){return this.vr.getEntry(e,t)}getAllFromCache(e,t){return this.vr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GO{constructor(e){this.persistence=e,this.ei=new ir(t=>ks(t),Ca),this.lastRemoteSnapshotVersion=le.min(),this.highestTargetId=0,this.ti=0,this.ni=new Md,this.targetCount=0,this.ri=Vs.rr()}forEachTarget(e,t){return this.ei.forEach((r,s)=>t(s)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.ti)}allocateTargetId(e){return this.highestTargetId=this.ri.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ti&&(this.ti=t),O.resolve()}ar(e){this.ei.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ri=new Vs(t),this.highestTargetId=t),e.sequenceNumber>this.ti&&(this.ti=e.sequenceNumber)}addTargetData(e,t){return this.ar(t),this.targetCount+=1,O.resolve()}updateTargetData(e,t){return this.ar(t),O.resolve()}removeTargetData(e,t){return this.ei.delete(t.target),this.ni.Ur(t.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,t,r){let s=0;const i=[];return this.ei.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ei.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),O.waitFor(i).next(()=>s)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,t){const r=this.ei.get(t)||null;return O.resolve(r)}addMatchingKeys(e,t,r){return this.ni.qr(t,r),O.resolve()}removeMatchingKeys(e,t,r){this.ni.$r(t,r);const s=this.persistence.referenceDelegate,i=[];return s&&t.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),O.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.ni.Ur(t),O.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ni.Wr(t);return O.resolve(r)}containsKey(e,t){return O.resolve(this.ni.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(e,t){this.ii={},this.overlays={},this.si=new tn(0),this.oi=!1,this.oi=!0,this._i=new HO,this.referenceDelegate=e(this),this.ai=new GO(this),this.indexManager=new xO,this.remoteDocumentCache=function(s){return new KO(s)}(r=>this.referenceDelegate.ui(r)),this.serializer=new $T(t),this.ci=new jO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new $O,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ii[e.toKey()];return r||(r=new qO(t,this.referenceDelegate),this.ii[e.toKey()]=r),r}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(e,t,r){z("MemoryPersistence","Starting transaction:",e);const s=new WO(this.si.next());return this.referenceDelegate.li(),r(s).next(i=>this.referenceDelegate.hi(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Pi(e,t){return O.or(Object.values(this.ii).map(r=>()=>r.containsKey(e,t)))}}class WO extends BI{constructor(e){super(),this.currentSequenceNumber=e}}class ou{constructor(e){this.persistence=e,this.Ti=new Md,this.Ii=null}static Ei(e){return new ou(e)}get di(){if(this.Ii)return this.Ii;throw re(60996)}addReference(e,t,r){return this.Ti.addReference(r,t),this.di.delete(r.toString()),O.resolve()}removeReference(e,t,r){return this.Ti.removeReference(r,t),this.di.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),O.resolve()}removeTarget(e,t){this.Ti.Ur(t.targetId).forEach(s=>this.di.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(i=>this.di.add(i.toString()))}).next(()=>r.removeTargetData(e,t))}li(){this.Ii=new Set}hi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.di,r=>{const s=Z.fromPath(r);return this.Ai(e,s).next(i=>{i||t.removeEntry(s,le.min())})}).next(()=>(this.Ii=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ai(e,t).next(r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())})}ui(e){return 0}Ai(e,t){return O.or([()=>O.resolve(this.Ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Pi(e,t)])}}class Tl{constructor(e,t){this.persistence=e,this.Ri=new ir(r=>Ct(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=XT(this,t)}static Ei(e,t){return new Tl(e,t)}li(){}hi(e){return O.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.Vr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}Vr(e){let t=0;return this.Ar(e,r=>{t++}).next(()=>t)}Ar(e,t){return O.forEach(this.Ri,(r,s)=>this.gr(e,r,s).next(i=>i?O.resolve():t(s)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.Xr(e,o=>this.gr(e,o,t).next(a=>{a||(r++,i.removeEntry(o,le.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.Ri.set(t,e.currentSequenceNumber),O.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.Ri.set(r,e.currentSequenceNumber),O.resolve()}removeReference(e,t,r){return this.Ri.set(r,e.currentSequenceNumber),O.resolve()}updateLimboDocument(e,t){return this.Ri.set(t,e.currentSequenceNumber),O.resolve()}ui(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=xc(e.data.value)),t}gr(e,t,r){return O.or([()=>this.persistence.Pi(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.Ri.get(t);return O.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO{constructor(e){this.serializer=e}q(e,t,r,s){const i=new zl("createOrUpgrade",t);r<1&&s>=1&&(function(c){c.createObjectStore(Pa)}(e),function(c){c.createObjectStore(na,{keyPath:oN}),c.createObjectStore(un,{keyPath:t_,autoIncrement:!0}).createIndex(ps,n_,{unique:!0}),c.createObjectStore(Pi)}(e),q_(e),function(c){c.createObjectStore(ls)}(e));let o=O.resolve();return r<3&&s>=3&&(r!==0&&(function(c){c.deleteObjectStore(ki),c.deleteObjectStore(Ci),c.deleteObjectStore(Es)}(e),q_(e)),o=o.next(()=>function(c){const u=c.store(Es),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:le.min().toTimestamp(),targetCount:0};return u.put(hl,h)}(i))),r<4&&s>=4&&(r!==0&&(o=o.next(()=>function(c,u){return u.store(un).J().next(f=>{c.deleteObjectStore(un),c.createObjectStore(un,{keyPath:t_,autoIncrement:!0}).createIndex(ps,n_,{unique:!0});const m=u.store(un),g=f.map(E=>m.put(E));return O.waitFor(g)})}(e,i))),o=o.next(()=>{(function(c){c.createObjectStore(xi,{keyPath:mN})})(e)})),r<5&&s>=5&&(o=o.next(()=>this.Vi(i))),r<6&&s>=6&&(o=o.next(()=>(function(c){c.createObjectStore(ra)}(e),this.mi(i)))),r<7&&s>=7&&(o=o.next(()=>this.fi(i))),r<8&&s>=8&&(o=o.next(()=>this.gi(e,i))),r<9&&s>=9&&(o=o.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&s>=10&&(o=o.next(()=>this.pi(i))),r<11&&s>=11&&(o=o.next(()=>{(function(c){c.createObjectStore(Wl,{keyPath:gN})})(e),function(c){c.createObjectStore(Ql,{keyPath:_N})}(e)})),r<12&&s>=12&&(o=o.next(()=>{(function(c){const u=c.createObjectStore(Yl,{keyPath:bN});u.createIndex(af,AN,{unique:!1}),u.createIndex(GI,RN,{unique:!1})})(e)})),r<13&&s>=13&&(o=o.next(()=>function(c){const u=c.createObjectStore(ul,{keyPath:cN});u.createIndex(Cc,lN),u.createIndex(HI,uN)}(e)).next(()=>this.yi(e,i)).next(()=>e.deleteObjectStore(ls))),r<14&&s>=14&&(o=o.next(()=>this.wi(e,i))),r<15&&s>=15&&(o=o.next(()=>function(c){c.createObjectStore(Id,{keyPath:yN,autoIncrement:!0}).createIndex(of,vN,{unique:!1}),c.createObjectStore(fl,{keyPath:EN}).createIndex(KI,IN,{unique:!1}),c.createObjectStore(dl,{keyPath:TN}).createIndex(zI,wN,{unique:!1})}(e))),r<16&&s>=16&&(o=o.next(()=>{t.objectStore(fl).clear()}).next(()=>{t.objectStore(dl).clear()})),r<17&&s>=17&&(o=o.next(()=>{(function(c){c.createObjectStore(Td,{keyPath:SN})})(e)})),o}mi(e){let t=0;return e.store(ls).te((r,s)=>{t+=Il(s)}).next(()=>{const r={byteSize:t};return e.store(ra).put(sf,r)})}Vi(e){const t=e.store(na),r=e.store(un);return t.J().next(s=>O.forEach(s,i=>{const o=IDBKeyRange.bound([i.userId,vs],[i.userId,i.lastAcknowledgedBatchId]);return r.J(ps,o).next(a=>O.forEach(a,c=>{ce(c.userId===i.userId,18650,"Cannot process batch from unexpected user",{batchId:c.batchId});const u=hs(this.serializer,c);return WT(e,i.userId,u).next(()=>{})}))}))}fi(e){const t=e.store(ki),r=e.store(ls);return e.store(Es).get(hl).next(s=>{const i=[];return r.te((o,a)=>{const c=new xe(o),u=function(f){return[0,Ct(f)]}(c);i.push(t.get(u).next(h=>h?O.resolve():(f=>t.put({targetId:0,path:Ct(f),sequenceNumber:s.highestListenSequenceNumber}))(c)))}).next(()=>O.waitFor(i))})}gi(e,t){e.createObjectStore(sa,{keyPath:pN});const r=t.store(sa),s=new Od,i=o=>{if(s.add(o)){const a=o.lastSegment(),c=o.popLast();return r.put({collectionId:a,parent:Ct(c)})}};return t.store(ls).te({ee:!0},(o,a)=>{const c=new xe(o);return i(c.popLast())}).next(()=>t.store(Pi).te({ee:!0},([o,a,c],u)=>{const h=wn(a);return i(h.popLast())}))}pi(e){const t=e.store(Ci);return t.te((r,s)=>{const i=wo(s),o=HT(this.serializer,i);return t.put(o)})}yi(e,t){const r=t.store(ls),s=[];return r.te((i,o)=>{const a=t.store(ul),c=function(f){return f.document?new Z(xe.fromString(f.document.name).popFirst(5)):f.noDocument?Z.fromSegments(f.noDocument.path):f.unknownDocument?Z.fromSegments(f.unknownDocument.path):re(36783)}(o).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};s.push(a.put(u))}).next(()=>O.waitFor(s))}wi(e,t){const r=t.store(un),s=ew(this.serializer),i=new Ld(ou.Ei,this.serializer.wt);return r.J().next(o=>{const a=new Map;return o.forEach(c=>{var u;let h=(u=a.get(c.userId))!==null&&u!==void 0?u:ve();hs(this.serializer,c).keys().forEach(f=>h=h.add(f)),a.set(c.userId,h)}),O.forEach(a,(c,u)=>{const h=new mt(u),f=su.bt(this.serializer,h),m=i.getIndexManager(h),g=iu.bt(h,this.serializer,m,i.referenceDelegate);return new tw(s,g,f,m).recalculateAndSaveOverlaysForDocumentKeys(new cf(t,tn.le),c).next()})})}}function q_(n){n.createObjectStore(ki,{keyPath:fN}).createIndex(Ed,dN,{unique:!0}),n.createObjectStore(Ci,{keyPath:"targetId"}).createIndex(qI,hN,{unique:!0}),n.createObjectStore(Es)}const _r="IndexedDbPersistence",ch=18e5,lh=5e3,uh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",YO="main";class Fd{constructor(e,t,r,s,i,o,a,c,u,h,f=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.bi=i,this.window=o,this.document=a,this.Si=u,this.Di=h,this.Ci=f,this.si=null,this.oi=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fi=null,this.inForeground=!1,this.Mi=null,this.xi=null,this.Oi=Number.NEGATIVE_INFINITY,this.Ni=m=>Promise.resolve(),!Fd.C())throw new Y(B.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new LO(this,s),this.Bi=t+YO,this.serializer=new $T(c),this.Li=new Fr(this.Bi,this.Ci,new QO(this.serializer)),this._i=new AO,this.ai=new VO(this.referenceDelegate,this.serializer),this.remoteDocumentCache=ew(this.serializer),this.ci=new bO,this.window&&this.window.localStorage?this.ki=this.window.localStorage:(this.ki=null,h===!1&&Ot(_r,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.qi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Y(B.FAILED_PRECONDITION,uh);return this.Qi(),this.$i(),this.Ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.ai.getHighestSequenceNumber(e))}).then(e=>{this.si=new tn(e,this.Si)}).then(()=>{this.oi=!0}).catch(e=>(this.Li&&this.Li.close(),Promise.reject(e)))}Ki(e){return this.Ni=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Li.U(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.bi.enqueueAndForget(async()=>{this.started&&await this.qi()}))}qi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>mc(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Wi(e).next(t=>{t||(this.isPrimary=!1,this.bi.enqueueRetryable(()=>this.Ni(!1)))})}).next(()=>this.Gi(e)).next(t=>this.isPrimary&&!t?this.zi(e).next(()=>!1):!!t&&this.ji(e).next(()=>!0))).catch(e=>{if(Wr(e))return z(_r,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return z(_r,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.bi.enqueueRetryable(()=>this.Ni(e)),this.isPrimary=e})}Wi(e){return mo(e).get(Ws).next(t=>O.resolve(this.Hi(t)))}Ji(e){return mc(e).delete(this.clientId)}async Yi(){if(this.isPrimary&&!this.Zi(this.Oi,ch)){this.Oi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const r=at(t,xi);return r.J().next(s=>{const i=this.Xi(s,ch),o=s.filter(a=>i.indexOf(a)===-1);return O.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.ki)for(const t of e)this.ki.removeItem(this.es(t.clientId))}}Ui(){this.xi=this.bi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.qi().then(()=>this.Yi()).then(()=>this.Ui()))}Hi(e){return!!e&&e.ownerId===this.clientId}Gi(e){return this.Di?O.resolve(!0):mo(e).get(Ws).next(t=>{if(t!==null&&this.Zi(t.leaseTimestampMs,lh)&&!this.ts(t.ownerId)){if(this.Hi(t)&&this.networkEnabled)return!0;if(!this.Hi(t)){if(!t.allowTabSynchronization)throw new Y(B.FAILED_PRECONDITION,uh);return!1}}return!(!this.networkEnabled||!this.inForeground)||mc(e).J().next(r=>this.Xi(r,lh).find(s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,o=!this.inForeground&&s.inForeground,a=this.networkEnabled===s.networkEnabled;if(i||o&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&z(_r,`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.oi=!1,this.ns(),this.xi&&(this.xi.cancel(),this.xi=null),this.rs(),this.ss(),await this.Li.runTransaction("shutdown","readwrite",[Pa,xi],e=>{const t=new cf(e,tn.le);return this.zi(t).next(()=>this.Ji(t))}),this.Li.close(),this._s()}Xi(e,t){return e.filter(r=>this.Zi(r.updateTimeMs,t)&&!this.ts(r.clientId))}us(){return this.runTransaction("getActiveClients","readonly",e=>mc(e).J().next(t=>this.Xi(t,ch).map(r=>r.clientId)))}get started(){return this.oi}getGlobalsCache(){return this._i}getMutationQueue(e,t){return iu.bt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new DO(e,this.serializer.wt.databaseId)}getDocumentOverlayCache(e){return su.bt(this.serializer,e)}getBundleCache(){return this.ci}runTransaction(e,t,r){z(_r,"Starting transaction:",e);const s=t==="readonly"?"readonly":"readwrite",i=function(c){return c===17?kN:c===16?CN:c===15?wd:c===14?YI:c===13?QI:c===12?PN:c===11?WI:void re(60245)}(this.Ci);let o;return this.Li.runTransaction(e,s,i,a=>(o=new cf(a,this.si?this.si.next():tn.le),t==="readwrite-primary"?this.Wi(o).next(c=>!!c||this.Gi(o)).next(c=>{if(!c)throw Ot(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.bi.enqueueRetryable(()=>this.Ni(!1)),new Y(B.FAILED_PRECONDITION,UI);return r(o)}).next(c=>this.ji(o).next(()=>c)):this.cs(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}cs(e){return mo(e).get(Ws).next(t=>{if(t!==null&&this.Zi(t.leaseTimestampMs,lh)&&!this.ts(t.ownerId)&&!this.Hi(t)&&!(this.Di||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Y(B.FAILED_PRECONDITION,uh)})}ji(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return mo(e).put(Ws,t)}static C(){return Fr.C()}zi(e){const t=mo(e);return t.get(Ws).next(r=>this.Hi(r)?(z(_r,"Releasing primary lease."),t.delete(Ws)):O.resolve())}Zi(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Ot(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Qi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Mi=()=>{this.bi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.qi()))},this.document.addEventListener("visibilitychange",this.Mi),this.inForeground=this.document.visibilityState==="visible")}rs(){this.Mi&&(this.document.removeEventListener("visibilitychange",this.Mi),this.Mi=null)}$i(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Fi=()=>{this.ns();const t=/(?:Version|Mobile)\/1[456]/;UE()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.bi.enterRestrictedMode(!0),this.bi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Fi))}ss(){this.Fi&&(this.window.removeEventListener("pagehide",this.Fi),this.Fi=null)}ts(e){var t;try{const r=((t=this.ki)===null||t===void 0?void 0:t.getItem(this.es(e)))!==null;return z(_r,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ot(_r,"Failed to get zombied client id.",r),!1}}ns(){if(this.ki)try{this.ki.setItem(this.es(this.clientId),String(Date.now()))}catch(e){Ot("Failed to set zombie client id.",e)}}_s(){if(this.ki)try{this.ki.removeItem(this.es(this.clientId))}catch{}}es(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function mo(n){return at(n,Pa)}function mc(n){return at(n,xi)}function JO(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.ls=r,this.hs=s}static Ps(e,t){let r=ve(),s=ve();for(const i of t.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Ud(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=function(){return UE()?8:jI(ot())>0?6:4}()}initialize(e,t){this.As=e,this.indexManager=t,this.Ts=!0}getDocumentsMatchingQuery(e,t,r,s){const i={result:null};return this.Rs(e,t).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Vs(e,t,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new XO;return this.fs(e,t,o).next(a=>{if(i.result=a,this.Is)return this.gs(e,t,o,a.size)})}).next(()=>i.result)}gs(e,t,r,s){return r.documentReadCount<this.Es?(ri()<=Ie.DEBUG&&z("QueryEngine","SDK will not create cache indexes for query:",si(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),O.resolve()):(ri()<=Ie.DEBUG&&z("QueryEngine","Query:",si(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ds*s?(ri()<=Ie.DEBUG&&z("QueryEngine","The SDK decides to create cache indexes for query:",si(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,rn(t))):O.resolve())}Rs(e,t){if(m_(t))return O.resolve(null);let r=rn(t);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=mf(t,null,"F"),r=rn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ve(...i);return this.As.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.ps(t,a);return this.ys(t,u,o,c.readTime)?this.Rs(e,mf(t,null,"F")):this.ws(e,u,t,c)}))})))}Vs(e,t,r,s){return m_(t)||s.isEqual(le.min())?O.resolve(null):this.As.getDocuments(e,r).next(i=>{const o=this.ps(t,i);return this.ys(t,o,r,s)?O.resolve(null):(ri()<=Ie.DEBUG&&z("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),si(t)),this.ws(e,o,t,ZV(s,Zo)).next(a=>a))})}ps(e,t){let r=new Ve(gT(e));return t.forEach((s,i)=>{ka(e,i)&&(r=r.add(i))}),r}ys(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const i=e.limitType==="F"?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}fs(e,t,r){return ri()<=Ie.DEBUG&&z("QueryEngine","Using full collection scan to execute query:",si(t)),this.As.getDocumentsMatchingQuery(e,t,Wt.min(),r)}ws(e,t,r,s){return this.As.getDocumentsMatchingQuery(e,r,s).next(i=>(t.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bd="LocalStore",ZO=3e8;class e1{constructor(e,t,r,s){this.persistence=e,this.bs=t,this.serializer=s,this.Ss=new qe(ge),this.Ds=new ir(i=>ks(i),Ca),this.vs=new Map,this.Cs=e.getRemoteDocumentCache(),this.ai=e.getTargetCache(),this.ci=e.getBundleCache(),this.Fs(r)}Fs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new tw(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ss))}}function rw(n,e,t,r){return new e1(n,e,t,r)}async function sw(n,e){const t=_e(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,t.Fs(e),t.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let c=ve();for(const u of s){o.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}for(const u of i){a.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(u=>({Ms:u,removedBatchIds:o,addedBatchIds:a}))})})}function t1(n,e){const t=_e(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=t.Cs.newChangeBuffer({trackRemovals:!0});return function(a,c,u,h){const f=u.batch,m=f.keys();let g=O.resolve();return m.forEach(E=>{g=g.next(()=>h.getEntry(c,E)).next(T=>{const x=u.docVersions.get(E);ce(x!==null,48541),T.version.compareTo(x)<0&&(f.applyToRemoteDocument(T,u),T.isValidDocument()&&(T.setReadTime(u.commitVersion),h.addEntry(T)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(c,f))}(t,r,e,i).next(()=>i.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=ve();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}function iw(n){const e=_e(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ai.getLastRemoteSnapshotVersion(t))}function n1(n,e){const t=_e(n),r=e.snapshotVersion;let s=t.Ss;return t.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=t.Cs.newChangeBuffer({trackRemovals:!0});s=t.Ss;const a=[];e.targetChanges.forEach((h,f)=>{const m=s.get(f);if(!m)return;a.push(t.ai.removeMatchingKeys(i,h.removedDocuments,f).next(()=>t.ai.addMatchingKeys(i,h.addedDocuments,f)));let g=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?g=g.withResumeToken(nt.EMPTY_BYTE_STRING,le.min()).withLastLimboFreeSnapshotVersion(le.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,r)),s=s.insert(f,g),function(T,x,V){return T.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=ZO?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0}(m,g,h)&&a.push(t.ai.updateTargetData(i,g))});let c=Gt(),u=ve();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(i,h))}),a.push(r1(i,o,e.documentUpdates).next(h=>{c=h.xs,u=h.Os})),!r.isEqual(le.min())){const h=t.ai.getLastRemoteSnapshotVersion(i).next(f=>t.ai.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(h)}return O.waitFor(a).next(()=>o.apply(i)).next(()=>t.localDocuments.getLocalViewOfDocuments(i,c,u)).next(()=>c)}).then(i=>(t.Ss=s,i))}function r1(n,e,t){let r=ve(),s=ve();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let o=Gt();return t.forEach((a,c)=>{const u=i.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(a)),c.isNoDocument()&&c.version.isEqual(le.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):z(Bd,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{xs:o,Os:s}})}function s1(n,e){const t=_e(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=vs),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function i1(n,e){const t=_e(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.ai.getTargetData(r,e).next(i=>i?(s=i,O.resolve(s)):t.ai.allocateTargetId(r).next(o=>(s=new Kn(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.ai.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.Ss.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ss=t.Ss.insert(r.targetId,r),t.Ds.set(e,r.targetId)),r})}async function wf(n,e,t){const r=_e(n),s=r.Ss.get(e),i=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Wr(o))throw o;z(Bd,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ss=r.Ss.remove(e),r.Ds.delete(s.target)}function K_(n,e,t){const r=_e(n);let s=le.min(),i=ve();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,h){const f=_e(c),m=f.Ds.get(h);return m!==void 0?O.resolve(f.Ss.get(m)):f.ai.getTargetData(u,h)}(r,o,rn(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.ai.getMatchingKeysForTargetId(o,a.targetId).next(c=>{i=c})}).next(()=>r.bs.getDocumentsMatchingQuery(o,e,t?s:le.min(),t?i:ve())).next(a=>(o1(r,KN(e),a),{documents:a,Ns:i})))}function o1(n,e,t){let r=n.vs.get(e)||le.min();t.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),n.vs.set(e,r)}class z_{constructor(){this.activeTargetIds=JN()}$s(e){this.activeTargetIds=this.activeTargetIds.add(e)}Us(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Qs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ow{constructor(){this.So=new z_,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.So.$s(e),this.Do[e]||"not-current"}updateQueryState(e,t,r){this.Do[e]=t}removeLocalQueryTarget(e){this.So.Us(e)}isLocalQueryTarget(e){return this.So.activeTargetIds.has(e)}clearQueryState(e){delete this.Do[e]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(e){return this.So.activeTargetIds.has(e)}start(){return this.So=new z_,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{vo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G_="ConnectivityMonitor";class W_{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(e){this.Oo.push(e)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){z(G_,"Network connectivity changed: AVAILABLE");for(const e of this.Oo)e(0)}xo(){z(G_,"Network connectivity changed: UNAVAILABLE");for(const e of this.Oo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gc=null;function bf(){return gc===null?gc=function(){return 268435456+Math.round(2147483648*Math.random())}():gc++,"0x"+gc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hh="RestConnection",c1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class l1{get Bo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Lo=t+"://"+e.host,this.ko=`projects/${r}/databases/${s}`,this.qo=this.databaseId.database===pl?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Qo(e,t,r,s,i){const o=bf(),a=this.$o(e,t.toUriEncodedString());z(hh,`Sending RPC '${e}' ${o}:`,a,r);const c={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};return this.Uo(c,s,i),this.Ko(e,a,c,r).then(u=>(z(hh,`Received RPC '${e}' ${o}: `,u),u),u=>{throw Ps(hh,`RPC '${e}' ${o} failed with error: `,u,"url: ",a,"request:",r),u})}Wo(e,t,r,s,i,o){return this.Qo(e,t,r,s,i)}Uo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+qi}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}$o(e,t){const r=c1[e];return`${this.Lo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(e){this.Go=e.Go,this.zo=e.zo}jo(e){this.Ho=e}Jo(e){this.Yo=e}Zo(e){this.Xo=e}onMessage(e){this.e_=e}close(){this.zo()}send(e){this.Go(e)}t_(){this.Ho()}n_(){this.Yo()}r_(e){this.Xo(e)}i_(e){this.e_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const It="WebChannelConnection";class h1 extends l1{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ko(e,t,r,s){const i=bf();return new Promise((o,a)=>{const c=new PI;c.setWithCredentials(!0),c.listenOnce(CI.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Rc.NO_ERROR:const h=c.getResponseJson();z(It,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(h)),o(h);break;case Rc.TIMEOUT:z(It,`RPC '${e}' ${i} timed out`),a(new Y(B.DEADLINE_EXCEEDED,"Request time out"));break;case Rc.HTTP_ERROR:const f=c.getStatus();if(z(It,`RPC '${e}' ${i} failed with status:`,f,"response text:",c.getResponseText()),f>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);const g=m==null?void 0:m.error;if(g&&g.status&&g.message){const E=function(x){const V=x.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(V)>=0?V:B.UNKNOWN}(g.status);a(new Y(E,g.message))}else a(new Y(B.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new Y(B.UNAVAILABLE,"Connection failed."));break;default:re(9055,{s_:e,streamId:i,o_:c.getLastErrorCode(),__:c.getLastError()})}}finally{z(It,`RPC '${e}' ${i} completed.`)}});const u=JSON.stringify(s);z(It,`RPC '${e}' ${i} sending request:`,s),c.send(t,"POST",u,r,15)})}a_(e,t,r){const s=bf(),i=[this.Lo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=DI(),a=xI(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Uo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;const h=i.join("");z(It,`Creating RPC '${e}' stream ${s}: ${h}`,c);const f=o.createWebChannel(h,c);let m=!1,g=!1;const E=new u1({Go:x=>{g?z(It,`Not sending because RPC '${e}' stream ${s} is closed:`,x):(m||(z(It,`Opening RPC '${e}' stream ${s} transport.`),f.open(),m=!0),z(It,`RPC '${e}' stream ${s} sending:`,x),f.send(x))},zo:()=>f.close()}),T=(x,V,D)=>{x.listen(V,I=>{try{D(I)}catch(C){setTimeout(()=>{throw C},0)}})};return T(f,Eo.EventType.OPEN,()=>{g||(z(It,`RPC '${e}' stream ${s} transport opened.`),E.t_())}),T(f,Eo.EventType.CLOSE,()=>{g||(g=!0,z(It,`RPC '${e}' stream ${s} transport closed`),E.r_())}),T(f,Eo.EventType.ERROR,x=>{g||(g=!0,Ps(It,`RPC '${e}' stream ${s} transport errored. Name:`,x.name,"Message:",x.message),E.r_(new Y(B.UNAVAILABLE,"The operation could not be completed")))}),T(f,Eo.EventType.MESSAGE,x=>{var V;if(!g){const D=x.data[0];ce(!!D,16349);const I=D,C=(I==null?void 0:I.error)||((V=I[0])===null||V===void 0?void 0:V.error);if(C){z(It,`RPC '${e}' stream ${s} received error:`,C);const N=C.status;let F=function(v){const b=Ze[v];if(b!==void 0)return PT(b)}(N),w=C.message;F===void 0&&(F=B.INTERNAL,w="Unknown error status: "+N+" with message "+C.message),g=!0,E.r_(new Y(F,w)),f.close()}else z(It,`RPC '${e}' stream ${s} received:`,D),E.i_(D)}}),T(a,kI.STAT_EVENT,x=>{x.stat===tf.PROXY?z(It,`RPC '${e}' stream ${s} detected buffering proxy`):x.stat===tf.NOPROXY&&z(It,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{E.n_()},0),E}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f1(){return typeof window<"u"?window:null}function Oc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function au(n){return new dO(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(e,t,r=1e3,s=1.5,i=6e4){this.bi=e,this.timerId=t,this.u_=r,this.c_=s,this.l_=i,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(e){this.cancel();const t=Math.floor(this.h_+this.d_()),r=Math.max(0,Date.now()-this.T_),s=Math.max(0,t-r);s>0&&z("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.h_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,s,()=>(this.T_=Date.now(),e())),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){this.P_!==null&&(this.P_.skipDelay(),this.P_=null)}cancel(){this.P_!==null&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q_="PersistentStream";class cw{constructor(e,t,r,s,i,o,a,c){this.bi=e,this.R_=r,this.V_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new aw(e,t)}w_(){return this.state===1||this.state===5||this.b_()}b_(){return this.state===2||this.state===3}start(){this.p_=0,this.state!==4?this.auth():this.S_()}async stop(){this.w_()&&await this.close(0)}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&this.f_===null&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,()=>this.C_()))}F_(e){this.M_(),this.stream.send(e)}async C_(){if(this.b_())return this.close(0)}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}async close(e,t){this.M_(),this.x_(),this.y_.cancel(),this.m_++,e!==4?this.y_.reset():t&&t.code===B.RESOURCE_EXHAUSTED?(Ot(t.toString()),Ot("Using maximum backoff delay to prevent overloading the backend."),this.y_.I_()):t&&t.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.O_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zo(t)}O_(){}auth(){this.state=1;const e=this.N_(this.m_),t=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.m_===t&&this.B_(r,s)},r=>{e(()=>{const s=new Y(B.UNKNOWN,"Fetching auth token failed: "+r.message);return this.L_(s)})})}B_(e,t){const r=this.N_(this.m_);this.stream=this.k_(e,t),this.stream.jo(()=>{r(()=>this.listener.jo())}),this.stream.Jo(()=>{r(()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,()=>(this.b_()&&(this.state=3),Promise.resolve())),this.listener.Jo()))}),this.stream.Zo(s=>{r(()=>this.L_(s))}),this.stream.onMessage(s=>{r(()=>++this.p_==1?this.q_(s):this.onNext(s))})}S_(){this.state=5,this.y_.E_(async()=>{this.state=0,this.start()})}L_(e){return z(Q_,`close with error: ${e}`),this.stream=null,this.close(4,e)}N_(e){return t=>{this.bi.enqueueAndForget(()=>this.m_===e?t():(z(Q_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class d1 extends cw{constructor(e,t,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,o),this.serializer=i}k_(e,t){return this.connection.a_("Listen",e,t)}q_(e){return this.onNext(e)}onNext(e){this.y_.reset();const t=gO(this.serializer,e),r=function(i){if(!("targetChange"in i))return le.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?le.min():o.readTime?Mt(o.readTime):le.min()}(e);return this.listener.Q_(t,r)}U_(e){const t={};t.database=yf(this.serializer),t.addTarget=function(i,o){let a;const c=o.target;if(a=ml(c)?{documents:MT(i,c)}:{query:LT(i,c).gt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=xT(i,o.resumeToken);const u=gf(i,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(le.min())>0){a.readTime=Fi(i,o.snapshotVersion.toTimestamp());const u=gf(i,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=yO(this.serializer,e);r&&(t.labels=r),this.F_(t)}K_(e){const t={};t.database=yf(this.serializer),t.removeTarget=e,this.F_(t)}}class p1 extends cw{constructor(e,t,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,o),this.serializer=i}get W_(){return this.p_>0}start(){this.lastStreamToken=void 0,super.start()}O_(){this.W_&&this.G_([])}k_(e,t){return this.connection.a_("Write",e,t)}q_(e){return ce(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ce(!e.writeResults||e.writeResults.length===0,55816),this.listener.z_()}onNext(e){ce(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.y_.reset();const t=_O(e.writeResults,e.commitTime),r=Mt(e.commitTime);return this.listener.j_(r,t)}H_(){const e={};e.database=yf(this.serializer),this.F_(e)}G_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>yl(this.serializer,r))};this.F_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1{}class g1 extends m1{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.J_=!1}Y_(){if(this.J_)throw new Y(B.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(e,t,r,s){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Qo(e,_f(t,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Y(B.UNKNOWN,i.toString())})}Wo(e,t,r,s,i){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Wo(e,_f(t,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Y(B.UNKNOWN,o.toString())})}terminate(){this.J_=!0,this.connection.terminate()}}class _1{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){this.Z_===0&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve())))}ia(e){this.state==="Online"?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.na("Offline")))}set(e){this.sa(),this.Z_=0,e==="Online"&&(this.ea=!1),this.na(e)}na(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ra(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(Ot(t),this.ea=!1):z("OnlineStateTracker",t)}sa(){this.X_!==null&&(this.X_.cancel(),this.X_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ns="RemoteStore";class y1{constructor(e,t,r,s,i){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=i,this.ca.vo(o=>{r.enqueueAndForget(async()=>{Fs(this)&&(z(Ns,"Restarting streams for network reachability change."),await async function(c){const u=_e(c);u.aa.add(4),await Va(u),u.la.set("Unknown"),u.aa.delete(4),await cu(u)}(this))})}),this.la=new _1(r,s)}}async function cu(n){if(Fs(n))for(const e of n.ua)await e(!0)}async function Va(n){for(const e of n.ua)await e(!1)}function lw(n,e){const t=_e(n);t._a.has(e.targetId)||(t._a.set(e.targetId,e),qd(t)?Hd(t):Gi(t).b_()&&$d(t,e))}function jd(n,e){const t=_e(n),r=Gi(t);t._a.delete(e),r.b_()&&uw(t,e),t._a.size===0&&(r.b_()?r.v_():Fs(t)&&t.la.set("Unknown"))}function $d(n,e){if(n.ha.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(le.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Gi(n).U_(e)}function uw(n,e){n.ha.Ke(e),Gi(n).K_(e)}function Hd(n){n.ha=new lO({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>n._a.get(e)||null,Pt:()=>n.datastore.serializer.databaseId}),Gi(n).start(),n.la.ta()}function qd(n){return Fs(n)&&!Gi(n).w_()&&n._a.size>0}function Fs(n){return _e(n).aa.size===0}function hw(n){n.ha=void 0}async function v1(n){n.la.set("Online")}async function E1(n){n._a.forEach((e,t)=>{$d(n,e)})}async function I1(n,e){hw(n),qd(n)?(n.la.ia(e),Hd(n)):n.la.set("Unknown")}async function T1(n,e,t){if(n.la.set("Online"),e instanceof kT&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s._a.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s._a.delete(a),s.ha.removeTarget(a))}(n,e)}catch(r){z(Ns,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await wl(n,r)}else if(e instanceof Nc?n.ha.Xe(e):e instanceof CT?n.ha.ot(e):n.ha.nt(e),!t.isEqual(le.min()))try{const r=await iw(n.localStore);t.compareTo(r)>=0&&await function(i,o){const a=i.ha.It(o);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const h=i._a.get(u);h&&i._a.set(u,h.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,u)=>{const h=i._a.get(c);if(!h)return;i._a.set(c,h.withResumeToken(nt.EMPTY_BYTE_STRING,h.snapshotVersion)),uw(i,c);const f=new Kn(h.target,c,u,h.sequenceNumber);$d(i,f)}),i.remoteSyncer.applyRemoteEvent(a)}(n,t)}catch(r){z(Ns,"Failed to raise snapshot:",r),await wl(n,r)}}async function wl(n,e,t){if(!Wr(e))throw e;n.aa.add(1),await Va(n),n.la.set("Offline"),t||(t=()=>iw(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{z(Ns,"Retrying IndexedDB access"),await t(),n.aa.delete(1),await cu(n)})}function fw(n,e){return e().catch(t=>wl(n,t,e))}async function Na(n){const e=_e(n),t=Hr(e);let r=e.oa.length>0?e.oa[e.oa.length-1].batchId:vs;for(;w1(e);)try{const s=await s1(e.localStore,r);if(s===null){e.oa.length===0&&t.v_();break}r=s.batchId,b1(e,s)}catch(s){await wl(e,s)}dw(e)&&pw(e)}function w1(n){return Fs(n)&&n.oa.length<10}function b1(n,e){n.oa.push(e);const t=Hr(n);t.b_()&&t.W_&&t.G_(e.mutations)}function dw(n){return Fs(n)&&!Hr(n).w_()&&n.oa.length>0}function pw(n){Hr(n).start()}async function A1(n){Hr(n).H_()}async function R1(n){const e=Hr(n);for(const t of n.oa)e.G_(t.mutations)}async function S1(n,e,t){const r=n.oa.shift(),s=kd.from(r,e,t);await fw(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await Na(n)}async function P1(n,e){e&&Hr(n).W_&&await async function(r,s){if(function(o){return aO(o)&&o!==B.ABORTED}(s.code)){const i=r.oa.shift();Hr(r).D_(),await fw(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Na(r)}}(n,e),dw(n)&&pw(n)}async function Y_(n,e){const t=_e(n);t.asyncQueue.verifyOperationInProgress(),z(Ns,"RemoteStore received new credentials");const r=Fs(t);t.aa.add(3),await Va(t),r&&t.la.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.aa.delete(3),await cu(t)}async function C1(n,e){const t=_e(n);e?(t.aa.delete(2),await cu(t)):e||(t.aa.add(2),await Va(t),t.la.set("Unknown"))}function Gi(n){return n.Pa||(n.Pa=function(t,r,s){const i=_e(t);return i.Y_(),new d1(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(n.datastore,n.asyncQueue,{jo:v1.bind(null,n),Jo:E1.bind(null,n),Zo:I1.bind(null,n),Q_:T1.bind(null,n)}),n.ua.push(async e=>{e?(n.Pa.D_(),qd(n)?Hd(n):n.la.set("Unknown")):(await n.Pa.stop(),hw(n))})),n.Pa}function Hr(n){return n.Ta||(n.Ta=function(t,r,s){const i=_e(t);return i.Y_(),new p1(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(n.datastore,n.asyncQueue,{jo:()=>Promise.resolve(),Jo:A1.bind(null,n),Zo:P1.bind(null,n),z_:R1.bind(null,n),j_:S1.bind(null,n)}),n.ua.push(async e=>{e?(n.Ta.D_(),await Na(n)):(await n.Ta.stop(),n.oa.length>0&&(z(Ns,`Stopping write stream with ${n.oa.length} pending writes`),n.oa=[]))})),n.Ta}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(e,t,r,s,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new kn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,i){const o=Date.now()+r,a=new Kd(e,t,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function zd(n,e){if(Ot("AsyncQueue",`${e}: ${n}`),Wr(n))return new Y(B.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{static emptySet(e){return new Ei(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Z.comparator(t.key,r.key):(t,r)=>Z.comparator(t.key,r.key),this.keyedMap=Io(),this.sortedSet=new qe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ei)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Ei;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{constructor(){this.Ia=new qe(Z.comparator)}track(e){const t=e.doc.key,r=this.Ia.get(t);r?e.type!==0&&r.type===3?this.Ia=this.Ia.insert(t,e):e.type===3&&r.type!==1?this.Ia=this.Ia.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Ia=this.Ia.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Ia=this.Ia.remove(t):e.type===1&&r.type===2?this.Ia=this.Ia.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):re(63341,{Vt:e,Ea:r}):this.Ia=this.Ia.insert(t,e)}da(){const e=[];return this.Ia.inorderTraversal((t,r)=>{e.push(r)}),e}}class Ui{constructor(e,t,r,s,i,o,a,c,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,s,i){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new Ui(e,t,Ei.emptySet(t),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&eu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some(e=>e.ma())}}class x1{constructor(){this.queries=X_(),this.onlineState="Unknown",this.fa=new Set}terminate(){(function(t,r){const s=_e(t),i=s.queries;s.queries=X_(),i.forEach((o,a)=>{for(const c of a.Ra)c.onError(r)})})(this,new Y(B.ABORTED,"Firestore shutting down"))}}function X_(){return new ir(n=>mT(n),eu)}async function mw(n,e){const t=_e(n);let r=3;const s=e.query;let i=t.queries.get(s);i?!i.Va()&&e.ma()&&(r=2):(i=new k1,r=e.ma()?0:1);try{switch(r){case 0:i.Aa=await t.onListen(s,!0);break;case 1:i.Aa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(o){const a=zd(o,`Initialization of query '${si(e.query)}' failed`);return void e.onError(a)}t.queries.set(s,i),i.Ra.push(e),e.ga(t.onlineState),i.Aa&&e.pa(i.Aa)&&Gd(t)}async function gw(n,e){const t=_e(n),r=e.query;let s=3;const i=t.queries.get(r);if(i){const o=i.Ra.indexOf(e);o>=0&&(i.Ra.splice(o,1),i.Ra.length===0?s=e.ma()?0:1:!i.Va()&&e.ma()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function D1(n,e){const t=_e(n);let r=!1;for(const s of e){const i=s.query,o=t.queries.get(i);if(o){for(const a of o.Ra)a.pa(s)&&(r=!0);o.Aa=s}}r&&Gd(t)}function V1(n,e,t){const r=_e(n),s=r.queries.get(e);if(s)for(const i of s.Ra)i.onError(t);r.queries.delete(e)}function Gd(n){n.fa.forEach(e=>{e.next()})}var Af,Z_;(Z_=Af||(Af={})).ya="default",Z_.Cache="cache";class _w{constructor(e,t,r){this.query=e,this.wa=t,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=r||{}}pa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ui(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ba?this.Da(e)&&(this.wa.next(e),t=!0):this.va(e,this.onlineState)&&(this.Ca(e),t=!0),this.Sa=e,t}onError(e){this.wa.error(e)}ga(e){this.onlineState=e;let t=!1;return this.Sa&&!this.ba&&this.va(this.Sa,e)&&(this.Ca(this.Sa),t=!0),t}va(e,t){if(!e.fromCache||!this.ma())return!0;const r=t!=="Offline";return(!this.options.Fa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Da(e){if(e.docChanges.length>0)return!0;const t=this.Sa&&this.Sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Ca(e){e=Ui.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ba=!0,this.wa.next(e)}ma(){return this.options.source!==Af.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(e){this.key=e}}class vw{constructor(e){this.key=e}}class N1{constructor(e,t){this.query=e,this.qa=t,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=ve(),this.mutatedKeys=ve(),this.Ua=gT(e),this.Ka=new Ei(this.Ua)}get Wa(){return this.qa}Ga(e,t){const r=t?t.za:new J_,s=t?t.Ka:this.Ka;let i=t?t.mutatedKeys:this.mutatedKeys,o=s,a=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,f)=>{const m=s.get(h),g=ka(this.query,f)?f:null,E=!!m&&this.mutatedKeys.has(m.key),T=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let x=!1;m&&g?m.data.isEqual(g.data)?E!==T&&(r.track({type:3,doc:g}),x=!0):this.ja(m,g)||(r.track({type:2,doc:g}),x=!0,(c&&this.Ua(g,c)>0||u&&this.Ua(g,u)<0)&&(a=!0)):!m&&g?(r.track({type:0,doc:g}),x=!0):m&&!g&&(r.track({type:1,doc:m}),x=!0,(c||u)&&(a=!0)),x&&(g?(o=o.add(g),i=T?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{Ka:o,za:r,ys:a,mutatedKeys:i}}ja(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const i=this.Ka;this.Ka=e.Ka,this.mutatedKeys=e.mutatedKeys;const o=e.za.da();o.sort((h,f)=>function(g,E){const T=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return re(20277,{Vt:x})}};return T(g)-T(E)}(h.type,f.type)||this.Ua(h.doc,f.doc)),this.Ha(r),s=s!=null&&s;const a=t&&!s?this.Ja():[],c=this.$a.size===0&&this.current&&!s?1:0,u=c!==this.Qa;return this.Qa=c,o.length!==0||u?{snapshot:new Ui(this.query,e.Ka,i,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ya:a}:{Ya:a}}ga(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new J_,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(e){return!this.qa.has(e)&&!!this.Ka.has(e)&&!this.Ka.get(e).hasLocalMutations}Ha(e){e&&(e.addedDocuments.forEach(t=>this.qa=this.qa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qa=this.qa.delete(t)),this.current=e.current)}Ja(){if(!this.current)return[];const e=this.$a;this.$a=ve(),this.Ka.forEach(r=>{this.Za(r.key)&&(this.$a=this.$a.add(r.key))});const t=[];return e.forEach(r=>{this.$a.has(r)||t.push(new vw(r))}),this.$a.forEach(r=>{e.has(r)||t.push(new yw(r))}),t}Xa(e){this.qa=e.Ns,this.$a=ve();const t=this.Ga(e.documents);return this.applyChanges(t,!0)}eu(){return Ui.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,this.Qa===0,this.hasCachedResults)}}const Wd="SyncEngine";class O1{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class M1{constructor(e){this.key=e,this.tu=!1}}class L1{constructor(e,t,r,s,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.nu={},this.ru=new ir(a=>mT(a),eu),this.iu=new Map,this.su=new Set,this.ou=new qe(Z.comparator),this._u=new Map,this.au=new Md,this.uu={},this.cu=new Map,this.lu=Vs.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return this.hu===!0}}async function F1(n,e,t=!0){const r=Aw(n);let s;const i=r.ru.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.eu()):s=await Ew(r,e,t,!0),s}async function U1(n,e){const t=Aw(n);await Ew(t,e,!0,!1)}async function Ew(n,e,t,r){const s=await i1(n.localStore,rn(e)),i=s.targetId,o=n.sharedClientState.addLocalQueryTarget(i,t);let a;return r&&(a=await B1(n,e,i,o==="current",s.resumeToken)),n.isPrimaryClient&&t&&lw(n.remoteStore,s),a}async function B1(n,e,t,r,s){n.Pu=(f,m,g)=>async function(T,x,V,D){let I=x.view.Ga(V);I.ys&&(I=await K_(T.localStore,x.query,!1).then(({documents:w})=>x.view.Ga(w,I)));const C=D&&D.targetChanges.get(x.targetId),N=D&&D.targetMismatches.get(x.targetId)!=null,F=x.view.applyChanges(I,T.isPrimaryClient,C,N);return ty(T,x.targetId,F.Ya),F.snapshot}(n,f,m,g);const i=await K_(n.localStore,e,!0),o=new N1(e,i.Ns),a=o.Ga(i.documents),c=Da.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),u=o.applyChanges(a,n.isPrimaryClient,c);ty(n,t,u.Ya);const h=new O1(e,t,o);return n.ru.set(e,h),n.iu.has(t)?n.iu.get(t).push(e):n.iu.set(t,[e]),u.snapshot}async function j1(n,e,t){const r=_e(n),s=r.ru.get(e),i=r.iu.get(s.targetId);if(i.length>1)return r.iu.set(s.targetId,i.filter(o=>!eu(o,e))),void r.ru.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await wf(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),t&&jd(r.remoteStore,s.targetId),Rf(r,s.targetId)}).catch(Ls)):(Rf(r,s.targetId),await wf(r.localStore,s.targetId,!0))}async function $1(n,e){const t=_e(n),r=t.ru.get(e),s=t.iu.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),jd(t.remoteStore,r.targetId))}async function H1(n,e,t){const r=Rw(n);try{const s=await function(o,a){const c=_e(o),u=Qe.now(),h=a.reduce((g,E)=>g.add(E.key),ve());let f,m;return c.persistence.runTransaction("Locally write mutations","readwrite",g=>{let E=Gt(),T=ve();return c.Cs.getEntries(g,h).next(x=>{E=x,E.forEach((V,D)=>{D.isValidDocument()||(T=T.add(V))})}).next(()=>c.localDocuments.getOverlayedDocuments(g,E)).next(x=>{f=x;const V=[];for(const D of a){const I=iO(D,f.get(D.key).overlayedDocument);I!=null&&V.push(new or(D.key,I,oT(I.value.mapValue),ut.exists(!0)))}return c.mutationQueue.addMutationBatch(g,u,V,a)}).next(x=>{m=x;const V=x.applyToLocalDocumentSet(f,T);return c.documentOverlayCache.saveOverlays(g,x.batchId,V)})}).then(()=>({batchId:m.batchId,changes:yT(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,c){let u=o.uu[o.currentUser.toKey()];u||(u=new qe(ge)),u=u.insert(a,c),o.uu[o.currentUser.toKey()]=u}(r,s.batchId,t),await Oa(r,s.changes),await Na(r.remoteStore)}catch(s){const i=zd(s,"Failed to persist write");t.reject(i)}}async function Iw(n,e){const t=_e(n);try{const r=await n1(t.localStore,e);e.targetChanges.forEach((s,i)=>{const o=t._u.get(i);o&&(ce(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.tu=!0:s.modifiedDocuments.size>0?ce(o.tu,14607):s.removedDocuments.size>0&&(ce(o.tu,42227),o.tu=!1))}),await Oa(t,r,e)}catch(r){await Ls(r)}}function ey(n,e,t){const r=_e(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.ru.forEach((i,o)=>{const a=o.view.ga(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const c=_e(o);c.onlineState=a;let u=!1;c.queries.forEach((h,f)=>{for(const m of f.Ra)m.ga(a)&&(u=!0)}),u&&Gd(c)}(r.eventManager,e),s.length&&r.nu.Q_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function q1(n,e,t){const r=_e(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r._u.get(e),i=s&&s.key;if(i){let o=new qe(Z.comparator);o=o.insert(i,Je.newNoDocument(i,le.min()));const a=ve().add(i),c=new ru(le.min(),new Map,new qe(ge),o,a);await Iw(r,c),r.ou=r.ou.remove(i),r._u.delete(e),Qd(r)}else await wf(r.localStore,e,!1).then(()=>Rf(r,e,t)).catch(Ls)}async function K1(n,e){const t=_e(n),r=e.batch.batchId;try{const s=await t1(t.localStore,e);ww(t,r,null),Tw(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Oa(t,s)}catch(s){await Ls(s)}}async function z1(n,e,t){const r=_e(n);try{const s=await function(o,a){const c=_e(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return c.mutationQueue.lookupMutationBatch(u,a).next(f=>(ce(f!==null,37113),h=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>c.localDocuments.getDocuments(u,h))})}(r.localStore,e);ww(r,e,t),Tw(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Oa(r,s)}catch(s){await Ls(s)}}function Tw(n,e){(n.cu.get(e)||[]).forEach(t=>{t.resolve()}),n.cu.delete(e)}function ww(n,e,t){const r=_e(n);let s=r.uu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(t?i.reject(t):i.resolve(),s=s.remove(e)),r.uu[r.currentUser.toKey()]=s}}function Rf(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.iu.get(e))n.ru.delete(r),t&&n.nu.Tu(r,t);n.iu.delete(e),n.isPrimaryClient&&n.au.Ur(e).forEach(r=>{n.au.containsKey(r)||bw(n,r)})}function bw(n,e){n.su.delete(e.path.canonicalString());const t=n.ou.get(e);t!==null&&(jd(n.remoteStore,t),n.ou=n.ou.remove(e),n._u.delete(t),Qd(n))}function ty(n,e,t){for(const r of t)r instanceof yw?(n.au.addReference(r.key,e),G1(n,r)):r instanceof vw?(z(Wd,"Document no longer in limbo: "+r.key),n.au.removeReference(r.key,e),n.au.containsKey(r.key)||bw(n,r.key)):re(19791,{Iu:r})}function G1(n,e){const t=e.key,r=t.path.canonicalString();n.ou.get(t)||n.su.has(r)||(z(Wd,"New document in limbo: "+t),n.su.add(r),Qd(n))}function Qd(n){for(;n.su.size>0&&n.ou.size<n.maxConcurrentLimboResolutions;){const e=n.su.values().next().value;n.su.delete(e);const t=new Z(xe.fromString(e)),r=n.lu.next();n._u.set(r,new M1(t)),n.ou=n.ou.insert(t,r),lw(n.remoteStore,new Kn(rn(Zl(t.path)),r,"TargetPurposeLimboResolution",tn.le))}}async function Oa(n,e,t){const r=_e(n),s=[],i=[],o=[];r.ru.isEmpty()||(r.ru.forEach((a,c)=>{o.push(r.Pu(c,e,t).then(u=>{var h;if((u||t)&&r.isPrimaryClient){const f=u?!u.fromCache:(h=t==null?void 0:t.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){s.push(u);const f=Ud.Ps(c.targetId,u);i.push(f)}}))}),await Promise.all(o),r.nu.Q_(s),await async function(c,u){const h=_e(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>O.forEach(u,m=>O.forEach(m.ls,g=>h.persistence.referenceDelegate.addReference(f,m.targetId,g)).next(()=>O.forEach(m.hs,g=>h.persistence.referenceDelegate.removeReference(f,m.targetId,g)))))}catch(f){if(!Wr(f))throw f;z(Bd,"Failed to update sequence numbers: "+f)}for(const f of u){const m=f.targetId;if(!f.fromCache){const g=h.Ss.get(m),E=g.snapshotVersion,T=g.withLastLimboFreeSnapshotVersion(E);h.Ss=h.Ss.insert(m,T)}}}(r.localStore,i))}async function W1(n,e){const t=_e(n);if(!t.currentUser.isEqual(e)){z(Wd,"User change. New user:",e.toKey());const r=await sw(t.localStore,e);t.currentUser=e,function(i,o){i.cu.forEach(a=>{a.forEach(c=>{c.reject(new Y(B.CANCELLED,o))})}),i.cu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Oa(t,r.Ms)}}function Q1(n,e){const t=_e(n),r=t._u.get(e);if(r&&r.tu)return ve().add(r.key);{let s=ve();const i=t.iu.get(e);if(!i)return s;for(const o of i){const a=t.ru.get(o);s=s.unionWith(a.view.Wa)}return s}}function Aw(n){const e=_e(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Iw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Q1.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=q1.bind(null,e),e.nu.Q_=D1.bind(null,e.eventManager),e.nu.Tu=V1.bind(null,e.eventManager),e}function Rw(n){const e=_e(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=K1.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=z1.bind(null,e),e}class fa{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=au(e.databaseInfo.databaseId),this.sharedClientState=this.Au(e),this.persistence=this.Ru(e),await this.persistence.start(),this.localStore=this.Vu(e),this.gcScheduler=this.mu(e,this.localStore),this.indexBackfillerScheduler=this.fu(e,this.localStore)}mu(e,t){return null}fu(e,t){return null}Vu(e){return rw(this.persistence,new nw,e.initialUser,this.serializer)}Ru(e){return new Ld(ou.Ei,this.serializer)}Au(e){return new ow}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}fa.provider={build:()=>new fa};class Y1 extends fa{constructor(e){super(),this.cacheSizeBytes=e}mu(e,t){ce(this.persistence.referenceDelegate instanceof Tl,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new JT(r,e.asyncQueue,t)}Ru(e){const t=this.cacheSizeBytes!==void 0?Tt.withCacheSize(this.cacheSizeBytes):Tt.DEFAULT;return new Ld(r=>Tl.Ei(r,t),this.serializer)}}class J1 extends fa{constructor(e,t,r){super(),this.gu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.gu.initialize(this,e),await Rw(this.gu.syncEngine),await Na(this.gu.remoteStore),await this.persistence.Ki(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}Vu(e){return rw(this.persistence,new nw,e.initialUser,this.serializer)}mu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new JT(r,e.asyncQueue,t)}fu(e,t){const r=new rN(t,this.persistence);return new nN(e.asyncQueue,r)}Ru(e){const t=JO(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Tt.withCacheSize(this.cacheSizeBytes):Tt.DEFAULT;return new Fd(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,f1(),Oc(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Au(e){return new ow}}class bl{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>ey(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=W1.bind(null,this.syncEngine),await C1(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new x1}()}createDatastore(e){const t=au(e.databaseInfo.databaseId),r=function(i){return new h1(i)}(e.databaseInfo);return function(i,o,a,c){return new g1(i,o,a,c)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,s,i,o,a){return new y1(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,t=>ey(this.syncEngine,t,0),function(){return W_.C()?new W_:new a1}())}createSyncEngine(e,t){return function(s,i,o,a,c,u,h){const f=new L1(s,i,o,a,c,u);return h&&(f.hu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(s){const i=_e(s);z(Ns,"RemoteStore shutting down."),i.aa.add(5),await Va(i),i.ca.shutdown(),i.la.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}bl.provider={build:()=>new bl};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.pu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.pu(this.observer.error,e):Ot("Uncaught Error in snapshot listener:",e.toString()))}yu(){this.muted=!0}pu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qr="FirestoreClient";class X1{constructor(e,t,r,s,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=mt.UNAUTHENTICATED,this.clientId=MI.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{z(qr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(z(qr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new kn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=zd(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function fh(n,e){n.asyncQueue.verifyOperationInProgress(),z(qr,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async s=>{r.isEqual(s)||(await sw(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function ny(n,e){n.asyncQueue.verifyOperationInProgress();const t=await Z1(n);z(qr,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>Y_(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>Y_(e.remoteStore,s)),n._onlineComponents=e}async function Z1(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){z(qr,"Using user provided OfflineComponentProvider");try{await fh(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(s){return s.name==="FirebaseError"?s.code===B.FAILED_PRECONDITION||s.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(t))throw t;Ps("Error using user provided cache. Falling back to memory cache: "+t),await fh(n,new fa)}}else z(qr,"Using default OfflineComponentProvider"),await fh(n,new Y1(void 0));return n._offlineComponents}async function Pw(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(z(qr,"Using user provided OnlineComponentProvider"),await ny(n,n._uninitializedComponentsProvider._online)):(z(qr,"Using default OnlineComponentProvider"),await ny(n,new bl))),n._onlineComponents}function eM(n){return Pw(n).then(e=>e.syncEngine)}async function Cw(n){const e=await Pw(n),t=e.eventManager;return t.onListen=F1.bind(null,e.syncEngine),t.onUnlisten=j1.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=U1.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=$1.bind(null,e.syncEngine),t}function tM(n,e,t={}){const r=new kn;return n.asyncQueue.enqueueAndForget(async()=>function(i,o,a,c,u){const h=new Sw({next:m=>{h.yu(),o.enqueueAndForget(()=>gw(i,f));const g=m.docs.has(a);!g&&m.fromCache?u.reject(new Y(B.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&m.fromCache&&c&&c.source==="server"?u.reject(new Y(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new _w(Zl(a.path),h,{includeMetadataChanges:!0,Fa:!0});return mw(i,f)}(await Cw(n),n.asyncQueue,e,t,r)),r.promise}function nM(n,e,t={}){const r=new kn;return n.asyncQueue.enqueueAndForget(async()=>function(i,o,a,c,u){const h=new Sw({next:m=>{h.yu(),o.enqueueAndForget(()=>gw(i,f)),m.fromCache&&c.source==="server"?u.reject(new Y(B.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new _w(a,h,{includeMetadataChanges:!0,Fa:!0});return mw(i,f)}(await Cw(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kw(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ry=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xw(n,e,t){if(!t)throw new Y(B.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function rM(n,e,t,r){if(e===!0&&r===!0)throw new Y(B.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function sy(n){if(!Z.isDocumentKey(n))throw new Y(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function iy(n){if(Z.isDocumentKey(n))throw new Y(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function lu(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":re(12329,{type:typeof n})}function _n(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Y(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=lu(n);throw new Y(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dw="firestore.googleapis.com",oy=!0;class ay{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Y(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Dw,this.ssl=oy}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:oy;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=GT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<NO)throw new Y(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}rM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=kw((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Y(B.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Y(B.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Y(B.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class uu{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ay({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Y(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Y(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ay(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new qV;switch(r.type){case"firstParty":return new WV(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Y(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=ry.get(t);r&&(z("ComponentProvider","Removing Datastore"),ry.delete(t),r.terminate())}(this),Promise.resolve()}}function sM(n,e,t,r={}){var s;const i=(n=_n(n,uu))._getSettings(),o=Object.assign(Object.assign({},i),{emulatorOptions:n._getEmulatorOptions()}),a=`${e}:${t}`;i.host!==Dw&&i.host!==a&&Ps("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},i),{host:a,ssl:!1,emulatorOptions:r});if(!ws(c,o)&&(n._setSettings(c),r.mockUserToken)){let u,h;if(typeof r.mockUserToken=="string")u=r.mockUserToken,h=mt.MOCK_USER;else{u=ok(r.mockUserToken,(s=n._app)===null||s===void 0?void 0:s.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new Y(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new mt(f)}n._authCredentials=new KV(new NI(u,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Us(this.firestore,e,this._query)}}class jt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ur(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new jt(this.firestore,e,this._key)}}class Ur extends Us{constructor(e,t,r){super(e,t,Zl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new jt(this.firestore,null,new Z(e))}withConverter(e){return new Ur(this.firestore,e,this._path)}}function oL(n,e,...t){if(n=tt(n),xw("collection","path",e),n instanceof uu){const r=xe.fromString(e,...t);return iy(r),new Ur(n,null,r)}{if(!(n instanceof jt||n instanceof Ur))throw new Y(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(xe.fromString(e,...t));return iy(r),new Ur(n.firestore,null,r)}}function iM(n,e,...t){if(n=tt(n),arguments.length===1&&(e=MI.newId()),xw("doc","path",e),n instanceof uu){const r=xe.fromString(e,...t);return sy(r),new jt(n,null,new Z(r))}{if(!(n instanceof jt||n instanceof Ur))throw new Y(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(xe.fromString(e,...t));return sy(r),new jt(n.firestore,n instanceof Ur?n.converter:null,new Z(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cy="AsyncQueue";class ly{constructor(e=Promise.resolve()){this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new aw(this,"async_queue_retry"),this.ju=()=>{const r=Oc();r&&z(cy,"Visibility state changed to "+r.visibilityState),this.y_.A_()},this.Hu=e;const t=Oc();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ju(),this.Yu(e)}enterRestrictedMode(e){if(!this.$u){this.$u=!0,this.Gu=e||!1;const t=Oc();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.ju)}}enqueue(e){if(this.Ju(),this.$u)return new Promise(()=>{});const t=new kn;return this.Yu(()=>this.$u&&this.Gu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qu.push(e),this.Zu()))}async Zu(){if(this.Qu.length!==0){try{await this.Qu[0](),this.Qu.shift(),this.y_.reset()}catch(e){if(!Wr(e))throw e;z(cy,"Operation failed with retryable error: "+e)}this.Qu.length>0&&this.y_.E_(()=>this.Zu())}}Yu(e){const t=this.Hu.then(()=>(this.Wu=!0,e().catch(r=>{throw this.Ku=r,this.Wu=!1,Ot("INTERNAL UNHANDLED ERROR: ",uy(r)),r}).then(r=>(this.Wu=!1,r))));return this.Hu=t,t}enqueueAfterDelay(e,t,r){this.Ju(),this.zu.indexOf(e)>-1&&(t=0);const s=Kd.createAndSchedule(this,e,t,r,i=>this.Xu(i));return this.Uu.push(s),s}Ju(){this.Ku&&re(47125,{ec:uy(this.Ku)})}verifyOperationInProgress(){}async tc(){let e;do e=this.Hu,await e;while(e!==this.Hu)}nc(e){for(const t of this.Uu)if(t.timerId===e)return!0;return!1}rc(e){return this.tc().then(()=>{this.Uu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.tc()})}sc(e){this.zu.push(e)}Xu(e){const t=this.Uu.indexOf(e);this.Uu.splice(t,1)}}function uy(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Yr extends uu{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new ly,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ly(e),this._firestoreClient=void 0,await e}}}function oM(n,e){const t=typeof n=="object"?n:qE(),r=typeof n=="string"?n:pl,s=ad(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=sk("firestore");i&&sM(s,...i)}return s}function hu(n){if(n._terminated)throw new Y(B.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Vw(n),n._firestoreClient}function Vw(n){var e,t,r;const s=n._freezeSettings(),i=function(a,c,u,h){return new DN(a,c,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,kw(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new X1(n._authCredentials,n._appCheckCredentials,n._queue,i,n._componentsProvider&&function(a){const c=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(c),_online:c}}(n._componentsProvider))}function aM(n,e){Ps("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return cM(n,bl.provider,{build:r=>new J1(r,t.cacheSizeBytes,void 0)}),Promise.resolve()}function cM(n,e,t){if((n=_n(n,Yr))._firestoreClient||n._terminated)throw new Y(B.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new Y(B.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},Vw(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Bi(nt.fromBase64String(e))}catch(t){throw new Y(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Bi(nt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Y(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new We(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Y(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Y(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ge(this._lat,e._lat)||ge(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lM=/^__.*__$/;class uM{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new or(e,this.data,this.fieldMask,t,this.fieldTransforms):new zi(e,this.data,t,this.fieldTransforms)}}class Nw{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new or(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Ow(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw re(40011,{oc:n})}}class Zd{constructor(e,t,r,s,i,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this._c(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get oc(){return this.settings.oc}ac(e){return new Zd(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}uc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.ac({path:r,cc:!1});return s.lc(e),s}hc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.ac({path:r,cc:!1});return s._c(),s}Pc(e){return this.ac({path:void 0,cc:!0})}Tc(e){return Al(e,this.settings.methodName,this.settings.Ic||!1,this.path,this.settings.Ec)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}_c(){if(this.path)for(let e=0;e<this.path.length;e++)this.lc(this.path.get(e))}lc(e){if(e.length===0)throw this.Tc("Document fields must not be empty");if(Ow(this.oc)&&lM.test(e))throw this.Tc('Document fields cannot begin and end with "__"')}}class hM{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||au(e)}dc(e,t,r,s=!1){return new Zd({oc:e,methodName:t,Ec:r,path:We.emptyPath(),cc:!1,Ic:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function fu(n){const e=n._freezeSettings(),t=au(n._databaseId);return new hM(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Mw(n,e,t,r,s,i={}){const o=n.dc(i.merge||i.mergeFields?2:0,e,t,s);ep("Data must be an object, but it was:",o,r);const a=Uw(r,o);let c,u;if(i.merge)c=new Bt(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const m=Sf(e,f,t);if(!o.contains(m))throw new Y(B.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);jw(h,m)||h.push(m)}c=new Bt(h),u=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=o.fieldTransforms;return new uM(new Rt(a),c,u)}class du extends Yd{_toFieldTransform(e){if(e.oc!==2)throw e.oc===1?e.Tc(`${this._methodName}() can only appear at the top level of your update data`):e.Tc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof du}}function Lw(n,e,t,r){const s=n.dc(1,e,t);ep("Data must be an object, but it was:",s,r);const i=[],o=Rt.empty();Qr(r,(c,u)=>{const h=tp(e,c,t);u=tt(u);const f=s.hc(h);if(u instanceof du)i.push(h);else{const m=La(u,f);m!=null&&(i.push(h),o.set(h,m))}});const a=new Bt(i);return new Nw(o,a,s.fieldTransforms)}function Fw(n,e,t,r,s,i){const o=n.dc(1,e,t),a=[Sf(e,r,t)],c=[s];if(i.length%2!=0)throw new Y(B.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)a.push(Sf(e,i[m])),c.push(i[m+1]);const u=[],h=Rt.empty();for(let m=a.length-1;m>=0;--m)if(!jw(u,a[m])){const g=a[m];let E=c[m];E=tt(E);const T=o.hc(g);if(E instanceof du)u.push(g);else{const x=La(E,T);x!=null&&(u.push(g),h.set(g,x))}}const f=new Bt(u);return new Nw(h,f,o.fieldTransforms)}function fM(n,e,t,r=!1){return La(t,n.dc(r?4:3,e))}function La(n,e){if(Bw(n=tt(n)))return ep("Unsupported field value:",e,n),Uw(n,e);if(n instanceof Yd)return function(r,s){if(!Ow(s.oc))throw s.Tc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Tc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.cc&&e.oc!==4)throw e.Tc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let c=La(a,s.Pc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(n,e)}return function(r,s){if((r=tt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return XN(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Qe.fromDate(r);return{timestampValue:Fi(s.serializer,i)}}if(r instanceof Qe){const i=new Qe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Fi(s.serializer,i)}}if(r instanceof Jd)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Bi)return{bytesValue:xT(s.serializer,r._byteString)};if(r instanceof jt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Tc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Vd(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Xd)return function(o,a){return{mapValue:{fields:{[Ad]:{stringValue:Rd},[Di]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Tc("VectorValues must only contain numeric values.");return Pd(a.serializer,u)})}}}}}}(r,s);throw s.Tc(`Unsupported field value: ${lu(r)}`)}(n,e)}function Uw(n,e){const t={};return JI(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Qr(n,(r,s)=>{const i=La(s,e.uc(r));i!=null&&(t[r]=i)}),{mapValue:{fields:t}}}function Bw(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Qe||n instanceof Jd||n instanceof Bi||n instanceof jt||n instanceof Yd||n instanceof Xd)}function ep(n,e,t){if(!Bw(t)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(t)){const r=lu(t);throw r==="an object"?e.Tc(n+" a custom object"):e.Tc(n+" "+r)}}function Sf(n,e,t){if((e=tt(e))instanceof Ma)return e._internalPath;if(typeof e=="string")return tp(n,e);throw Al("Field path arguments must be of type string or ",n,!1,void 0,t)}const dM=new RegExp("[~\\*/\\[\\]]");function tp(n,e,t){if(e.search(dM)>=0)throw Al(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ma(...e.split("."))._internalPath}catch{throw Al(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Al(n,e,t,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new Y(B.INVALID_ARGUMENT,a+n+c)}function jw(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(e,t,r,s,i){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new jt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new pM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(pu("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class pM extends $w{data(){return super.data()}}function pu(n,e){return typeof e=="string"?tp(n,e):e instanceof Ma?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mM(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Y(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class np{}class Hw extends np{}function aL(n,e,...t){let r=[];e instanceof np&&r.push(e),r=r.concat(t),function(i){const o=i.filter(c=>c instanceof rp).length,a=i.filter(c=>c instanceof mu).length;if(o>1||o>0&&a>0)throw new Y(B.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)n=s._apply(n);return n}class mu extends Hw{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new mu(e,t,r)}_apply(e){const t=this._parse(e);return qw(e._query,t),new Us(e.firestore,e.converter,pf(e._query,t))}_parse(e){const t=fu(e.firestore);return function(i,o,a,c,u,h,f){let m;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new Y(B.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){fy(f,h);const E=[];for(const T of f)E.push(hy(c,i,T));m={arrayValue:{values:E}}}else m=hy(c,i,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||fy(f,h),m=fM(a,o,f,h==="in"||h==="not-in");return Te.create(u,h,m)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function cL(n,e,t){const r=e,s=pu("where",n);return mu._create(s,r,t)}class rp extends np{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new rp(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:De.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const c of a)qw(o,c),o=pf(o,c)}(e._query,t),new Us(e.firestore,e.converter,pf(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class sp extends Hw{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new sp(e,t)}_apply(e){const t=function(s,i,o){if(s.startAt!==null)throw new Y(B.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Y(B.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new la(i,o)}(e._query,this._field,this._direction);return new Us(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Ki(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}function lL(n,e="asc"){const t=e,r=pu("orderBy",n);return sp._create(r,t)}function hy(n,e,t){if(typeof(t=tt(t))=="string"){if(t==="")throw new Y(B.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!pT(e)&&t.indexOf("/")!==-1)throw new Y(B.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(xe.fromString(t));if(!Z.isDocumentKey(r))throw new Y(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return aa(n,new Z(r))}if(t instanceof jt)return aa(n,t._key);throw new Y(B.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${lu(t)}.`)}function fy(n,e){if(!Array.isArray(n)||n.length===0)throw new Y(B.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function qw(n,e){const t=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new Y(B.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Y(B.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class gM{convertValue(e,t="none"){switch(jr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return je(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Jn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw re(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Qr(e,(s,i)=>{r[s]=this.convertValue(i,t)}),r}convertVectorValue(e){var t,r,s;const i=(s=(r=(t=e.fields)===null||t===void 0?void 0:t[Di].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>je(o.doubleValue));return new Xd(i)}convertGeoPoint(e){return new Jd(je(e.latitude),je(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Jl(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ia(e));default:return null}}convertTimestamp(e){const t=Yn(e);return new Qe(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=xe.fromString(e);ce(jT(r),9688,{name:e});const s=new Cs(r.get(1),r.get(3)),i=new Z(r.popFirst(5));return s.isEqual(t)||Ot(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kw(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class zw extends $w{constructor(e,t,r,s,i,o){super(e,t,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Mc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(pu("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Mc extends zw{data(e={}){return super.data(e)}}class _M{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new bo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Mc(this._firestore,this._userDataWriter,r.key,r,new bo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Y(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const c=new Mc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new bo(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const c=new Mc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new bo(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:yM(a.type),doc:c,oldIndex:u,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function yM(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return re(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uL(n){n=_n(n,jt);const e=_n(n.firestore,Yr);return tM(hu(e),n._key).then(t=>vM(e,n,t))}class Gw extends gM{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bi(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new jt(this.firestore,null,t)}}function hL(n){n=_n(n,Us);const e=_n(n.firestore,Yr),t=hu(e),r=new Gw(e);return mM(n._query),nM(t,n._query).then(s=>new _M(e,r,n,s))}function fL(n,e,t,...r){n=_n(n,jt);const s=_n(n.firestore,Yr),i=fu(s);let o;return o=typeof(e=tt(e))=="string"||e instanceof Ma?Fw(i,"updateDoc",n._key,e,t,r):Lw(i,"updateDoc",n._key,e),gu(s,[o.toMutation(n._key,ut.exists(!0))])}function dL(n){return gu(_n(n.firestore,Yr),[new xa(n._key,ut.none())])}function pL(n,e){const t=_n(n.firestore,Yr),r=iM(n),s=Kw(n.converter,e);return gu(t,[Mw(fu(n.firestore),"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,ut.exists(!1))]).then(()=>r)}function gu(n,e){return function(r,s){const i=new kn;return r.asyncQueue.enqueueAndForget(async()=>H1(await eM(r),s,i)),i.promise}(hu(n),e)}function vM(n,e,t){const r=t.docs.get(e._key),s=new Gw(n);return new zw(n,s,e._key,r,new bo(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EM{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=fu(e)}set(e,t,r){this._verifyNotCommitted();const s=dh(e,this._firestore),i=Kw(s.converter,t,r),o=Mw(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,ut.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const i=dh(e,this._firestore);let o;return o=typeof(t=tt(t))=="string"||t instanceof Ma?Fw(this._dataReader,"WriteBatch.update",i._key,t,r,s):Lw(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(o.toMutation(i._key,ut.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=dh(e,this._firestore);return this._mutations=this._mutations.concat(new xa(t._key,ut.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Y(B.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function dh(n,e){if((n=tt(n)).firestore!==e)throw new Y(B.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mL(n){return hu(n=_n(n,Yr)),new EM(n,e=>gu(n,e))}(function(e,t=!0){(function(s){qi=s})($i),Ri(new bs("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new Yr(new zV(r.getProvider("auth-internal")),new QV(o,r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Y(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Cs(u.options.projectId,h)}(o,s),o);return i=Object.assign({useFetchStreams:t},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Mr(zg,Gg,e),Mr(zg,Gg,"esm2017")})();const IM=on(n=>{var s,i,o,a,c,u;const e=Ea(),t=(h,f)=>h||f,r={apiKey:t(((s=e.public)==null?void 0:s.firebaseApiKey)||void 0,"**FIREBASE_API_KEY**"),authDomain:t(((i=e.public)==null?void 0:i.firebaseAuthDomain)||void 0,"**FIREBASE_AUTH_DOMAIN**"),projectId:t(((o=e.public)==null?void 0:o.firebaseProjectId)||void 0,"**FIREBASE_PROJECT_ID**"),storageBucket:t(((a=e.public)==null?void 0:a.firebaseStorageBucket)||void 0,"**FIREBASE_STORAGE_BUCKET**"),messagingSenderId:t(((c=e.public)==null?void 0:c.firebaseMessagingSenderId)||void 0,"**FIREBASE_MESSAGING_SENDER_ID**"),appId:t(((u=e.public)==null?void 0:u.firebaseAppId)||void 0,"**FIREBASE_APP_ID**")};try{const h=HE(r),f=$V(h),m=oM(h);aM(m).catch(g=>{g.code==="failed-precondition"?console.warn("Firebase persistence could not be enabled: Multiple tabs open"):g.code==="unimplemented"?console.warn("Firebase persistence not supported in this browser"):console.error("Error enabling Firebase persistence:",g)}),n.provide("firebase",{app:h,auth:f,firestore:m}),console.log("Firebase baaryla balatld.")}catch(h){console.error("Firebase balatlrken hata olutu:",h),n.provide("firebase",{app:null,auth:null,firestore:null})}}),TM=[dP,yP,FC,UC,BC,jC,$C,qC,KC,zC,YC,IM],Ww=(n="RouteProvider")=>er({name:n,props:{vnode:{type:Object,required:!0},route:{type:Object,required:!0},vnodeRef:Object,renderKey:String,trackRootNodes:Boolean},setup(e){const t=e.renderKey,r=e.route,s={};for(const i in e.route)Object.defineProperty(s,i,{get:()=>t===e.renderKey?e.route[i]:r[i],enumerable:!0});return Sn(Ia,$n(s)),()=>St(e.vnode,{ref:e.vnodeRef})}}),wM=Ww(),dy=new WeakMap,bM=er({name:"NuxtPage",inheritAttrs:!1,props:{name:{type:String},transition:{type:[Boolean,Object],default:void 0},keepalive:{type:[Boolean,Object],default:void 0},route:{type:Object},pageKey:{type:[Function,String],default:null}},setup(n,{attrs:e,slots:t,expose:r}){const s=Xe(),i=Rn(),o=Pt(Ia,null);let a;r({pageRef:i});const c=Pt(cE,null);let u;const h=s.deferHydration();if(s.isHydrating){const m=s.hooks.hookOnce("app:error",h);$t().beforeEach(m)}n.pageKey&&Vr(()=>n.pageKey,(m,g)=>{m!==g&&s.callHook("page:loading:start")});let f=!1;{const m=$t().beforeResolve(()=>{f=!1});ya(()=>{m()})}return()=>St(CE,{name:n.name,route:n.route,...e},{default:m=>{const g=RM(o,m.route,m.Component),E=o&&o.matched.length===m.route.matched.length;if(!m.Component){if(u&&!E)return u;h();return}if(u&&c&&!c.isCurrent(m.route))return u;if(g&&o&&(!c||c!=null&&c.isCurrent(o)))return E?u:null;const T=zh(m,n.pageKey),x=SM(o,m.route,m.Component);!s.isHydrating&&a===T&&!x&&(s.callHook("page:loading:end"),f=!0),a=T;const V=!!(n.transition??m.route.meta.pageTransition??Mh),D=V&&AM([n.transition,m.route.meta.pageTransition,Mh,{onAfterLeave:()=>{s.callHook("page:transition:finish",m.Component)}}]),I=n.keepalive??m.route.meta.keepalive??rS;return u=kE(V&&D,RC(I,St(zf,{suspensible:!0,onPending:()=>s.callHook("page:start",m.Component),onResolve:()=>{ga(()=>s.callHook("page:finish",m.Component).then(()=>{if(!f&&!x)return f=!0,s.callHook("page:loading:end")}).finally(h))}},{default:()=>{const C={key:T||void 0,vnode:t.default?PM(t.default,m):m.Component,route:m.route,renderKey:T||void 0,trackRootNodes:V,vnodeRef:i};if(!I)return St(wM,C);const N=m.Component.type,F=N;let w=dy.get(F);return w||(w=Ww(N.name||N.__name),dy.set(F,w)),St(w,C)}}))).default(),u}})}});function AM(n){const e=n.filter(Boolean).map(t=>({...t,onAfterLeave:t.onAfterLeave?rd(t.onAfterLeave):void 0}));return oE(...e)}function RM(n,e,t){if(!n)return!1;const r=e.matched.findIndex(s=>{var i;return((i=s.components)==null?void 0:i.default)===(t==null?void 0:t.type)});return!r||r===-1?!1:e.matched.slice(0,r).some((s,i)=>{var o,a,c;return((o=s.components)==null?void 0:o.default)!==((c=(a=n.matched[i])==null?void 0:a.components)==null?void 0:c.default)})||t&&zh({route:e,Component:t})!==zh({route:n,Component:t})}function SM(n,e,t){return n?e.matched.findIndex(s=>{var i;return((i=s.components)==null?void 0:i.default)===(t==null?void 0:t.type)})<e.matched.length-1:!1}function PM(n,e){const t=n(e);return t.length===1?St(t[0]):St(At,void 0,t)}const CM=er({name:"LayoutLoader",inheritAttrs:!1,props:{name:String,layoutProps:Object},setup(n,e){return()=>St(Cr[n.name],n.layoutProps,e.slots)}}),kM={name:{type:[String,Boolean,Object],default:null},fallback:{type:[String,Object],default:null}},xM=er({name:"NuxtLayout",inheritAttrs:!1,props:kM,setup(n,e){const t=Xe(),r=Pt(Ia),s=r===Xf()?IC():r,i=zt(()=>{let c=Be(n.name)??s.meta.layout??"default";return c&&!(c in Cr)&&n.fallback&&(c=Be(n.fallback)),c}),o=Rn();e.expose({layoutRef:o});const a=t.deferHydration();if(t.isHydrating){const c=t.hooks.hookOnce("app:error",a);$t().beforeEach(c)}return()=>{const c=i.value&&i.value in Cr,u=s.meta.layoutTransition??nS;return kE(c&&u,{default:()=>St(zf,{suspensible:!0,onResolve:()=>{ga(a)}},{default:()=>St(DM,{layoutProps:Fv(e.attrs,{ref:o}),key:i.value||void 0,name:i.value,shouldProvide:!n.name,hasTransition:!!u},e.slots)})}).default()}}}),DM=er({name:"NuxtLayoutProvider",inheritAttrs:!1,props:{name:{type:[String,Boolean]},layoutProps:{type:Object},hasTransition:{type:Boolean},shouldProvide:{type:Boolean}},setup(n,e){const t=n.name;return n.shouldProvide&&Sn(cE,{isCurrent:r=>t===(r.meta.layout??"default")}),()=>{var r,s;return!t||typeof t=="string"&&!(t in Cr)?(s=(r=e.slots).default)==null?void 0:s.call(r):St(CM,{key:t,layoutProps:n.layoutProps,name:t},e.slots)}}}),VM=()=>Xc("color-mode").value,NM={class:"min-h-screen"},OM=er({__name:"app",setup(n){const e=Xc("user",()=>null);zt(()=>!!e.value);const t=VM(),r=Xc("theme-hue",()=>parseInt(localStorage.getItem("theme-hue")||"240"));return Sn("themeHue",r),Sn("setThemeHue",s=>{r.value=s,document.documentElement.style.setProperty("--hue",s.toString()),localStorage.setItem("theme-hue",s.toString())}),Sn("setColorMode",s=>{t.preference=s,localStorage.setItem("color-mode-preference",s)}),(s,i)=>{const o=bM,a=xM;return Zt(),Vv("div",NM,[$e(a,null,{default:Bf(()=>[$e(o)]),_:1})])}}}),MM={__name:"nuxt-error-page",props:{error:Object},setup(n){const t=n.error;t.stack&&t.stack.split(`
`).splice(1).map(f=>({text:f.replace("webpack:/","").replace(".vue",".js").trim(),internal:f.includes("node_modules")&&!f.includes(".cache")||f.includes("internal")||f.includes("new Promise")})).map(f=>`<span class="stack${f.internal?" internal":""}">${f.text}</span>`).join(`
`);const r=Number(t.statusCode||500),s=r===404,i=t.statusMessage??(s?"Page Not Found":"Internal Server Error"),o=t.message||t.toString(),a=void 0,h=s?Ih(()=>Tn(()=>import("./CEhKBCQW.js"),__vite__mapDeps([14,1,12,15,16]),import.meta.url)):Ih(()=>Tn(()=>import("./2hZ6-4pJ.js"),__vite__mapDeps([17,12,15,18]),import.meta.url));return(f,m)=>(Zt(),jn(Be(h),kb(Mv({statusCode:Be(r),statusMessage:Be(i),description:Be(o),stack:Be(a)})),null,16))}},LM={key:0},py={__name:"nuxt-root",setup(n){const e=()=>null,t=Xe(),r=t.deferHydration();if(t.isHydrating){const c=t.hooks.hookOnce("app:error",r);$t().beforeEach(c)}const s=!1;Sn(Ia,Xf()),t.hooks.callHookWith(c=>c.map(u=>u()),"vue:setup");const i=Ll(),o=!1;ov((c,u,h)=>{if(t.hooks.callHook("vue:error",c,u,h).catch(f=>console.error("[nuxt] Error in `vue:error` hook",f)),uE(c)&&(c.fatal||c.unhandled))return t.runWithContext(()=>Ir(c)),!1});const a=!1;return(c,u)=>(Zt(),jn(zf,{onResolve:Be(r)},{default:Bf(()=>[Be(o)?(Zt(),Vv("div",LM)):Be(i)?(Zt(),jn(Be(MM),{key:1,error:Be(i)},null,8,["error"])):Be(a)?(Zt(),jn(Be(e),{key:2,context:Be(a)},null,8,["context"])):Be(s)?(Zt(),jn(kA(Be(s)),{key:3})):(Zt(),jn(Be(OM),{key:4}))]),_:1},8,["onResolve"]))}};let my;{let n;my=async function(){var o,a;if(n)return n;const r=!!(((o=window.__NUXT__)==null?void 0:o.serverRendered)??((a=document.getElementById("__NUXT_DATA__"))==null?void 0:a.dataset.ssr)==="true")?J0(py):Y0(py),s=cS({vueApp:r});async function i(c){var u;await s.callHook("app:error",c),(u=s.payload).error||(u.error=Fl(c))}r.config.errorHandler=i,s.hook("app:suspense:resolve",()=>{r.config.errorHandler===i&&(r.config.errorHandler=void 0)});try{await hS(s,TM)}catch(c){i(c)}try{await s.hooks.callHook("app:created",r),await s.hooks.callHook("app:beforeMount",r),r.mount(iS),await s.hooks.callHook("app:mounted",r),await ga()}catch(c){i(c)}return r},n=my().catch(e=>{throw console.error("Error while mounting app:",e),e})}export{Cl as $,Xf as A,$M as B,kl as C,Xe as D,oL as E,At as F,aL as G,cL as H,hL as I,mL as J,iM as K,fL as L,pL as M,lL as N,dL as O,uL as P,QM as Q,Xc as R,Vr as S,iv as T,rL as U,eL as V,sL as W,nL as X,tL as Y,VM as Z,AA as _,Ov as a,XM as a0,HM as a1,$V as a2,Ry as a3,UM as a4,nA as a5,sd as a6,mg as a7,ya as a8,ZM as a9,St as aa,jM as ab,zv as ac,ES as ad,Yf as ae,Ea as af,Ms as ag,Vh as ah,Qf as ai,WM as aj,$e as b,Vv as c,Lv as d,fS as e,dE as f,er as g,Hf as h,Pt as i,$f as j,qM as k,$t as l,YA as m,YM as n,Zt as o,GM as p,KM as q,Rn as r,BM as s,Vb as t,JM as u,zM as v,Bf as w,Be as x,et as y,zt as z};
